function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function r(){return Object.create(null)}function i(t){t.forEach(n)}function o(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let s;function u(t,e){return s||(s=document.createElement("a")),s.href=e,t===s.href}function c(e,n,r){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}(n,r))}function h(t,e,n,r){if(t){const i=l(t,e,n,r);return t[0](i)}}function l(t,n,r,i){return t[1]&&i?e(r.ctx.slice(),t[1](i(n))):r.ctx}function f(t,e,n,r){if(t[2]&&r){const i=t[2](r(n));if(void 0===e.dirty)return i;if("object"==typeof i){const t=[],n=Math.max(e.dirty.length,i.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|i[r];return t}return e.dirty|i}return e.dirty}function p(t,e,n,r,i,o){if(i){const a=l(e,n,r,o);t.p(a,i)}}function d(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}let v,g=!1;function y(t,e,n,r){for(;t<e;){const i=t+(e-t>>1);n(i)<=r?t=i+1:e=i}return t}function m(t,e){if(g){for(!function(t){if(t.hydrate_init)return;t.hydrate_init=!0;let e=t.childNodes;if("HEAD"===t.nodeName){const t=[];for(let n=0;n<e.length;n++){const r=e[n];void 0!==r.claim_order&&t.push(r)}e=t}const n=new Int32Array(e.length+1),r=new Int32Array(e.length);n[0]=-1;let i=0;for(let u=0;u<e.length;u++){const t=e[u].claim_order,o=(i>0&&e[n[i]].claim_order<=t?i+1:y(1,i,(t=>e[n[t]].claim_order),t))-1;r[u]=n[o]+1;const a=o+1;n[a]=u,i=Math.max(a,i)}const o=[],a=[];let s=e.length-1;for(let u=n[i]+1;0!=u;u=r[u-1]){for(o.push(e[u-1]);s>=u;s--)a.push(e[s]);s--}for(;s>=0;s--)a.push(e[s]);o.reverse(),a.sort(((t,e)=>t.claim_order-e.claim_order));for(let u=0,c=0;u<a.length;u++){for(;c<o.length&&a[u].claim_order>=o[c].claim_order;)c++;const e=c<o.length?o[c]:null;t.insertBefore(a[u],e)}}(t),(void 0===t.actual_end_child||null!==t.actual_end_child&&t.actual_end_child.parentElement!==t)&&(t.actual_end_child=t.firstChild);null!==t.actual_end_child&&void 0===t.actual_end_child.claim_order;)t.actual_end_child=t.actual_end_child.nextSibling;e!==t.actual_end_child?void 0===e.claim_order&&e.parentNode===t||t.insertBefore(e,t.actual_end_child):t.actual_end_child=e.nextSibling}else e.parentNode===t&&null===e.nextSibling||t.appendChild(e)}function b(t,e,n){g&&!n?m(t,e):e.parentNode===t&&e.nextSibling==n||t.insertBefore(e,n||null)}function _(t){t.parentNode.removeChild(t)}function w(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function I(t){return document.createElement(t)}function T(t){return document.createTextNode(t)}function E(){return T(" ")}function S(){return T("")}function k(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function C(t){return function(e){return e.preventDefault(),t.call(this,e)}}function N(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function A(t){return""===t?null:+t}function P(t){return Array.from(t.childNodes)}function R(t,e,n,r,i=!1){!function(t){void 0===t.claim_info&&(t.claim_info={last_index:0,total_claimed:0})}(t);const o=(()=>{for(let r=t.claim_info.last_index;r<t.length;r++){const o=t[r];if(e(o)){const e=n(o);return void 0===e?t.splice(r,1):t[r]=e,i||(t.claim_info.last_index=r),o}}for(let r=t.claim_info.last_index-1;r>=0;r--){const o=t[r];if(e(o)){const e=n(o);return void 0===e?t.splice(r,1):t[r]=e,i?void 0===e&&t.claim_info.last_index--:t.claim_info.last_index=r,o}}return r()})();return o.claim_order=t.claim_info.total_claimed,t.claim_info.total_claimed+=1,o}function D(t,e,n,r){return R(t,(t=>t.nodeName===e),(t=>{const e=[];for(let r=0;r<t.attributes.length;r++){const i=t.attributes[r];n[i.name]||e.push(i.name)}e.forEach((e=>t.removeAttribute(e)))}),(()=>r?function(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}(e):I(e)))}function x(t,e){return R(t,(t=>3===t.nodeType),(t=>{const n=""+e;if(t.data.startsWith(n)){if(t.data.length!==n.length)return t.splitText(n.length)}else t.data=n}),(()=>T(e)),!0)}function O(t){return x(t," ")}function L(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function M(t,e){t.value=null==e?"":e}function F(t,e,n,r){t.style.setProperty(e,n,r?"important":"")}function U(t,e){for(let n=0;n<t.options.length;n+=1){const r=t.options[n];if(r.__value===e)return void(r.selected=!0)}}function j(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function q(t){v=t}function V(){if(!v)throw new Error("Function called outside component initialization");return v}function B(t){V().$$.on_mount.push(t)}function K(t){V().$$.after_update.push(t)}function W(t,e){V().$$.context.set(t,e)}const H=[],z=[],G=[],Q=[],$=Promise.resolve();let Y=!1;function X(t){G.push(t)}let J=!1;const Z=new Set;function tt(){if(!J){J=!0;do{for(let t=0;t<H.length;t+=1){const e=H[t];q(e),et(e.$$)}for(q(null),H.length=0;z.length;)z.pop()();for(let t=0;t<G.length;t+=1){const e=G[t];Z.has(e)||(Z.add(e),e())}G.length=0}while(H.length);for(;Q.length;)Q.pop()();Y=!1,J=!1,Z.clear()}}function et(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(X)}}const nt=new Set;let rt;function it(){rt={r:0,c:[],p:rt}}function ot(){rt.r||i(rt.c),rt=rt.p}function at(t,e){t&&t.i&&(nt.delete(t),t.i(e))}function st(t,e,n,r){if(t&&t.o){if(nt.has(t))return;nt.add(t),rt.c.push((()=>{nt.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}function ut(t,e){const n={},r={},i={$$scope:1};let o=t.length;for(;o--;){const a=t[o],s=e[o];if(s){for(const t in a)t in s||(r[t]=1);for(const t in s)i[t]||(n[t]=s[t],i[t]=1);t[o]=s}else for(const t in a)i[t]=1}for(const a in r)a in n||(n[a]=void 0);return n}function ct(t){return"object"==typeof t&&null!==t?t:{}}function ht(t){t&&t.c()}function lt(t,e){t&&t.l(e)}function ft(t,e,r,a){const{fragment:s,on_mount:u,on_destroy:c,after_update:h}=t.$$;s&&s.m(e,r),a||X((()=>{const e=u.map(n).filter(o);c?c.push(...e):i(e),t.$$.on_mount=[]})),h.forEach(X)}function pt(t,e){const n=t.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function dt(t,e){-1===t.$$.dirty[0]&&(H.push(t),Y||(Y=!0,$.then(tt)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function vt(e,n,o,a,s,u,c,h=[-1]){const l=v;q(e);const f=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:s,bound:r(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:n.context||[]),callbacks:r(),dirty:h,skip_bound:!1,root:n.target||l.$$.root};c&&c(f.root);let p=!1;if(f.ctx=o?o(e,n.props||{},((t,n,...r)=>{const i=r.length?r[0]:n;return f.ctx&&s(f.ctx[t],f.ctx[t]=i)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](i),p&&dt(e,t)),n})):[],f.update(),p=!0,i(f.before_update),f.fragment=!!a&&a(f.ctx),n.target){if(n.hydrate){g=!0;const t=P(n.target);f.fragment&&f.fragment.l(t),t.forEach(_)}else f.fragment&&f.fragment.c();n.intro&&at(e.$$.fragment),ft(e,n.target,n.anchor,n.customElement),g=!1,tt()}q(l)}class gt{$destroy(){pt(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const yt=[];function mt(e,n=t){let r;const i=new Set;function o(t){if(a(e,t)&&(e=t,r)){const t=!yt.length;for(const n of i)n[1](),yt.push(n,e);if(t){for(let t=0;t<yt.length;t+=2)yt[t][0](yt[t+1]);yt.length=0}}}return{set:o,update:function(t){o(t(e))},subscribe:function(a,s=t){const u=[a,s];return i.add(u),1===i.size&&(r=n(o)||t),a(e),()=>{i.delete(u),0===i.size&&(r(),r=null)}}}}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var bt=function(t,e){return(bt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function _t(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}bt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var wt=function(){return(wt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function It(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(aT){o(aT)}}function s(t){try{u(r.throw(t))}catch(aT){o(aT)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function Tt(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(aT){o=[6,aT],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function Et(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function St(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function kt(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ct=!1,Nt="${JSCORE_VERSION}",At=function(t,e){if(!t)throw Pt(e)},Pt=function(t){return new Error("Firebase Database ("+Nt+") INTERNAL ASSERT FAILED: "+t)},Rt=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},Dt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,l=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,p=63&c;u||(p=64,a||(f=64)),r.push(n[h],n[l],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Rt(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!==s){var h=a<<4&240|s>>2;if(r.push(h),64!==u){var l=s<<6&192|u;r.push(l)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},xt=function(t){try{return Dt.decodeString(t,!0)}catch(aT){console.error("base64Decode failed: ",aT)}return null};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ot(t){return Lt(void 0,t)}function Lt(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=Lt(t[n],e[n]));return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Mt=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var o=wt({iss:"https://securetoken.google.com/"+n,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Dt.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),Dt.encodeString(JSON.stringify(o),!1),""].join(".")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function jt(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ut())}function qt(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(aT){return!1}}function Vt(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function Bt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Kt(){return!0===Ct}function Wt(){return"indexedDB"in self&&null!=indexedDB}function Ht(){return new Promise((function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(o){e(o)}}))}function zt(){return!(!navigator||!navigator.cookieEnabled)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Gt=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,Qt.prototype.create),o}return _t(e,t),e}(Error),Qt=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?$t(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new Gt(i,s,r);return u},t}();function $t(t,e){return t.replace(Yt,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var Yt=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(t){return JSON.parse(t)}function Jt(t){return JSON.stringify(t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zt=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=Xt(xt(o[0])||""),n=Xt(xt(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(aT){}return{header:e,claims:n,data:r,signature:i}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function te(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ee(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function ne(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function re(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ie=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=h^u&(c^h),a=1518500249):(o=u^c^h,a=1859775393):r<60?(o=u&c|h&(u|c),a=2400959708):(o=u^c^h,a=3395469782);i=(s<<5|s>>>27)+o+l+a+n[r]&4294967295;l=h,h=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function oe(t,e){var n=new ae(t,e);return n.subscribe.bind(n)}var ae=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=se),void 0===r.error&&(r.error=se),void 0===r.complete&&(r.complete=se);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(aT){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(aT){"undefined"!=typeof console&&console.error&&console.error(aT)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function se(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ue=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function ce(t,e){return t+" failed: "+e+" argument "}function he(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(ce(t,e)+"must be a valid function.")}function le(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(ce(t,e)+"must be a valid context object.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fe=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};function pe(t,e,n){void 0===e&&(e=1e3),void 0===n&&(n=2);var r=e*Math.pow(n,t),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function de(t){return t&&t._delegate?t._delegate:t}var ve=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),ge=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new Mt;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(aT){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(aT){if(r)return null;throw aT}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t))try{this.getOrInitializeService({instanceIdentifier:"[DEFAULT]"})}catch(aT){}try{for(var r=Et(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=St(i.value,2),a=o[0],s=o[1],u=this.normalizeInstanceIdentifier(a);try{var c=this.getOrInitializeService({instanceIdentifier:u});s.resolve(c)}catch(aT){}}}catch(h){e={error:h}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return It(this,void 0,void 0,(function(){var t;return Tt(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(kt(kt([],St(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),St(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t="[DEFAULT]"),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var r=t.options,i=void 0===r?{}:r,o=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var a=this.getOrInitializeService({instanceIdentifier:o,options:i});try{for(var s=Et(this.instancesDeferred.entries()),u=s.next();!u.done;u=s.next()){var c=St(u.value,2),h=c[0],l=c[1];o===this.normalizeInstanceIdentifier(h)&&l.resolve(a)}}catch(f){e={error:f}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return a},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&t(o,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,r,i=this.onInitCallbacks.get(e);if(i)try{for(var o=Et(i),a=o.next();!a.done;a=o.next()){var s=a.value;try{s(t,e)}catch(u){}}}catch(c){n={error:c}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,"[DEFAULT]"===e?void 0:e),options:i}),this.instances.set(n,o),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(a){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t="[DEFAULT]"),this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ye,me=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new ge(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function be(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _e,we,Ie=[];(we=_e||(_e={}))[we.DEBUG=0]="DEBUG",we[we.VERBOSE=1]="VERBOSE",we[we.INFO=2]="INFO",we[we.WARN=3]="WARN",we[we.ERROR=4]="ERROR",we[we.SILENT=5]="SILENT";var Te,Ee={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},Se=_e.INFO,ke=((ye={})[_e.DEBUG]="log",ye[_e.VERBOSE]="log",ye[_e.INFO]="info",ye[_e.WARN]="warn",ye[_e.ERROR]="error",ye),Ce=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=ke[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,be(["["+i+"]  "+t.name+":"],n))}},Ne=function(){function t(t){this.name=t,this._logLevel=Se,this._logHandler=Ce,this._userLogHandler=null,Ie.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in _e))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?Ee[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,be([this,_e.DEBUG],t)),this._logHandler.apply(this,be([this,_e.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,be([this,_e.VERBOSE],t)),this._logHandler.apply(this,be([this,_e.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,be([this,_e.INFO],t)),this._logHandler.apply(this,be([this,_e.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,be([this,_e.WARN],t)),this._logHandler.apply(this,be([this,_e.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,be([this,_e.ERROR],t)),this._logHandler.apply(this,be([this,_e.ERROR],t))},t}();function Ae(t){Ie.forEach((function(e){e.setLogLevel(t)}))}var Pe,Re=((Te={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",Te["bad-app-name"]="Illegal App name: '{$appName}",Te["duplicate-app"]="Firebase App named '{$appName}' already exists",Te["app-deleted"]="Firebase App named '{$appName}' already deleted",Te["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",Te["invalid-log-argument"]="First argument to `onLog` must be null or a function.",Te),De=new Qt("app","Firebase",Re),xe=((Pe={})["@firebase/app"]="fire-core",Pe["@firebase/analytics"]="fire-analytics",Pe["@firebase/app-check"]="fire-app-check",Pe["@firebase/auth"]="fire-auth",Pe["@firebase/database"]="fire-rtdb",Pe["@firebase/functions"]="fire-fn",Pe["@firebase/installations"]="fire-iid",Pe["@firebase/messaging"]="fire-fcm",Pe["@firebase/performance"]="fire-perf",Pe["@firebase/remote-config"]="fire-rc",Pe["@firebase/storage"]="fire-gcs",Pe["@firebase/firestore"]="fire-fst",Pe["fire-js"]="fire-js",Pe["firebase-wrapper"]="fire-js-all",Pe),Oe=new Ne("@firebase/app"),Le=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Ot(t),this.container=new me(e.name),this._addComponent(new ve("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){var n;void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(aT){Oe.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,aT)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw De.create("app-deleted",{appName:this.name_})},t}();Le.prototype.name&&Le.prototype.options||Le.prototype.delete||console.log("dc");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Me(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name="[DEFAULT]");var a=o.name;if("string"!=typeof a||!a)throw De.create("bad-app-name",{appName:String(a)});if(te(e,a))throw De.create("duplicate-app",{appName:a});var s=new t(n,o,r);return e[a]=s,s},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=xe[t])&&void 0!==r?r:t;n&&(i+="-"+n);var a=i.match(/\s|\//),s=e.match(/\s|\//);if(a||s){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return a&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),a&&s&&u.push("and"),s&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void Oe.warn(u.join(" "))}o(new ve(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:Ae,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw De.create("invalid-log-argument");!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=Ee[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:_e[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=Ie;r<i.length;r++)n(i[r])}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e)},apps:null,SDK_VERSION:"8.8.1",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(!te(e,t=t||"[DEFAULT]"))throw De.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return Oe.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var s=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw De.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Lt(s,o.serviceProps),r[a]=s,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,a);return n.apply(this,o.multipleInstances?t:[])}}for(var u=0,c=Object.keys(e);u<c.length;u++){var h=c[u];e[h]._addComponent(o)}return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe=function t(){var e=Me(Le);return e.INTERNAL=wt(wt({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Lt(e,t)},createSubscribe:oe,ErrorFactory:Qt,deepExtend:Lt}),e}(),Ue=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
if("object"==typeof self&&self.self===self&&void 0!==self.firebase){Oe.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var je=self.firebase.SDK_VERSION;je&&je.indexOf("LITE")>=0&&Oe.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var qe=Fe.initializeApp;Fe.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return qt()&&Oe.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),qe.apply(void 0,t)};var Ve,Be,Ke=Fe;(Ve=Ke).INTERNAL.registerComponent(new ve("platform-logger",(function(t){return new Ue(t)}),"PRIVATE")),Ve.registerVersion("@firebase/app","0.6.29",Be),Ve.registerVersion("fire-js",""),function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};var n=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function r(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function i(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:r(t)}}!function(t,r){if(r){var i=n;t=t.split(".");for(var o=0;o<t.length-1;o++){var a=t[o];a in i||(i[a]={}),i=i[a]}(r=r(o=i[t=t[t.length-1]]))!=o&&null!=r&&e(i,t,{configurable:!0,writable:!0,value:r})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(n){e.reject(n)}}function r(){this.a=null}function o(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;r.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var a=n.setTimeout;r.prototype.c=function(t){a(t,0)},r.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(r){this.f(r)}}}this.a=null},r.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(n){return void this.g(n)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)s.b(this.a[t]);this.a=null}};var s=new r;return e.prototype.s=function(t){var e=this.f();t.Ra(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(r){n.reject(r)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(n){o(n)}}:e}var i,o,a=new e((function(t,e){i=t,o=e}));return this.Ra(r(t,i),r(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Ra=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},e.resolve=o,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var r=i(t),a=r.next();!a.done;a=r.next())o(a.value).Ra(e,n)}))},e.all=function(t){var n=i(t),r=n.next();return r.done?o([]):new e((function(t,e){function i(e){return function(n){a[e]=n,0==--s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,o(r.value).Ra(i(a.length-1),e),r=n.next()}while(!r.done)}))},e}));var o=o||{},a=this||self,s=/^[\w+/_-]+[=]{0,2}$/,u=null;function c(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&s.test(t)?t:""}function h(){}function l(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function f(t){var e=l(t);return"array"==e||"object"==e&&"number"==typeof t.length}function p(t){return"function"==l(t)}function d(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var v="closure_uid_"+(1e9*Math.random()>>>0),g=0;function y(t,e,n){return t.call.apply(t.bind,arguments)}function m(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function b(t,e,n){return(b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y:m).apply(null,arguments)}function _(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function w(t,e){function n(){}n.prototype=e.prototype,t.bb=e.prototype,t.prototype=new n,t.prototype.constructor=t}function I(t){return t}function T(t,e,n){this.code=k+t,this.message=e||C[t]||"",this.a=n||null}function E(t){var e=t&&t.code;return e?new T(e.substring(k.length),t.message,t.serverResponse):null}w(T,Error),T.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},T.prototype.toJSON=function(){return this.w()};var S,k="auth/",C={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},N={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function A(t){for(var e in N)if(N[e].id===t)return{firebaseEndpoint:(t=N[e]).Ua,secureTokenEndpoint:t.$a,identityPlatformEndpoint:t.Xa};return null}function P(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(e){return!1}}function R(t){if(Error.captureStackTrace)Error.captureStackTrace(this,R);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function D(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");R.call(this,n+t[r])}function x(t,e){throw new D("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function O(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function L(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function M(){this.b=this.a=null}S=A("__EID__")?"__EID__":void 0,w(R,Error),R.prototype.name="CustomError",w(D,R),D.prototype.name="AssertionError",O.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var F=new O((function(){return new j}),(function(t){t.reset()}));function U(){var t=ye,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function j(){this.next=this.b=this.a=null}M.prototype.add=function(t,e){var n=F.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},j.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},j.prototype.reset=function(){this.next=this.b=this.a=null};var q=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},V=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var B=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,a=0;a<n;a++)if(a in o){var s=o[a];e.call(void 0,s,a,t)&&(r[i++]=s)}return r},K=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},W=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function H(t,e){return 0<=q(t,e)}function z(t,e){var n;return(n=0<=(e=q(t,e)))&&Array.prototype.splice.call(t,e,1),n}function G(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&1==Array.prototype.splice.call(t,r,1).length&&0}))}function Q(t){return Array.prototype.concat.apply([],arguments)}function $(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var Y,X=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},J=/&/g,Z=/</g,tt=/>/g,et=/"/g,nt=/'/g,rt=/\x00/g,it=/[\x00&<>"']/;function ot(t,e){return-1!=t.indexOf(e)}function at(t,e){return t<e?-1:t>e?1:0}t:{var st=a.navigator;if(st){var ut=st.userAgent;if(ut){Y=ut;break t}}Y=""}function ct(t){return ot(Y,t)}function ht(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function lt(t){for(var e in t)return!1;return!0}function ft(t){var e,n={};for(e in t)n[e]=t[e];return n}var pt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function dt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<pt.length;o++)n=pt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function vt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||a).Element&&r.Location){var i=r;break t}}catch(s){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(d(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(s){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;x("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function gt(t,e){this.a=t===_t&&e||"",this.b=bt}function yt(t){return t instanceof gt&&t.constructor===gt&&t.b===bt?t.a:(x("expected object of type Const, got '"+t+"'"),"type_error:Const")}gt.prototype.ta=!0,gt.prototype.sa=function(){return this.a},gt.prototype.toString=function(){return"Const{"+this.a+"}"};var mt,bt={},_t={};function wt(){if(void 0===mt){var t=null,e=a.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:I,createScript:I,createScriptURL:I})}catch(n){a.console&&a.console.error(n.message)}mt=t}else mt=t}return mt}function It(t,e){this.a=e===Ct?t:""}function Tt(t){return t instanceof It&&t.constructor===It?t.a:(x("expected object of type TrustedResourceUrl, got '"+t+"' of type "+l(t)),"type_error:TrustedResourceUrl")}function Et(t,e){var n=yt(t);if(!kt.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=wt();return new It(t=e?e.createScriptURL(t):t,Ct)}(t=n.replace(St,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof gt?yt(t):encodeURIComponent(String(t))})))}It.prototype.ta=!0,It.prototype.sa=function(){return this.a.toString()},It.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var St=/%{(\w+)}/g,kt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Ct={};function Nt(t,e){this.a=e===Lt?t:""}function At(t){return t instanceof Nt&&t.constructor===Nt?t.a:(x("expected object of type SafeUrl, got '"+t+"' of type "+l(t)),"type_error:SafeUrl")}Nt.prototype.ta=!0,Nt.prototype.sa=function(){return this.a.toString()},Nt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Pt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Rt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Dt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function xt(t){if(t instanceof Nt)return t;if(t="object"==typeof t&&t.ta?t.sa():String(t),Dt.test(t))t=new Nt(t,Lt);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Rt);t=e&&Pt.test(e[1])?new Nt(t,Lt):null}return t}function Ot(t){return t instanceof Nt?t:(t="object"==typeof t&&t.ta?t.sa():String(t),Dt.test(t)||(t="about:invalid#zClosurez"),new Nt(t,Lt))}var Lt={},Mt=new Nt("about:invalid#zClosurez",Lt);function Ft(t,e,n){this.a=n===Ut?t:""}Ft.prototype.ta=!0,Ft.prototype.sa=function(){return this.a.toString()},Ft.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Ut={};function jt(t,e,n,r){return t=t instanceof Nt?t:Ot(t),e=e||a,n=n instanceof gt?yt(n):n||"",e.open(At(t),n,r,void 0)}function qt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Vt(t){return it.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(J,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(Z,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(tt,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(et,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(nt,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(rt,"&#0;"))),t}function Bt(t){return Bt[" "](t),t}Bt[" "]=h;var Kt,Wt,Ht=ct("Opera"),zt=ct("Trident")||ct("MSIE"),Gt=ct("Edge"),Qt=Gt||zt,$t=ct("Gecko")&&!(ot(Y.toLowerCase(),"webkit")&&!ct("Edge"))&&!(ct("Trident")||ct("MSIE"))&&!ct("Edge"),Yt=ot(Y.toLowerCase(),"webkit")&&!ct("Edge");function Xt(){var t=a.document;return t?t.documentMode:void 0}t:{var Jt="",Zt=(Wt=Y,$t?/rv:([^\);]+)(\)|;)/.exec(Wt):Gt?/Edge\/([\d\.]+)/.exec(Wt):zt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Wt):Yt?/WebKit\/(\S+)/.exec(Wt):Ht?/(?:Version)[ \/]?(\S+)/.exec(Wt):void 0);if(Zt&&(Jt=Zt?Zt[1]:""),zt){var te=Xt();if(null!=te&&te>parseFloat(Jt)){Kt=String(te);break t}}Kt=Jt}var ee,ne={};function re(t){return function(t,e){var n=ne;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=X(String(Kt)).split("."),r=X(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=at(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||at(0==a[2].length,0==s[2].length)||at(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}if(a.document&&zt){var ie=Xt();ee=ie||(parseInt(Kt,10)||void 0)}else ee=void 0;var oe=ee;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Wt){}var ae=!zt||9<=Number(oe);function se(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ue(t,e){ht(e,(function(e,n){e&&"object"==typeof e&&e.ta&&(e=e.sa()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:le.hasOwnProperty(n)?t.setAttribute(le[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var ce,he,le={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function fe(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!f(o)||d(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(d(o)){var a="function"==typeof o.item||"string"==typeof o.item;break t}if(p(o)){a="function"==typeof o.item;break t}}a=!1}V(a?$(o):o,r)}}}function pe(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function de(t){a.setTimeout((function(){throw t}),0)}function ve(t,e){he||function(){if(a.Promise&&a.Promise.resolve){var t=a.Promise.resolve(void 0);he=function(){t.then(me)}}else he=function(){var t=me;!p(a.setImmediate)||a.Window&&a.Window.prototype&&!ct("Edge")&&a.Window.prototype.setImmediate==a.setImmediate?(ce||(ce=function(){var t=a.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!ct("Presto")&&(t=function(){var t=pe(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=b((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!ct("Trident")&&!ct("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Hb;n.Hb=null,t()}},function(t){r.next={Hb:t},r=r.next,e.port2.postMessage(0)}}return function(t){a.setTimeout(t,0)}}()),ce(t)):a.setImmediate(t)}}(),ge||(he(),ge=!0),ye.add(t,e)}var ge=!1,ye=new M;function me(){for(var t;t=U();){try{t.a.call(t.b)}catch(e){de(e)}L(F,t)}ge=!1}function be(t,e){if(this.a=_e,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=h)try{var n=this;t.call(e,(function(t){xe(n,we,t)}),(function(t){if(!(t instanceof qe))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(aT){}xe(n,Ie,t)}))}catch(r){xe(this,Ie,r)}}var _e=0,we=2,Ie=3;function Te(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Te.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ee=new O((function(){return new Te}),(function(t){t.reset()}));function Se(t,e,n){var r=Ee.get();return r.g=t,r.b=e,r.f=n,r}function ke(t){if(t instanceof be)return t;var e=new be(h);return xe(e,we,t),e}function Ce(t){return new be((function(e,n){n(t)}))}function Ne(t,e,n){Oe(t,e,n,null)||ve(_(e,t))}function Ae(t){return new be((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Qb:!0,value:o}:{Qb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Ne(t[o],_(i,o,!0),_(i,o,!1));else e(r)}))}function Pe(t,e){if(t.a==_e)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,a=n.b;a&&(a.c||(r++,a.a==t&&(i=a),!(i&&1<r)));a=a.next)i||(o=a);i&&(n.a==_e&&1==r?Pe(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Me(n),Fe(n,i,Ie,e)))}t.c=null}else xe(t,Ie,e)}function Re(t,e){t.b||t.a!=we&&t.a!=Ie||Le(t),t.f?t.f.next=e:t.b=e,t.f=e}function De(t,e,n,r){var i=Se(null,null,null);return i.a=new be((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(a){o(a)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof qe?o(e):t(i)}catch(a){o(a)}}:o})),i.a.c=t,Re(t,i),i.a}function xe(t,e,n){t.a==_e&&(t===n&&(e=Ie,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Oe(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,Le(t),e!=Ie||n instanceof qe||function(t,e){t.g=!0,ve((function(){t.g&&je.call(null,e)}))}(t,n)))}function Oe(t,e,n,r){if(t instanceof be)return Re(t,Se(e||h,n||null,r)),!0;if(P(t))return t.then(e,n,r),!0;if(d(t))try{var i=t.then;if(p(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}function a(t){s||(s=!0,n.call(i,t))}var s=!1;try{e.call(t,a,o)}catch(u){o(u)}}(t,i,e,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function Le(t){t.h||(t.h=!0,ve(t.gc,t))}function Me(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Fe(t,e,n,r){if(n==Ie&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Ue(e,n,r);else try{e.c?e.g.call(e.f):Ue(e,n,r)}catch(aT){je.call(null,aT)}L(Ee,e)}function Ue(t,e,n){e==we?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}be.prototype.then=function(t,e,n){return De(this,p(t)?t:null,p(e)?e:null,n)},be.prototype.$goog_Thenable=!0,(t=be.prototype).oa=function(t,e){return(t=Se(t,t,e)).c=!0,Re(this,t),this},t.o=function(t,e){return De(this,null,t,e)},t.cancel=function(t){if(this.a==_e){var e=new qe(t);ve((function(){Pe(this,e)}),this)}},t.$c=function(t){this.a=_e,xe(this,we,t)},t.ad=function(t){this.a=_e,xe(this,Ie,t)},t.gc=function(){for(var t;t=Me(this);)Fe(this,t,this.a,this.i);this.h=!1};var je=de;function qe(t){R.call(this,t)}function Ve(){this.ya=this.ya,this.pa=this.pa}w(qe,R),qe.prototype.name="cancel";var Be={};function We(t){if(!t.ya&&(t.ya=!0,t.Da(),0)){var e=function(t){return Object.prototype.hasOwnProperty.call(t,v)&&t[v]||(t[v]=++g)}(t);delete Be[e]}}Ve.prototype.ya=!1,Ve.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var He=Object.freeze||function(t){return t},ze=!zt||9<=Number(oe),Ge=zt&&!re("9"),Qe=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{a.addEventListener("test",h,e),a.removeEventListener("test",h,e)}catch(n){}return t}();function $e(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Ye(t,e){if($e.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if($t){t:{try{Bt(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Xe[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}$e.prototype.preventDefault=function(){this.defaultPrevented=!0},w(Ye,$e);var Xe=He({2:"touch",3:"pen",4:"mouse"});Ye.prototype.preventDefault=function(){Ye.bb.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ge)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}},Ye.prototype.g=function(){return this.a};var Je="closure_listenable_"+(1e6*Math.random()|0),Ze=0;function tn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Wa=i,this.key=++Ze,this.wa=this.Qa=!1}function en(t){t.wa=!0,t.listener=null,t.proxy=null,t.src=null,t.Wa=null}function nn(t){this.src=t,this.a={},this.b=0}function rn(t,e){var n=e.type;n in t.a&&z(t.a[n],e)&&(en(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function on(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.wa&&o.listener==e&&o.capture==!!n&&o.Wa==r)return i}return-1}nn.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=on(t,e,r,i);return-1<a?(e=t[a],n||(e.Qa=!1)):((e=new tn(e,this.src,o,!!r,i)).Qa=n,t.push(e)),e};var an="closure_lm_"+(1e6*Math.random()|0),sn={};function un(t,e,n,r,i){if(r&&r.once)hn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)un(t,e[o],n,r,i);else n=bn(n),t&&t[Je]?wn(t,e,n,d(r)?!!r.capture:!!r,i):cn(t,e,n,!1,r,i)}function cn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=d(i)?!!i.capture:!!i,s=yn(t);if(s||(t[an]=s=new nn(t)),!(n=s.add(e,n,r,a,o)).proxy)if(r=function(){var t=gn,e=ze?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Qe||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(pn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function hn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)hn(t,e[o],n,r,i);else n=bn(n),t&&t[Je]?In(t,e,n,d(r)?!!r.capture:!!r,i):cn(t,e,n,!0,r,i)}function ln(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)ln(t,e[o],n,r,i);else r=d(r)?!!r.capture:!!r,n=bn(n),t&&t[Je]?(t=t.v,(e=String(e).toString())in t.a&&(-1<(n=on(o=t.a[e],n,r,i))&&(en(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=yn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=on(e,n,r,i)),(n=-1<t?e[t]:null)&&fn(n))}function fn(t){if("number"!=typeof t&&t&&!t.wa){var e=t.src;if(e&&e[Je])rn(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(pn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=yn(e))?(rn(n,t),0==n.b&&(n.src=null,e[an]=null)):en(t)}}}function pn(t){return t in sn?sn[t]:sn[t]="on"+t}function dn(t,e,n,r){var i=!0;if((t=yn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.wa&&(o=vn(o,r),i=i&&!1!==o)}return i}function vn(t,e){var n=t.listener,r=t.Wa||t.src;return t.Qa&&fn(t),n.call(r,e)}function gn(t,e){if(t.wa)return!0;if(!ze){if(!e)t:{e=["window","event"];for(var n=a,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Ye(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(s){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=dn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=dn(r[i],t,!1,e),n=n&&o}return n}return vn(t,new Ye(e,this))}function yn(t){return(t=t[an])instanceof nn?t:null}var mn="__closure_events_fn_"+(1e9*Math.random()>>>0);function bn(t){return p(t)?t:(t[mn]||(t[mn]=function(e){return t.handleEvent(e)}),t[mn])}function _n(){Ve.call(this),this.v=new nn(this),this.bc=this,this.hb=null}function wn(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function In(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function Tn(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.wa&&a.capture==n){var s=a.listener,u=a.Wa||a.src;a.Qa&&rn(t.v,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}function En(t,e,n){if(p(t))n&&(t=b(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=b(t.handleEvent,t)}return 2147483647<Number(e)?-1:a.setTimeout(t,e||0)}function Sn(t){var e=null;return new be((function(n,r){-1==(e=En((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).o((function(t){throw a.clearTimeout(e),t}))}function kn(t){if(t.X&&"function"==typeof t.X)return t.X();if("string"==typeof t)return t.split("");if(f(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Cn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.X||"function"!=typeof t.X){if(f(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function Nn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Nn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function An(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Pn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Pn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Pn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}w(_n,Ve),_n.prototype[Je]=!0,_n.prototype.addEventListener=function(t,e,n,r){un(this,t,e,n,r)},_n.prototype.removeEventListener=function(t,e,n,r){ln(this,t,e,n,r)},_n.prototype.dispatchEvent=function(t){var e,n=this.hb;if(n)for(e=[];n;n=n.hb)e.push(n);n=this.bc;var r=t.type||t;if("string"==typeof t)t=new $e(t,n);else if(t instanceof $e)t.target=t.target||n;else{var i=t;dt(t=new $e(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.b=e[o];i=Tn(a,r,!0,t)&&i}if(i=Tn(a=t.b=n,r,!0,t)&&i,i=Tn(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=Tn(a=t.b=e[o],r,!1,t)&&i;return i},_n.prototype.Da=function(){if(_n.bb.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)en(n[r]);delete e.a[t],e.b--}}this.hb=null},(t=Nn.prototype).X=function(){An(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return An(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Pn(this.b,t)?this.b[t]:e},t.set=function(t,e){Pn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Rn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Dn(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Dn?(this.i=void 0!==e?e:t.i,xn(this,t.c),this.l=t.l,this.a=t.a,On(this,t.g),this.f=t.f,Ln(this,tr(t.b)),this.h=t.h):t&&(n=String(t).match(Rn))?(this.i=!!e,xn(this,n[1]||"",!0),this.l=qn(n[2]||""),this.a=qn(n[3]||"",!0),On(this,n[4]),this.f=qn(n[5]||"",!0),Ln(this,n[6]||"",!0),this.h=qn(n[7]||"")):(this.i=!!e,this.b=new Qn(null,this.i))}function xn(t,e,n){t.c=n?qn(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function On(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Ln(t,e,n){e instanceof Qn?(t.b=e,function(t,e){e&&!t.f&&($n(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Xn(this,e),Zn(this,n,t))}),t)),t.f=e}(t.b,t.i)):(n||(e=Vn(e,zn)),t.b=new Qn(e,t.i))}function Mn(t,e,n){t.b.set(e,n)}function Fn(t,e){return t.b.get(e)}function Un(t){return t instanceof Dn?new Dn(t):new Dn(t,void 0)}function jn(t,e,n,r){var i=new Dn(null,void 0);return t&&xn(i,t),e&&(i.a=e),n&&On(i,n),r&&(i.f=r),i}function qn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Vn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Bn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Bn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Dn.prototype.toString=function(){var t=[],e=this.c;e&&t.push(Vn(e,Kn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(Vn(e,Kn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(Vn(n,"/"==n.charAt(0)?Hn:Wn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Vn(n,Gn)),t.join("")},Dn.prototype.resolve=function(t){var e=new Dn(this),n=!!t.c;n?xn(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)On(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ot(i,"./")||ot(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?Ln(e,tr(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Kn=/[#\/\?@]/g,Wn=/[#\?:]/g,Hn=/[#\?]/g,zn=/[#\?@]/g,Gn=/#/g;function Qn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function $n(t){t.a||(t.a=new Nn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Yn(t){var e=Cn(t);if(void 0===e)throw Error("Keys are undefined");var n=new Qn(null,void 0);t=kn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Zn(n,i,o):n.add(i,o)}return n}function Xn(t,e){$n(t),e=er(t,e),Pn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Pn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&An(t)))}function Jn(t,e){return $n(t),e=er(t,e),Pn(t.a.b,e)}function Zn(t,e,n){Xn(t,e),0<n.length&&(t.c=null,t.a.set(er(t,e),$(n)),t.b+=n.length)}function tr(t){var e=new Qn;return e.c=t.c,t.a&&(e.a=new Nn(t.a),e.b=t.b),e}function er(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function nr(t){var e=[];return ir(new rr,t,e),e.join("")}function rr(){}function ir(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),ir(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&("function"!=typeof(o=e[r])&&(n.push(i),sr(r,n),n.push(":"),ir(t,o,n),i=","));return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":sr(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(t=Qn.prototype).add=function(t,e){$n(this),this.c=null,t=er(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){$n(this),this.a.forEach((function(n,r){V(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.Y=function(){$n(this);for(var t=this.a.X(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.X=function(t){$n(this);var e=[];if("string"==typeof t)Jn(this,t)&&(e=Q(e,this.a.get(er(this,t))));else{t=this.a.X();for(var n=0;n<t.length;n++)e=Q(e,t[n])}return e},t.set=function(t,e){return $n(this),this.c=null,Jn(this,t=er(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.X(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.X(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var or={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},ar=/\uffff/.test("")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function sr(t,e){e.push('"',t.replace(ar,(function(t){var e=or[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),or[t]=e),e})),'"')}function ur(){var t=Nr();return zt&&!!oe&&11==oe||/Edge\/\d+/.test(t)}function cr(){return a.window&&a.window.location.href||self&&self.location&&self.location.href||""}function hr(t,e){e=e||a.window;var n="about:blank";t&&(n=At(xt(t)||Mt)),e.location.href=n}function lr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<lr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function fr(t){return!!((t=(t||Nr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function pr(t){t=t||a.window;try{t.close()}catch(e){}}function dr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Nr().toLowerCase(),r&&(e.target=r,ot(n,"crios/")&&(e.target="_blank")),Sr(Nr())==Tr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Nt?n:xt(void 0!==n.href?n.href:String(n))||Mt,n=t.target||n.target,i=[],t)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(t[a]?1:0))}var a=i.join(",");if((ct("iPhone")&&!ct("iPod")&&!ct("iPad")||ct("iPad")||ct("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(vt(a=pe(document,"A"),"HTMLAnchorElement"),e=e instanceof Nt?e:Ot(e),a.href=At(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=jt("",r,n,a),t=At(e),a&&(Qt&&ot(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Vt(t)+'">',t=new Ft(t=(r=wt())?r.createHTML(t):t,null,Ut),r=a.document)&&(r.write(function(t){return t instanceof Ft&&t.constructor===Ft?t.a:(x("expected object of type SafeHtml, got '"+t+"' of type "+l(t)),"type_error:SafeHtml")}(t)),r.close())):(a=jt(e,r,n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(s){}return a}var vr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gr=/^[^@]+@[^@]+$/;function yr(){var t=null;return new be((function(e){"complete"==a.document.readyState?e():(t=function(){e()},hn(window,"load",t))})).o((function(e){throw ln(window,"load",t),e}))}function mr(t){return t=t||Nr(),!("file:"!==xr()&&"ionic:"!==xr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function br(){var t=a.window;try{return!(!t||t==t.top)}catch(e){return!1}}function _r(){return void 0!==a.WorkerGlobalScope&&"function"==typeof a.importScripts}function wr(){return Ke.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Ke.INTERNAL.hasOwnProperty("node")?"Node":_r()?"Worker":"Browser"}function Ir(){var t=wr();return"ReactNative"===t||"Node"===t}var Tr="Firefox",Er="Chrome";function Sr(t){var e=t.toLowerCase();return ot(e,"opera/")||ot(e,"opr/")||ot(e,"opios/")?"Opera":ot(e,"iemobile")?"IEMobile":ot(e,"msie")||ot(e,"trident/")?"IE":ot(e,"edge/")?"Edge":ot(e,"firefox/")?Tr:ot(e,"silk/")?"Silk":ot(e,"blackberry")?"Blackberry":ot(e,"webos")?"Webos":!ot(e,"safari/")||ot(e,"chrome/")||ot(e,"crios/")||ot(e,"android")?!ot(e,"chrome/")&&!ot(e,"crios/")||ot(e,"edge/")?ot(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Er:"Safari"}var kr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Cr(t,e){e=e||[];var n,r=[],i={};for(n in kr)i[kr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=wr())?r=Sr(i=Nr()):"Worker"===r&&(r=Sr(i=Nr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function Nr(){return a.navigator&&a.navigator.userAgent||""}function Ar(t,e){t=t.split("."),e=e||a;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Pr(){try{var t=a.localStorage,e=Ur();if(t)return t.setItem(e,"1"),t.removeItem(e),!ur()||!!a.indexedDB}catch(n){return _r()&&!!a.indexedDB}return!1}function Rr(){return(Dr()||"chrome-extension:"===xr()||mr())&&!Ir()&&Pr()&&!_r()}function Dr(){return"http:"===xr()||"https:"===xr()}function xr(){return a.location&&a.location.protocol||null}function Or(t){return!fr(t=t||Nr())&&Sr(t)!=Tr}function Lr(t){return void 0===t?null:nr(t)}function Mr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Fr(t){if(null!==t)return JSON.parse(t)}function Ur(t){return t||Math.floor(1e9*Math.random()).toString()}function jr(t){return"Safari"!=Sr(t=t||Nr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function qr(){var t=a.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Vr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=Nr(),e=wr(),this.b=fr(t)||"ReactNative"===e}function Br(){var t=a.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Kr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(n){}return null}function Wr(){return!(!Ar("fireauth.oauthhelper",a)&&!Ar("fireauth.iframe",a))}Vr.prototype.get=function(){var t=a.navigator;return!t||"boolean"!=typeof t.onLine||!Dr()&&"chrome-extension:"!==xr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Hr,zr={};function Gr(t){zr[t]||(zr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Qr={};Object.defineProperty(Qr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Qr,"abcd",{configurable:!0,enumerable:!0,value:2}),Hr=2==Qr.abcd}catch(Wt){Hr=!1}function $r(t,e,n){Hr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Yr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&$r(t,n,e[n])}function Xr(t){var e={};return Yr(e,t),e}function Jr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)$r(e,n,Jr(t[n]));return e}function Zr(t){var e=t&&(t[ii]?"phone":null);if(!(e&&t&&t[ri]))throw new T("internal-error","Internal assert: invalid MultiFactorInfo object");$r(this,"uid",t[ri]),$r(this,"displayName",t[ei]||null);var n=null;t[ni]&&(n=new Date(t[ni]).toUTCString()),$r(this,"enrollmentTime",n),$r(this,"factorId",e)}function ti(t){try{var e=new oi(t)}catch(n){e=null}return e}Zr.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ei="displayName",ni="enrolledAt",ri="mfaEnrollmentId",ii="phoneInfo";function oi(t){Zr.call(this,t),$r(this,"phoneNumber",t[ii])}function ai(t){var e={},n=t[hi],r=t[fi],i=t[pi];if(t=ti(t[li]),!i||i!=ui&&i!=ci&&!n||i==ci&&!r||i==si&&!t)throw Error("Invalid checkActionCode response!");i==ci?(e[vi]=n||null,e[yi]=n||null,e[di]=r):(e[vi]=r||null,e[yi]=r||null,e[di]=n||null),e[gi]=t||null,$r(this,bi,i),$r(this,mi,Jr(e))}w(oi,Zr),oi.prototype.w=function(){var t=oi.bb.w.call(this);return t.phoneNumber=this.phoneNumber,t};var si="REVERT_SECOND_FACTOR_ADDITION",ui="EMAIL_SIGNIN",ci="VERIFY_AND_CHANGE_EMAIL",hi="email",li="mfaInfo",fi="newEmail",pi="requestType",di="email",vi="fromEmail",gi="multiFactorInfo",yi="previousEmail",mi="data",bi="operation";function _i(t){var e=Fn(t=Un(t),wi)||null,n=Fn(t,Ii)||null,r=Fn(t,Si)||null;if(r=r&&Ci[r]||null,!e||!n||!r)throw new T("argument-error",wi+", "+Ii+"and "+Si+" are required in a valid action code URL.");Yr(this,{apiKey:e,operation:r,code:n,continueUrl:Fn(t,Ti)||null,languageCode:Fn(t,Ei)||null,tenantId:Fn(t,ki)||null})}var wi="apiKey",Ii="oobCode",Ti="continueUrl",Ei="languageCode",Si="mode",ki="tenantId",Ci={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:si,signIn:ui,verifyAndChangeEmail:ci,verifyEmail:"VERIFY_EMAIL"};function Ni(t){try{return new _i(t)}catch(e){return null}}function Ai(t){var e=t[Oi];if(void 0===e)throw new T("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new T("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Pi];if(n&&"object"==typeof n){e=n[Fi];var r=n[Li];if(n=n[Mi],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new T("argument-error",Li+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new T("argument-error",Mi+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new T("argument-error",Fi+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new T("missing-android-pkg-name")}}else if(void 0!==n)throw new T("argument-error",Pi+" property must be a non null object when specified.");if(this.f=null,(e=t[xi])&&"object"==typeof e){if("string"==typeof(e=e[Ui])&&e.length)this.f=e;else if(void 0!==e)throw new T("argument-error",Ui+" property must be a non empty string when specified.")}else if(void 0!==e)throw new T("argument-error",xi+" property must be a non null object when specified.");if(void 0!==(e=t[Di])&&"boolean"!=typeof e)throw new T("argument-error",Di+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Ri])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new T("argument-error",Ri+" property must be a non empty string when specified.");this.i=t||null}var Pi="android",Ri="dynamicLinkDomain",Di="handleCodeInApp",xi="iOS",Oi="url",Li="installApp",Mi="minimumVersion",Fi="packageName",Ui="bundleId";function ji(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var qi=null;function Vi(t){var e=[];return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=qi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!qi){qi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===qi[o]&&(qi[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,(function(t){e.push(t)})),e}function Bi(t){var e=Wi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function Ki(t){try{return new Bi(t)}catch(e){return null}}function Wi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=Vi(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var a=r[e++],s=((7&i)<<18|(63&o)<<12|(63&a)<<6|63&r[e++])-65536;t[n++]=String.fromCharCode(55296+(s>>10)),t[n++]=String.fromCharCode(56320+(1023&s))}else o=r[e++],a=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}return JSON.parse(t.join(""))}catch(u){}return null}Bi.prototype.T=function(){return this.f},Bi.prototype.l=function(){return this.c},Bi.prototype.toString=function(){return this.h};var Hi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),zi=["client_id","response_type","scope","redirect_uri","state"],Gi={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:zi},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:zi},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:zi},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:Hi},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function Qi(t){for(var e in Gi)if(Gi[e].fa==t)return Gi[e];return null}function $i(t){var e={};e["facebook.com"]=to,e["google.com"]=no,e["github.com"]=eo,e["twitter.com"]=ro;var n=t&&t[Xi];try{if(n)return e[n]?new e[n](t):new Zi(t);if(void 0!==t[Yi])return new Ji(t)}catch(r){}return null}var Yi="idToken",Xi="providerId";function Ji(t){var e=t[Xi];if(!e&&t[Yi]){var n=Ki(t[Yi]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),$r(this,"providerId",e),$r(this,"isNewUser",n)}function Zi(t){Ji.call(this,t),$r(this,"profile",Jr((t=Fr(t.rawUserInfo||"{}"))||{}))}function to(t){if(Zi.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function eo(t){if(Zi.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");$r(this,"username",this.profile&&this.profile.login||null)}function no(t){if(Zi.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function ro(t){if(Zi.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");$r(this,"username",t.screenName||null)}function io(t){var e=Un(t),n=Fn(e,"link"),r=Fn(Un(n),"link");return e=Fn(e,"deep_link_id"),Fn(Un(e),"link")||e||r||n||t}function oo(t,e){if(!t&&!e)throw new T("internal-error","Internal assert: no raw session string available");if(t&&e)throw new T("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?ao:so}w(Zi,Ji),w(to,Zi),w(eo,Zi),w(no,Zi),w(ro,Zi);var ao="enroll",so="signin";function uo(){}function co(t,e){return t.then((function(t){if(t[Ja]){var n=Ki(t[Ja]);if(!n||e!=n.i)throw new T("user-mismatch");return t}throw new T("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==k+"user-not-found"?new T("user-mismatch"):t}))}function ho(t,e){if(!e)throw new T("internal-error","failed to construct a credential");this.a=e,$r(this,"providerId",t),$r(this,"signInMethod",t)}function lo(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function fo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new ho(t.providerId,t.pendingToken)}catch(e){}return null}function po(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&$r(this,"idToken",e.idToken),e.accessToken&&$r(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&$r(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new T("internal-error","failed to construct a credential");$r(this,"accessToken",e.oauthToken),$r(this,"secret",e.oauthTokenSecret)}$r(this,"providerId",t),$r(this,"signInMethod",n)}function vo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Yn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function go(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new po(t.providerId,e,t.signInMethod)}catch(n){}}return null}function yo(t,e){this.Qc=e||[],Yr(this,{providerId:t,isOAuthProvider:!0}),this.Jb={},this.qb=(Qi(t)||{}).Ja||null,this.pb=null}function mo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new T("argument-error",'SAML provider IDs must be prefixed with "saml."');yo.call(this,t,[])}function bo(t){yo.call(this,t,zi),this.a=[]}function _o(){bo.call(this,"facebook.com")}function wo(t){if(!t)throw new T("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return d(t)&&(e=t.accessToken),(new _o).credential({accessToken:e})}function Io(){bo.call(this,"github.com")}function To(t){if(!t)throw new T("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return d(t)&&(e=t.accessToken),(new Io).credential({accessToken:e})}function Eo(){bo.call(this,"google.com"),this.Ca("profile")}function So(t,e){var n=t;return d(t)&&(n=t.idToken,e=t.accessToken),(new Eo).credential({idToken:n,accessToken:e})}function ko(){yo.call(this,"twitter.com",Hi)}function Co(t,e){var n=t;if(d(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new T("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new po("twitter.com",n,"twitter.com")}function No(t,e,n){this.a=t,this.f=e,$r(this,"providerId","password"),$r(this,"signInMethod",n===Po.EMAIL_LINK_SIGN_IN_METHOD?Po.EMAIL_LINK_SIGN_IN_METHOD:Po.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Ao(t){return t&&t.email&&t.password?new No(t.email,t.password,t.signInMethod):null}function Po(){Yr(this,{providerId:"password",isOAuthProvider:!1})}function Ro(t,e){if(!(e=Do(e)))throw new T("argument-error","Invalid email link!");return new No(t,e.code,Po.EMAIL_LINK_SIGN_IN_METHOD)}function Do(t){return(t=Ni(t=io(t)))&&t.operation===ui?t:null}function xo(t){if(!(t.fb&&t.eb||t.La&&t.ea))throw new T("internal-error");this.a=t,$r(this,"providerId","phone"),this.fa="phone",$r(this,"signInMethod","phone")}function Oo(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return V(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new xo(e)}return null}function Lo(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.fb,code:t.a.eb}}function Mo(t){try{this.a=t||Ke.auth()}catch(e){throw new T("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Yr(this,{providerId:"phone",isOAuthProvider:!1})}function Fo(t,e){if(!t)throw new T("missing-verification-id");if(!e)throw new T("missing-verification-code");return new xo({fb:t,eb:e})}function Uo(t){if(t.temporaryProof&&t.phoneNumber)return new xo({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case"google.com":return So(o,n);case"facebook.com":return wo(n);case"github.com":return To(n);case"twitter.com":return Co(n,r);default:return n||r||o||a?a?0==e.indexOf("saml.")?new ho(e,a):new po(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new bo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(s){return null}}function jo(t){if(!t.isOAuthProvider)throw new T("invalid-oauth-provider")}function qo(t,e,n,r,i,o,a){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new T("invalid-auth-event");if(this.g&&this.a)throw new T("invalid-auth-event");if(this.g&&!this.f)throw new T("invalid-auth-event")}function Vo(t){return(t=t||{}).type?new qo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&E(t.error),t.postBody,t.tenantId):null}function Bo(){this.b=null,this.a=[]}oo.prototype.Ha=function(){return this.a?ke(this.a):ke(this.b)},oo.prototype.w=function(){return this.type==ao?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},uo.prototype.ka=function(){},uo.prototype.b=function(){},uo.prototype.c=function(){},uo.prototype.w=function(){},ho.prototype.ka=function(t){return _s(t,lo(this))},ho.prototype.b=function(t,e){var n=lo(this);return n.idToken=e,ws(t,n)},ho.prototype.c=function(t,e){return co(Is(t,lo(this)),e)},ho.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},po.prototype.ka=function(t){return _s(t,vo(this))},po.prototype.b=function(t,e){var n=vo(this);return n.idToken=e,ws(t,n)},po.prototype.c=function(t,e){return co(Is(t,vo(this)),e)},po.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},yo.prototype.Ka=function(t){return this.Jb=ft(t),this},w(mo,yo),w(bo,yo),bo.prototype.Ca=function(t){return H(this.a,t)||this.a.push(t),this},bo.prototype.Rb=function(){return $(this.a)},bo.prototype.credential=function(t,e){var n;if(!(n=d(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new T("argument-error","credential failed: must provide the ID token and/or the access token.");return new po(this.providerId,n,this.providerId)},w(_o,bo),$r(_o,"PROVIDER_ID","facebook.com"),$r(_o,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),w(Io,bo),$r(Io,"PROVIDER_ID","github.com"),$r(Io,"GITHUB_SIGN_IN_METHOD","github.com"),w(Eo,bo),$r(Eo,"PROVIDER_ID","google.com"),$r(Eo,"GOOGLE_SIGN_IN_METHOD","google.com"),w(ko,yo),$r(ko,"PROVIDER_ID","twitter.com"),$r(ko,"TWITTER_SIGN_IN_METHOD","twitter.com"),No.prototype.ka=function(t){return this.signInMethod==Po.EMAIL_LINK_SIGN_IN_METHOD?ru(t,Ps,{email:this.a,oobCode:this.f}):ru(t,Js,{email:this.a,password:this.f})},No.prototype.b=function(t,e){return this.signInMethod==Po.EMAIL_LINK_SIGN_IN_METHOD?ru(t,Rs,{idToken:e,email:this.a,oobCode:this.f}):ru(t,Ws,{idToken:e,email:this.a,password:this.f})},No.prototype.c=function(t,e){return co(this.ka(t),e)},No.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Yr(Po,{PROVIDER_ID:"password"}),Yr(Po,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Yr(Po,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),xo.prototype.ka=function(t){return t.gb(Lo(this))},xo.prototype.b=function(t,e){var n=Lo(this);return n.idToken=e,ru(t,tu,n)},xo.prototype.c=function(t,e){var n=Lo(this);return n.operation="REAUTH",co(t=ru(t,eu,n),e)},xo.prototype.w=function(){var t={providerId:"phone"};return this.a.fb&&(t.verificationId=this.a.fb),this.a.eb&&(t.verificationCode=this.a.eb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Mo.prototype.gb=function(t,e){var n=this.a.a;return ke(e.verify()).then((function(r){if("string"!=typeof r)throw new T("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=d(t)?t.session:null,o=d(t)?t.phoneNumber:t;return(i&&i.type==ao?i.Ha().then((function(t){return function(t,e){return ru(t,zs,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})})):i&&i.type==so?i.Ha().then((function(e){return function(t,e){return ru(t,Gs,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(t,e){return ru(t,Bs,e)}(n,{phoneNumber:o,recaptchaToken:r})).then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}));default:throw new T("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Yr(Mo,{PROVIDER_ID:"phone"}),Yr(Mo,{PHONE_SIGN_IN_METHOD:"phone"}),qo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},qo.prototype.T=function(){return this.h},qo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Ko,Wo=null;function Ho(t){var e="unauthorized-domain",n=void 0,r=Un(t);t=r.a,"chrome-extension"==(r=r.c)?n=qt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=qt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",T.call(this,e,n)}function zo(t,e,n){T.call(this,t,n),(t=e||{}).Kb&&$r(this,"email",t.Kb),t.ea&&$r(this,"phoneNumber",t.ea),t.credential&&$r(this,"credential",t.credential),t.$b&&$r(this,"tenantId",t.$b)}function Go(t){if(t.code){var e=t.code||"";0==e.indexOf(k)&&(e=e.substring(k.length));var n={credential:Uo(t),$b:t.tenantId};if(t.email)n.Kb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new T(e,t.message||void 0);return new zo(e,n,t.message)}return null}function Qo(){}function $o(t){return t.c||(t.c=t.b())}function Yo(){}function Xo(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(aT){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Jo(){}function Zo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=b(this.qc,this),this.a.onerror=b(this.Tb,this),this.a.onprogress=b(this.rc,this),this.a.ontimeout=b(this.vc,this)}function ta(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function ea(t,e,n){this.reset(t,e,n,void 0,void 0)}function na(t){this.f=t,this.b=this.c=this.a=null}function ra(t,e){this.name=t,this.value=e}w(Ho,T),w(zo,T),zo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&dt(t,e),t},zo.prototype.toJSON=function(){return this.w()},Qo.prototype.c=null,w(Yo,Qo),Yo.prototype.a=function(){var t=Xo(this);return t?new ActiveXObject(t):new XMLHttpRequest},Yo.prototype.b=function(){var t={};return Xo(this)&&(t[0]=!0,t[1]=!0),t},Ko=new Yo,w(Jo,Qo),Jo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Zo;throw Error("Unsupported browser")},Jo.prototype.b=function(){return{}},(t=Zo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,ta(this,4)},t.Tb=function(){this.status=500,this.response=this.responseText="",ta(this,4)},t.vc=function(){this.Tb()},t.rc=function(){this.status=200,ta(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},ea.prototype.a=null,ea.prototype.reset=function(t,e,n,r,i){delete this.a},ra.prototype.toString=function(){return this.name};var ia=new ra("SEVERE",1e3),oa=new ra("WARNING",900),aa=new ra("CONFIG",700),sa=new ra("FINE",500);function ua(t){return t.c?t.c:t.a?ua(t.a):(x("Root logger has no level set."),null)}na.prototype.log=function(t,e,n){if(t.value>=ua(this).value)for(p(e)&&(e=e()),t=new ea(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var ca={},ha=null;function la(t){var e;if(ha||(ha=new na(""),ca[""]=ha,ha.c=aa),!(e=ca[t])){e=new na(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=la(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,ca[t]=e}return e}function fa(t,e){t&&t.log(sa,e,void 0)}function pa(t){this.f=t}function da(t){_n.call(this),this.u=t,this.h=void 0,this.readyState=va,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=la("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}w(pa,Qo),pa.prototype.a=function(){return new da(this.f)},pa.prototype.b=function(t){return function(){return t}}({}),w(da,_n);var va=0;function ga(t){t.c.read().then(t.pc.bind(t)).catch(t.Va.bind(t))}function ya(t){t.readyState=4,t.g=null,t.c=null,t.m=null,ma(t)}function ma(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function ba(t){_n.call(this),this.headers=new Nn,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=_a,this.u=this.S=!1}(t=da.prototype).open=function(t,e){if(this.readyState!=va)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,ma(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Va.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ya(this)),this.readyState=va},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,ma(this)),this.a&&(this.readyState=3,ma(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):void 0!==a.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,ga(this)):t.text().then(this.tc.bind(this),this.Va.bind(this)))))},t.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?ya(this):ma(this),3==this.readyState&&ga(this)}},t.tc=function(t){this.a&&(this.response=this.responseText=t,ya(this))},t.sc=function(t){this.a&&(this.response=t,ya(this))},t.Va=function(t){var e=this.i;e&&e.log(oa,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&ya(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(oa,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(oa,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(da.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),w(ba,_n);var _a="";ba.prototype.b=la("goog.net.XhrIo");var wa=/^https?$/i,Ia=["POST","PUT"];function Ta(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():Ko.a(),t.C=t.D?$o(t.D):$o(Ko),t.a.onreadystatechange=b(t.Wb,t);try{fa(t.b,Da(t,"Opening Xhr")),t.N=!0,t.a.open(n,String(e),!0),t.N=!1}catch(s){return fa(t.b,Da(t,"Error opening Xhr: "+s.message)),void Sa(t,s)}e=r||"";var o=new Nn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(f(t)||"string"==typeof t)V(t,e,void 0);else for(var n=Cn(t),r=kn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=Ea,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),r=a.FormData&&e instanceof a.FormData,!H(Ia,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{Aa(t),0<t.g&&(t.u=function(t){return zt&&re(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),fa(t.b,Da(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=b(t.Ma,t)):t.s=En(t.Ma,t.g,t)),fa(t.b,Da(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(s){fa(t.b,Da(t,"Send error: "+s.message)),Sa(t,s)}}function Ea(t){return"content-type"==t.toLowerCase()}function Sa(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,ka(t),Na(t)}function ka(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Ca(t){if(t.c&&void 0!==o)if(t.C[1]&&4==Pa(t)&&2==Ra(t))fa(t.b,Da(t,"Local request error detected and ignored"));else if(t.i&&4==Pa(t))En(t.Wb,0,t);else if(t.dispatchEvent("readystatechange"),4==Pa(t)){fa(t.b,Da(t,"Request complete")),t.c=!1;try{var e,n=Ra(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var s=String(t.l).match(Rn)[1]||null;if(!s&&a.self&&a.self.location){var u=a.self.location.protocol;s=u.substr(0,u.length-1)}i=!wa.test(s?s.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<Pa(t)?t.a.statusText:""}catch(h){fa(t.b,"Can not get status: "+h.message),c=""}t.h=c+" ["+Ra(t)+"]",ka(t)}}finally{Na(t)}}}function Na(t,e){if(t.a){Aa(t);var n=t.a,r=t.C[0]?h:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(aT){(t=t.b)&&t.log(ia,"Problem encountered resetting onreadystatechange: "+aT.message,void 0)}}}function Aa(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(a.clearTimeout(t.s),t.s=null)}function Pa(t){return t.a?t.a.readyState:0}function Ra(t){try{return 2<Pa(t)?t.a.status:-1}catch(e){return-1}}function Da(t,e){return e+" ["+t.P+" "+t.l+" "+Ra(t)+"]"}function xa(t){var e=Wa;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function Oa(t,e,n){t.a=!0,t.c=n,t.f=!e,Ua(t)}function La(t){if(t.a){if(!t.v)throw new ja(t);t.v=!1}}function Ma(t,e,n,r){t.g.push([e,n,r]),t.a&&Ua(t)}function Fa(t){return W(t.g,(function(t){return p(t[1])}))}function Ua(t){if(t.h&&t.a&&Fa(t)){var e=t.h,n=Ba[e];n&&(a.clearTimeout(n.a),delete Ba[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],s=i[1];if(i=i[2],o=t.f?s:o)try{var u=o.call(i||t.s,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(P(e)||"function"==typeof a.Promise&&e instanceof a.Promise)&&(r=!0,t.i=!0)}catch(c){e=c,t.f=!0,Fa(t)||(n=!0)}}t.c=e,r&&(u=b(t.m,t,!0),r=b(t.m,t,!1),e instanceof xa?(Ma(e,u,r),e.C=!0):e.then(u,r)),n&&(e=new Va(e),Ba[e.a]=e,t.h=e.a)}function ja(){R.call(this)}function qa(){R.call(this)}function Va(t){this.a=a.setTimeout(b(this.c,this),0),this.b=t}(t=ba.prototype).Ma=function(){void 0!==o&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",fa(this.b,Da(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(fa(this.b,Da(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Na(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Na(this,!0)),ba.bb.Da.call(this)},t.Wb=function(){this.ya||(this.N||this.i||this.f?Ca(this):this.Jc())},t.Jc=function(){Ca(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case _a:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(ia,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return fa(this.b,"Can not get response: "+e.message),null}},xa.prototype.cancel=function(t){if(this.a)this.c instanceof xa&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new qa(this),La(this),Oa(this,!1,t))}},xa.prototype.m=function(t,e){this.i=!1,Oa(this,t,e)},xa.prototype.then=function(t,e,n){var r,i,o=new be((function(t,e){r=t,i=e}));return Ma(this,r,(function(t){t instanceof qa?o.cancel():i(t)})),o.then(t,e,n)},xa.prototype.$goog_Thenable=!0,w(ja,R),ja.prototype.message="Deferred has already fired",ja.prototype.name="AlreadyCalledError",w(qa,R),qa.prototype.message="Deferred was canceled",qa.prototype.name="CanceledError",Va.prototype.c=function(){throw delete Ba[this.a],this.b};var Ba={};function Ka(t){var e,n=document,r=Tt(t).toString(),i=pe(document,"SCRIPT"),o={Xb:i,Ma:void 0},s=new xa(o);return e=window.setTimeout((function(){Ha(i,!0);var t=new Qa(Ga,"Timeout reached for loading script "+r);La(s),Oa(s,!1,t)}),5e3),o.Ma=e,i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Ha(i,!1,e),La(s),Oa(s,!0,null))},i.onerror=function(){Ha(i,!0,e);var t=new Qa(za,"Error while loading script "+r);La(s),Oa(s,!1,t)},dt(o={},{type:"text/javascript",charset:"UTF-8"}),ue(i,o),function(t,e){vt(t,"HTMLScriptElement"),t.src=Tt(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=a?e=c(e.document):(null===u&&(u=c(a.document)),e=u),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),s}function Wa(){if(this&&this.Xb){var t=this.Xb;t&&"SCRIPT"==t.tagName&&Ha(t,!0,this.Ma)}}function Ha(t,e,n){null!=n&&a.clearTimeout(n),t.onload=h,t.onerror=h,t.onreadystatechange=h,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var za=0,Ga=1;function Qa(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),R.call(this,n),this.code=t}function $a(t){this.f=t}function Ya(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||Za,this.g=ft(t.secureTokenHeaders||ts),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||es,this.a=ft(t.firebaseHeaders||ns),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==wr(),!(n=a.XMLHttpRequest||n&&Ke.INTERNAL.node&&Ke.INTERNAL.node.XMLHttpRequest)&&!_r())throw new T("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,_r()?this.f=new pa(self):Ir()?this.f=new $a(n):this.f=new Jo,this.b=null}w(Qa,R),w($a,Qo),$a.prototype.a=function(){return new this.f},$a.prototype.b=function(){return{}};var Xa,Ja="idToken",Za=new Vr(3e4,6e4),ts={"Content-Type":"application/x-www-form-urlencoded"},es=new Vr(3e4,6e4),ns={"Content-Type":"application/json"};function rs(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function is(t,e){e&&(t.l=os("https://securetoken.googleapis.com/v1/token",e),t.h=os("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=os("https://identitytoolkit.googleapis.com/v2/",e))}function os(t,e){return t=Un(t),e=Un(e.url),t.f=t.a+t.f,xn(t,e.c),t.a=e.a,On(t,e.g),t.toString()}function as(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function ss(t,e,n,r,i,o,s){(function(){var t=Nr();return!((t=Sr(t)!=Er?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||zt&&oe&&!(9<oe))})()||_r()?t=b(t.u,t):(Xa||(Xa=new be((function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{a[cs]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Ma(t,null,e,void 0)}(Ka(Et(us,{onload:cs})),(function(){e(Error("CORS_UNSUPPORTED"))}))}}(t,e)}))),t=b(t.s,t)),t(e,n,r,i,o,s)}Ya.prototype.T=function(){return this.b},Ya.prototype.u=function(t,e,n,r,i,o){if(_r()&&(void 0===a.fetch||void 0===a.Headers||void 0===a.Request))throw new T("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new ba(this.f);if(o){s.g=Math.max(0,o);var u=setTimeout((function(){s.dispatchEvent("timeout")}),o)}wn(s,"complete",(function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return fa(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(n){t=null}e&&e(t)})),In(s,"ready",(function(){u&&clearTimeout(u),We(this)})),In(s,"timeout",(function(){u&&clearTimeout(u),We(this),e&&e(null)})),Ta(s,t,n,r,i)};var us=new gt(_t,"https://apis.google.com/js/client.js?onload=%{onload}"),cs="__fcb"+Math.floor(1e6*Math.random()).toString();function hs(t,e,n,r,i,o,a){var s=Un(e+n);Mn(s,"key",t.c),a&&Mn(s,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Mn(s,c,i[c]);return new be((function(e,n){ss(t,s.toString(),(function(t){t?t.error?n(ou(t,o||{})):e(t):n(new T("network-request-failed"))}),r,u?void 0:nr(Mr(i)),t.a,t.v.get())}))}function ls(t){if("string"!=typeof(t=t.email)||!gr.test(t))throw new T("invalid-email")}function fs(t){"email"in t&&ls(t)}function ps(t){if(!t[Ja]){if(t.mfaPendingCredential)throw new T("multi-factor-auth-required",null,ft(t));throw new T("internal-error")}}function ds(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new T("internal-error")}else{if(!t.sessionInfo)throw new T("missing-verification-id");if(!t.code)throw new T("missing-verification-code")}}Ya.prototype.s=function(t,e,n,r,i){var o=this;Xa.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},Ya.prototype.Ab=function(){return ru(this,Hs,{})},Ya.prototype.Cb=function(t,e){return ru(this,Ks,{idToken:t,email:e})},Ya.prototype.Db=function(t,e){return ru(this,Ws,{idToken:t,password:e})};var vs={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function gs(t){if(!t.phoneVerificationInfo)throw new T("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new T("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new T("missing-verification-code")}function ys(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new T("internal-error")}function ms(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(Jn(t=new Qn(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function bs(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Go(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Go(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Go(t)):t.errorMessage&&(e=iu(t.errorMessage)),e)throw e;ps(t)}function _s(t,e){return e.returnIdpCredential=!0,ru(t,Qs,e)}function ws(t,e){return e.returnIdpCredential=!0,ru(t,Ys,e)}function Is(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,ru(t,$s,e)}function Ts(t){if(!t.oobCode)throw new T("invalid-action-code")}(t=Ya.prototype).Eb=function(t,e){var n={idToken:t},r=[];return ht(vs,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),ru(this,Ks,n)},t.wb=function(t,e){return dt(t={requestType:"PASSWORD_RESET",email:t},e),ru(this,Us,t)},t.xb=function(t,e){return dt(t={requestType:"EMAIL_SIGNIN",email:t},e),ru(this,Ls,t)},t.vb=function(t,e){return dt(t={requestType:"VERIFY_EMAIL",idToken:t},e),ru(this,Ms,t)},t.Fb=function(t,e,n){return dt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),ru(this,Fs,t)},t.gb=function(t){return ru(this,Zs,t)},t.ob=function(t,e){return ru(this,Vs,{oobCode:t,newPassword:e})},t.Sa=function(t){return ru(this,Ss,{oobCode:t})},t.kb=function(t){return ru(this,Es,{oobCode:t})};var Es={endpoint:"setAccountInfo",A:Ts,Z:"email",B:!0},Ss={endpoint:"resetPassword",A:Ts,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new T("internal-error")},B:!0},ks={endpoint:"signupNewUser",A:function(t){if(ls(t),!t.password)throw new T("weak-password")},G:ps,V:!0,B:!0},Cs={endpoint:"createAuthUri",B:!0},Ns={endpoint:"deleteAccount",O:["idToken"]},As={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new T("internal-error")}},Ps={endpoint:"emailLinkSignin",O:["email","oobCode"],A:ls,G:ps,V:!0,B:!0},Rs={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:ls,G:ps,V:!0},Ds={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:gs,G:ps,B:!0,Na:!0},xs={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:gs,G:ps,B:!0,Na:!0},Os={endpoint:"getAccountInfo"},Ls={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new T("internal-error");ls(t)},Z:"email",B:!0},Ms={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new T("internal-error")},Z:"email",B:!0},Fs={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new T("internal-error")},Z:"email",B:!0},Us={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new T("internal-error");ls(t)},Z:"email",B:!0},js={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},qs={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new T("internal-error")}},Vs={endpoint:"resetPassword",A:Ts,Z:"email",B:!0},Bs={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Ks={endpoint:"setAccountInfo",O:["idToken"],A:fs,V:!0},Ws={endpoint:"setAccountInfo",O:["idToken"],A:function(t){if(fs(t),!t.password)throw new T("weak-password")},G:ps,V:!0},Hs={endpoint:"signupNewUser",G:ps,V:!0,B:!0},zs={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new T("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new T("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new T("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new T("internal-error")},B:!0,Na:!0},Gs={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new T("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new T("internal-error")},B:!0,Na:!0},Qs={endpoint:"verifyAssertion",A:ys,Za:ms,G:bs,V:!0,B:!0},$s={endpoint:"verifyAssertion",A:ys,Za:ms,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new T("user-not-found");if(t.errorMessage)throw iu(t.errorMessage);ps(t)},V:!0,B:!0},Ys={endpoint:"verifyAssertion",A:function(t){if(ys(t),!t.idToken)throw new T("internal-error")},Za:ms,G:bs,V:!0},Xs={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new T("invalid-custom-token")},G:ps,V:!0,B:!0},Js={endpoint:"verifyPassword",A:function(t){if(ls(t),!t.password)throw new T("wrong-password")},G:ps,V:!0,B:!0},Zs={endpoint:"verifyPhoneNumber",A:ds,G:ps,B:!0},tu={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new T("internal-error");ds(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Go(t);ps(t)}},eu={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ds,G:ps,B:!0},nu={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Ja]^!!t.refreshToken)throw new T("internal-error")},B:!0,Na:!0};function ru(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.O))return Ce(new T("internal-error"));var r,i=!!e.Na,o=e.Vb||"POST";return ke(n).then(e.A).then((function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),hs(t,i?t.i:t.h,e.endpoint,o,n,e.Ib,e.mb||!1)})).then((function(t){return r=t,e.Za?e.Za(n,r):r})).then(e.G).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new T("internal-error");return r[e.Z]}))}function iu(t){return ou({error:{errors:[{message:t}],code:400,message:t}})}function ou(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new T(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",dt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new T(r[i],e);return!e&&t&&(e=Lr(t)),new T("internal-error",e)}function au(t){this.b=t,this.a=null,this.sb=function(t){return(hu||(hu=new be((function(t,e){function n(){qr(),Ar("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){qr(),e(Error("Network Error"))},timeout:uu.get()})}if(Ar("gapi.iframes.Iframe"))t();else if(Ar("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();a[r]=function(){Ar("gapi.load")?n():e(Error("Network Error"))},ke(Ka(r=Et(su,{onload:r}))).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw hu=null,t})))).then((function(){return new be((function(e,n){Ar("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Ar("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),cu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var su=new gt(_t,"https://apis.google.com/js/api.js?onload=%{onload}"),uu=new Vr(3e4,6e4),cu=new Vr(5e3,15e3),hu=null;function lu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,this.g?t=jn((t=Un(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):t=jn("https",this.l,null,"/__/auth/iframe"),this.a=t,Mn(this.a,"apiKey",this.h),Mn(this.a,"appName",this.i),this.b=null,this.c=[]}function fu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function pu(t){try{return Ke.app(t).auth().Ga()}catch(e){return[]}}function du(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function vu(t){var e=cr();return function(t){return ru(t,js,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=Un(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=Un(o).a==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:vr.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){t=!0;break t}}t=!1}if(!t)throw new Ho(cr())}))}function gu(t){return t.m||(t.m=yr().then((function(){if(!t.u){var e=t.c,n=t.i,r=pu(t.b),i=new lu(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=$(r||[]),t.u=i.toString()}t.v=new au(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.sb.then((function(){t.a.register("authEvent",e,Ar("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.v,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Vo(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",ke(n)}return n.status="ERROR",ke(n)}))}(t)}))),t.m}function yu(t){return t.l||(t.C=t.c?Cr(t.c,pu(t.b)):null,t.l=new Ya(t.g,A(t.i),t.C),t.f&&is(t.l,t.f)),t.l}function mu(t,e,n,r,i,o,a,s,u,c,h,l){return(t=new fu(t,e,n,r,i,l)).l=o,t.g=a,t.i=s,t.b=ft(u||null),t.f=c,t.zb(h).toString()}function bu(t){if(this.a=t||Ke.INTERNAL.reactNative&&Ke.INTERNAL.reactNative.AsyncStorage,!this.a)throw new T("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function _u(t){this.b=t,this.a={},this.f=b(this.c,this)}lu.prototype.toString=function(){return this.f?Mn(this.a,"v",this.f):Xn(this.a.b,"v"),this.b?Mn(this.a,"eid",this.b):Xn(this.a.b,"eid"),this.c.length?Mn(this.a,"fw",this.c.join(",")):Xn(this.a.b,"fw"),this.a.toString()},fu.prototype.zb=function(t){return this.h=t,this},fu.prototype.toString=function(){if(this.v){var t=Un(this.v.url);t=jn(t.c,t.a,t.g,"/emulator/auth/handler")}else t=jn("https",this.u,null,"/__/auth/handler");if(Mn(t,"apiKey",this.s),Mn(t,"appName",this.c),Mn(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=Ke.app(this.c).auth().la()}catch(s){n=null}for(var r in e.pb=n,Mn(t,"providerId",this.a.providerId),e=Mr((n=this.a).Jb))e[r]=e[r].toString();r=n.Qc,e=ft(e);for(var i=0;i<r.length;i++){var o=r[i];o in e&&delete e[o]}n.qb&&n.pb&&!e[n.qb]&&(e[n.qb]=n.pb),lt(e)||Mn(t,"customParameters",Lr(e))}if("function"==typeof this.a.Rb&&((n=this.a.Rb()).length&&Mn(t,"scopes",n.join(","))),this.l?Mn(t,"redirectUrl",this.l):Xn(t.b,"redirectUrl"),this.g?Mn(t,"eventId",this.g):Xn(t.b,"eventId"),this.i?Mn(t,"v",this.i):Xn(t.b,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!Fn(t,a)&&Mn(t,a,this.b[a]);return this.h?Mn(t,"tid",this.h):Xn(t.b,"tid"),this.f?Mn(t,"eid",this.f):Xn(t.b,"eid"),(a=pu(this.c)).length&&Mn(t,"fw",a.join(",")),t.toString()},(t=du.prototype).Pb=function(t,e,n){var r=new T("popup-closed-by-user"),i=new T("web-storage-unsupported"),o=this,a=!1;return this.ma().then((function(){(function(t){var e={type:"webStorageSupport"};return gu(t).then((function(){return function(t,e){return t.sb.then((function(){return new be((function(n){t.a.send(e.type,e,n,Ar("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.v,e)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&pr(t),e(i),a=!0)}))})).o((function(){})).then((function(){if(!a)return function(t){return new be((function(e){return function n(){Sn(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!a)return Sn(n).then((function(){e(r)}))}))},t.Yb=function(){var t=Nr();return!Or(t)&&!jr(t)},t.Ub=function(){return!1},t.Nb=function(t,e,n,r,i,o,a,s){if(!t)return Ce(new T("popup-blocked"));if(a&&!Or())return this.ma().o((function(e){pr(t),i(e)})),r(),ke();this.a||(this.a=vu(yu(this)));var u=this;return this.a.then((function(){var e=u.ma().o((function(e){throw pr(t),i(e),e}));return r(),e})).then((function(){(jo(n),a)||hr(mu(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,s,u.f),t)})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Ob=function(t,e,n,r){this.a||(this.a=vu(yu(this)));var i=this;return this.a.then((function(){jo(e),hr(mu(i.s,i.g,i.b,t,e,cr(),n,i.c,void 0,i.i,r,i.f))})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.ma=function(){var t=this;return gu(this).then((function(){return t.v.sb})).o((function(){throw t.a=null,new T("network-request-failed")}))},t.ac=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Ta=function(t){G(this.h,(function(e){return e==t}))},(t=bu.prototype).get=function(t){return ke(this.a.getItem(t)).then((function(t){return t&&Fr(t)}))},t.set=function(t,e){return ke(this.a.setItem(t,Lr(e)))},t.U=function(t){return ke(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var wu,Iu=[];function Tu(t,e,n){lt(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function Eu(t){this.a=t}function Su(t){this.c=t,this.b=!1,this.a=[]}function ku(t,e,n,r){var i,o,a,s,u=n||{},c=null;if(t.b)return Ce(Error("connection_unavailable"));var h=r?800:50,l="undefined"!=typeof MessageChannel?new MessageChannel:null;return new be((function(n,r){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),h),c={messageChannel:l,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(s),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))}},t.a.push(c),l.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[l.port2])):r(Error("connection_unavailable"))})).then((function(e){return Cu(t,c),e})).o((function(e){throw Cu(t,c),e}))}function Cu(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),G(t.a,(function(t){return t==e}))}}function Nu(){if(!Du())throw new T("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=a.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;_r()&&self?(this.v=function(){var t=_r()?self:null;if(V(Iu,(function(n){n.b==t&&(e=n)})),!e){var e=new _u(t);Iu.push(e)}return e}(),Tu(this.v,"keyChanged",(function(e,n){return Fu(t).then((function(e){return 0<e.length&&V(t.a,(function(t){t(e)})),{keyProcessed:H(e,n.key)}}))})),Tu(this.v,"ping",(function(){return ke(["keyChanged"])}))):function(){var t=a.navigator;return t&&t.serviceWorker?ke().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):ke(null)}().then((function(e){(t.h=e)&&(t.g=new Su(new Eu(e)),ku(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&H(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function Au(t){return new be((function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(e){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){n(e)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new be((function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(t).then((function(){return Au(t)})).then((function(t){e(t)})).o((function(t){n(t)}))}}))}function Pu(t){return t.i||(t.i=Au(t)),t.i}function Ru(t,e){var n=0;return new be((function r(i,o){Pu(t).then(e).then(i).o((function(e){if(!(3<++n))return Pu(t).then((function(e){return e.close(),t.i=void 0,r(i,o)})).o((function(t){o(t)}));o(e)}))}))}function Du(){try{return!!a.indexedDB}catch(Wt){return!1}}function xu(t){return t.objectStore("firebaseLocalStorage")}function Ou(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Lu(t){return new be((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Mu(t,e){return t.g&&t.h&&function(){var t=a.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?ku(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):ke()}function Fu(t){return Pu(t).then((function(t){var e=xu(Ou(t,!1));return e.getAll?Lu(e.getAll()):new be((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=lr(t.c,n),t.c=n}return r}))}function Uu(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function ju(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=ke().then((function(){if(Du()){var t=Ur(),r="__sak"+t;return wu||(wu=new Nu),(n=wu).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){V(e.a,(function(e){e(t)}))})),t}))}function qu(){this.a={},this.type="inMemory"}function Vu(){if(!function(){var t="Node"==wr();if(!(t=Bu()||t&&Ke.INTERNAL.node&&Ke.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==wr())throw new T("internal-error","The LocalStorage compatibility library was not found.");throw new T("web-storage-unsupported")}this.a=Bu()||Ke.INTERNAL.node.localStorage,this.type="localStorage"}function Bu(){try{var t=a.localStorage,e=Ur();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Ku(){this.type="nullStorage"}function Wu(){if(!function(){var t="Node"==wr();if(!(t=Hu()||t&&Ke.INTERNAL.node&&Ke.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==wr())throw new T("internal-error","The SessionStorage compatibility library was not found.");throw new T("web-storage-unsupported")}this.a=Hu()||Ke.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Hu(){try{var t=a.sessionStorage,e=Ur();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function zu(){var t={};t.Browser=$u,t.Node=Yu,t.ReactNative=Xu,t.Worker=Ju,this.a=t[wr()]}_u.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];V(r,(function(e){i.push(ke().then((function(){return e(t.origin,t.data.data)})))})),Ae(i).then((function(r){var i=[];V(r,(function(t){i.push({fulfilled:t.Qb,value:t.value,reason:t.reason?t.reason.message:void 0})})),V(i,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},Eu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Su.prototype.close=function(){for(;0<this.a.length;)Cu(this,this.a[0]);this.b=!0},(t=Nu.prototype).set=function(t,e){var n=this,r=!1;return Ru(this,(function(e){return Lu((e=xu(Ou(e,!0))).get(t))})).then((function(i){return Ru(n,(function(o){if(o=xu(Ou(o,!0)),i)return i.value=e,Lu(o.put(i));n.b++,r=!0;var a={};return a.fbase_key=t,a.value=e,Lu(o.add(a))}))})).then((function(){return n.c[t]=e,Mu(n,t)})).oa((function(){r&&n.b--}))},t.get=function(t){return Ru(this,(function(e){return Lu(xu(Ou(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.U=function(t){var e=this,n=!1;return Ru(this,(function(r){return n=!0,e.b++,Lu(xu(Ou(r,!0)).delete(t))})).then((function(){return delete e.c[t],Mu(e,t)})).oa((function(){n&&e.b--}))},t.ca=function(t){0==this.a.length&&function(t){function e(){t.f=setTimeout((function(){t.l=Fu(t).then((function(e){0<e.length&&V(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}Uu(t),e()}(this),this.a.push(t)},t.ia=function(t){G(this.a,(function(e){return e==t})),0==this.a.length&&Uu(this)},(t=ju.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.U=function(t){return this.b.then((function(e){return e.U(t)}))},t.ca=function(t){this.a.push(t)},t.ia=function(t){G(this.a,(function(e){return e==t}))},(t=qu.prototype).get=function(t){return ke(this.a[t])},t.set=function(t,e){return this.a[t]=e,ke()},t.U=function(t){return delete this.a[t],ke()},t.ca=function(){},t.ia=function(){},(t=Vu.prototype).get=function(t){var e=this;return ke().then((function(){return Fr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return ke().then((function(){var r=Lr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return ke().then((function(){e.a.removeItem(t)}))},t.ca=function(t){a.window&&un(a.window,"storage",t)},t.ia=function(t){a.window&&ln(a.window,"storage",t)},(t=Ku.prototype).get=function(){return ke(null)},t.set=function(){return ke()},t.U=function(){return ke()},t.ca=function(){},t.ia=function(){},(t=Wu.prototype).get=function(t){var e=this;return ke().then((function(){return Fr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return ke().then((function(){var r=Lr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return ke().then((function(){e.a.removeItem(t)}))},t.ca=function(){},t.ia=function(){};var Gu,Qu,$u={F:Vu,cb:Wu},Yu={F:Vu,cb:Wu},Xu={F:bu,cb:Ku},Ju={F:Vu,cb:Ku},Zu={rd:"local",NONE:"none",td:"session"};function tc(){var t=!(jr(Nr())||!br()),e=Or(),n=Pr();this.m=t,this.h=e,this.l=n,this.a={},Gu||(Gu=new zu),t=Gu;try{this.g=!ur()&&Wr()||!a.indexedDB?new t.a.F:new ju(_r()?new qu:new t.a.F)}catch(r){this.g=new qu,this.h=!0}try{this.i=new t.a.cb}catch(r){this.i=new qu}this.v=new qu,this.f=b(this.Zb,this),this.b={}}function ec(){return Qu||(Qu=new tc),Qu}function nc(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function rc(t,e){return"firebase:"+t.name+(e?":"+e:"")}function ic(t,e,n){return n=rc(e,n),"local"==e.F&&(t.b[n]=null),nc(t,e.F).U(n)}function oc(t){t.c&&(clearInterval(t.c),t.c=null)}function ac(t){this.a=t,this.b=ec()}(t=tc.prototype).get=function(t,e){return nc(this,t.F).get(rc(t,e))},t.set=function(t,e,n){var r=rc(t,n),i=this,o=nc(this,t.F);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.F&&(i.b[r]=e)}))},t.addListener=function(t,e,n){t=rc(t,e),this.l&&(this.b[t]=a.localStorage.getItem(t)),lt(this.a)&&(nc(this,"local").ca(this.f),this.h||(ur()||!Wr())&&a.indexedDB||!this.l||function(t){oc(t),t.c=setInterval((function(){for(var e in t.a){var n=a.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Ye({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Zb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=rc(t,e),this.a[t]&&(G(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),lt(this.a)&&(nc(this,"local").ia(this.f),oc(this))},t.Zb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=a.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.nb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?nc(this,"local").ia(this.f):oc(this),this.m)if(n=a.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?a.localStorage.setItem(e,r):a.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===a.localStorage.getItem(e)||(o.b[e]=a.localStorage.getItem(e),o.nb(e))},zt&&oe&&10==oe&&a.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else V(t,b(this.nb,this))},t.nb=function(t){this.a[t]&&V(this.a[t],(function(t){t()}))};var sc,uc={name:"authEvent",F:"local"};function cc(){this.a=ec()}function hc(t,e){this.b=lc,this.f=a.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=a.Int32Array?new Int32Array(64):Array(64),void 0===sc&&(sc=a.Int32Array?new Int32Array(mc):mc),this.reset()}w(hc,(function(){this.b=-1}));for(var lc=64,fc=lc-1,pc=[],dc=0;dc<fc;dc++)pc[dc]=0;var vc=Q(128,pc);function gc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&h^~c&l)+(0|sc[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+a|0,u=s,s=i,i=r,r=a+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function yc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(gc(t),i=0);else{if(!f(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(gc(t),i=0)}}t.c=i,t.g+=n}hc.prototype.reset=function(){this.g=this.c=0,this.a=a.Int32Array?new Int32Array(this.h):$(this.h)};var mc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function bc(){hc.call(this,8,_c)}w(bc,hc);var _c=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function wc(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new cc,this.g=new ac(this.h),this.f=null,this.b=[],this.a=this.c=null}function Ic(t){return new T("invalid-cordova-configuration",t)}function Tc(t){var e=new bc;yc(e,t),t=[];var n=8*e.g;56>e.c?yc(e,vc,56-e.c):yc(e,vc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(gc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return K(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}function Ec(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(r){}}function Sc(t){return t.f||(t.f=t.ma().then((function(){return new be((function(e){t.Ea((function n(r){return e(r),t.Ta(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),kc(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=io(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Fr(Fn(o=Un(i),"firebaseError")||null))?E(o):null)?new qo(r.c,r.b,null,null,o,null,r.T()):new qo(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}Ec(t,i)}))}var n=new qo("unknown",null,null,null,new T("no-auth-event")),r=!1,i=Sn(500).then((function(){return kc(t).then((function(){r||Ec(t,n)}))})),o=a.handleOpenURL;a.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Ar("BuildInfo.packageName",a).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(n){console.error(n)}},Wo||(Wo=new Bo),function(t){var e=Wo;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=Ar("universalLinks.subscribe",a))&&t(null,e.b))}(e)}(t)}))}))),t.f}function kc(t){var e=null;return function(t){return t.b.get(uc,t.a).then((function(t){return Vo(t)}))}(t.g).then((function(n){return e=n,ic((n=t.g).b,uc,n.a)})).then((function(){return e}))}function Cc(t){this.a=t,this.b=ec()}(t=wc.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(mr(void 0)?yr().then((function(){return new be((function(t,e){var n=a.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):Ce(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof Ar("universalLinks.subscribe",a))throw Ic("cordova-universal-links-plugin-fix is not installed");if(void 0===Ar("BuildInfo.packageName",a))throw Ic("cordova-plugin-buildinfo is not installed");if("function"!=typeof Ar("cordova.plugins.browsertab.openUrl",a))throw Ic("cordova-plugin-browsertab is not installed");if("function"!=typeof Ar("cordova.InAppBrowser.open",a))throw Ic("cordova-plugin-inappbrowser is not installed")}),(function(){throw new T("cordova-not-ready")}))},t.Pb=function(t,e){return e(new T("operation-not-supported-in-this-environment")),ke()},t.Nb=function(){return Ce(new T("operation-not-supported-in-this-environment"))},t.ac=function(){return!1},t.Yb=function(){return!0},t.Ub=function(){return!0},t.Ob=function(t,e,n,r){if(this.c)return Ce(new T("redirect-operation-pending"));var i=this,o=a.document,s=null,u=null,c=null,h=null;return this.c=ke().then((function(){return jo(e),Sc(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new qo(e,r,null,o,new T("no-auth-event"),null,i),u=Ar("BuildInfo.packageName",a);if("string"!=typeof u)throw new T("invalid-cordova-configuration");var c=Ar("BuildInfo.displayName",a),h={};if(Nr().toLowerCase().match(/iphone|ipad|ipod/))h.ibi=u;else{if(!Nr().toLowerCase().match(/android/))return Ce(new T("operation-not-supported-in-this-environment"));h.apn=u}c&&(h.appDisplayName=c),o=Tc(o),h.sessionId=o;var l=mu(t.v,t.i,t.l,e,n,null,r,t.m,h,t.u,i,t.s);return t.ma().then((function(){var e=t.h;return t.C.a.set(uc,s.w(),e)})).then((function(){var e=Ar("cordova.plugins.browsertab.isAvailable",a);if("function"!=typeof e)throw new T("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=Ar("cordova.plugins.browsertab.openUrl",a)))throw new T("invalid-cordova-configuration");n(l)}else{if("function"!=typeof(n=Ar("cordova.InAppBrowser.open",a)))throw new T("invalid-cordova-configuration");e=Nr(),t.a=n(l,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new be((function(t,e){u=function(){var e=Ar("cordova.plugins.browsertab.close",a);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),c=function(){s||(s=Sn(2e3).then((function(){e(new T("redirect-cancelled-by-user"))})))},h=function(){Br()&&c()},o.addEventListener("resume",c,!1),Nr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",h,!1)})).o((function(t){return kc(i).then((function(){throw t}))}))})).oa((function(){c&&o.removeEventListener("resume",c,!1),h&&o.removeEventListener("visibilitychange",h,!1),s&&s.cancel(),u&&i.Ta(u),i.c=null}))},t.Ea=function(t){this.b.push(t),Sc(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new qo("unknown",null,null,null,new T("no-auth-event")),t(e))}))},t.Ta=function(t){G(this.b,(function(e){return e==t}))};var Nc={name:"pendingRedirect",F:"session"};function Ac(t){return ic(t.b,Nc,t.a)}function Pc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=b(this.s,this),this.b=new Hc,this.C=new Yc,this.g=new Cc(Kc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Rc(this.D,this.v,this.m,S,this.J)}function Rc(t,e,n,r,i){var o=Ke.SDK_VERSION||null;return mr()?new wc(t,e,n,o,r,i):new du(t,e,n,o,r,i)}function Dc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o((function(n){throw t.a==e&&t.reset(),n}))}function xc(t){t.a.Yb()&&Dc(t).o((function(e){var n=new qo("unknown",null,null,null,new T("operation-not-supported-in-this-environment"));jc(e)&&t.s(n)})),t.a.Ub()||zc(t.b)}function Oc(t,e){H(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(Nc,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?Ac(t.g).then((function(){Dc(t).o((function(e){var n=new qo("unknown",null,null,null,new T("operation-not-supported-in-this-environment"));jc(e)&&t.s(n)}))})):xc(t)})).o((function(){xc(t)}))}function Lc(t,e){G(t.h,(function(t){return t==e}))}Pc.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=Rc(this.D,this.v,this.m,null,this.J),this.i={}},Pc.prototype.s=function(t){if(!t)throw new T("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Gb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=Date.now())),e=!0;break}}return zc(this.b),e};var Mc=new Vr(2e3,1e4),Fc=new Vr(3e4,6e4);function Uc(t,e,n,r,i,o,a){return t.a.Nb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,a)}function jc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function qc(t,e,n,r,i){var o;return function(t){return t.b.set(Nc,"pending",t.a)}(t.g).then((function(){return t.a.Ob(e,n,r,i).o((function(e){if(jc(e))throw new T("operation-not-supported-in-this-environment");return o=e,Ac(t.g).then((function(){throw o}))})).then((function(){return t.a.ac()?new be((function(){})):Ac(t.g).then((function(){return t.ra()})).then((function(){})).o((function(){}))}))}))}function Vc(t,e,n,r,i){return t.a.Pb(r,(function(t){e.na(n,null,t,i)}),Mc.get())}Pc.prototype.ra=function(){return this.b.ra()};var Bc={};function Kc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Wc(t,e,n,r){var i=Kc(e,n,r);return Bc[i]||(Bc[i]=new Pc(t,e,n,r)),Bc[i]}function Hc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function zc(t){t.g||(t.g=!0,$c(t,!1,null,null))}function Gc(t){t.g&&!t.i&&$c(t,!1,null,null)}function Qc(t,e){if(t.b=function(){return ke(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function $c(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Ce(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Qc(t,n):Qc(t,{user:null}),t.f=[],t.c=[]}function Yc(){}function Xc(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(t){this.jb=t},enumerable:!1})}function Jc(t,e){this.a=e,$r(this,"verificationId",t)}function Zc(t,e,n,r){return new Mo(t).gb(e,n).then((function(t){return new Jc(t,r)}))}function th(t){var e=Wi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new T("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Yr(this,{token:t,expirationTime:Kr(1e3*e.exp),authTime:Kr(1e3*e.auth_time),issuedAtTime:Kr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function eh(t,e,n){var r=e&&e[rh];if(!r)throw new T("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=ft(e),this.g=n,this.c=new oo(null,r),this.b=[];var i=this;V(e[nh]||[],(function(t){(t=ti(t))&&i.b.push(t)})),$r(this,"auth",this.a),$r(this,"session",this.c),$r(this,"hints",this.b)}Hc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Hc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?($c(this,!0,null,t.a),ke()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,a=e.T(),s=!!e.c.match(/Redirect$/);n(r,i,a,o).then((function(e){$c(t,s,e,null)})).o((function(e){$c(t,s,null,e)}))}(this,t,e):Ce(new T("invalid-auth-event")):($c(this,!1,null,null),ke())}else Ce(new T("invalid-auth-event"))},Hc.prototype.ra=function(){var t=this;return new be((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new T("timeout");t.a&&t.a.cancel(),t.a=Sn(Fc.get()).then((function(){t.b||(t.g=!0,$c(t,!0,null,e))}))}(t))}))},Yc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),ke()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then((function(t){e.na(r,t,null,n)})).o((function(t){e.na(r,null,t,n)}))}(t,e):Ce(new T("invalid-auth-event"))}else Ce(new T("invalid-auth-event"))},Jc.prototype.confirm=function(t){return t=Fo(this.verificationId,t),this.a(t)};var nh="mfaInfo",rh="mfaPendingCredential";function ih(t,e,n,r){T.call(this,"multi-factor-auth-required",r,e),this.b=new eh(t,e,n),$r(this,"resolver",this.b)}function oh(t,e,n){if(t&&d(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new ih(e,t.serverResponse,n,t.message)}catch(r){}return null}function ah(){}function sh(t){$r(this,"factorId",t.fa),this.a=t}function uh(t){if(sh.call(this,t),this.a.fa!=Mo.PROVIDER_ID)throw new T("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function ch(t,e){for(var n in $e.call(this,t),e)this[n]=e[n]}function hh(t,e){this.a=t,this.b=[],this.c=b(this.yc,this),un(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&V(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[ri]=t.uid),t.displayName&&(r[ei]=t.displayName),t.enrollmentTime&&(r[ni]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[ii]=t.phoneNumber);try{e=new oi(r)}catch(i){}t=e}else t=null;t&&n.push(t)})),lh(this,n)}function lh(t,e){t.b=e,$r(t,"enrolledFactors",e)}function fh(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function ph(t,e){t.stop(),t.b=Sn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then((function(){return function(){var t=a.document,e=null;return Br()||!t?ke():new be((function(n){e=function(){Br()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return t.h()})).then((function(){ph(t,!0)})).o((function(e){t.i(e)&&ph(t,!1)}))}function dh(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function vh(t,e){void 0===e&&(t.b?e=(e=t.b).a-e.g:e=0),t.c=Date.now()+1e3*e}function gh(t,e){t.b=Ki(e[Ja]||""),t.a=e.refreshToken,vh(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function yh(t,e){return function(t,e){return new be((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?ss(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(ou(t)):t.access_token&&t.refresh_token?n(t):r(new T("internal-error")):r(new T("network-request-failed"))}),"POST",Yn(e).toString(),t.g,t.m.get()):r(new T("internal-error"))}))}(t.f,e).then((function(e){return t.b=Ki(e.access_token),t.a=e.refresh_token,vh(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}function mh(t,e){this.a=t||null,this.b=e||null,Yr(this,{lastSignInTime:Kr(e||null),creationTime:Kr(t||null)})}function bh(t,e,n,r,i,o){Yr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function _h(t,e,n){this.N=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var r=Ke.SDK_VERSION?Cr(Ke.SDK_VERSION):null;this.a=new Ya(this.l,A(S),r),(this.u=t.emulatorConfig||null)&&is(this.a,this.u),this.h=new dh(this.a),Ah(this,e[Ja]),gh(this.h,e),$r(this,"refreshToken",this.h.a),Dh(this,n||{}),_n.call(this),this.P=!1,this.s&&Rr()&&(this.b=Wc(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=function(t){return new fh((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=t.h.c-Date.now()-3e5;return 0<e?e:0}))}(this),this.ba=b(this.ib,this);var i=this;this.za=null,this.Pa=function(t){i.xa(t.h)},this.qa=null,this.Ba=function(t){wh(i,t.c)},this.$=null,this.aa=[],this.Oa=function(t){Eh(i,t.f)},this.ja=null,this.S=new hh(this,n),$r(this,"multiFactor",this.S)}function wh(t,e){t.u=e,is(t.a,e),t.b&&(e=t.b,t.b=Wc(t.s,t.l,t.m,t.u),t.P&&(Lc(e,t),Oc(t.b,t)))}function Ih(t,e){t.qa&&ln(t.qa,"languageCodeChanged",t.Pa),(t.qa=e)&&un(e,"languageCodeChanged",t.Pa)}function Th(t,e){t.$&&ln(t.$,"emulatorConfigChanged",t.Ba),(t.$=e)&&un(e,"emulatorConfigChanged",t.Ba)}function Eh(t,e){t.aa=e,as(t.a,Ke.SDK_VERSION?Cr(Ke.SDK_VERSION,t.aa):null)}function Sh(t,e){t.ja&&ln(t.ja,"frameworkChanged",t.Oa),(t.ja=e)&&un(e,"frameworkChanged",t.Oa)}function kh(t){try{return Ke.app(t.m).auth()}catch(e){throw new T("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function Ch(t){t.J||t.D.b||(t.D.start(),ln(t,"tokenChanged",t.ba),un(t,"tokenChanged",t.ba))}function Nh(t){ln(t,"tokenChanged",t.ba),t.D.stop()}function Ah(t,e){t.Aa=e,$r(t,"_lat",e)}function Ph(t){for(var e=[],n=0;n<t.W.length;n++)e.push(t.W[n](t));return Ae(e).then((function(){return t}))}function Rh(t){t.b&&!t.P&&(t.P=!0,Oc(t.b,t))}function Dh(t,e){Yr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new mh(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function xh(){}function Oh(t){return ke().then((function(){if(t.J)throw new T("app-deleted")}))}function Lh(t){return K(t.providerData,(function(t){return t.providerId}))}function Mh(t,e){e&&(Fh(t,e.providerId),t.providerData.push(e))}function Fh(t,e){G(t.providerData,(function(t){return t.providerId==e}))}function Uh(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&$r(t,e,n)}function jh(t,e){t!=e&&(Yr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?$r(t,"metadata",function(t){return new mh(t.a,t.b)}(e.metadata)):$r(t,"metadata",new mh),V(e.providerData,(function(e){Mh(t,e)})),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.h,e.h),$r(t,"refreshToken",t.h.a),lh(t.S,e.S.b))}function qh(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return ru(t.a,Os,{idToken:e}).then(b(t.Kc,t))}(t,e).then((function(){return n||Uh(t,"isAnonymous",!1),e}))}))}function Vh(t,e){e[Ja]&&t.Aa!=e[Ja]&&(gh(t.h,e),t.dispatchEvent(new ch("tokenChanged")),Ah(t,e[Ja]),Uh(t,"refreshToken",t.h.a))}function Bh(t,e){return qh(t).then((function(){if(H(Lh(t),e))return Ph(t).then((function(){throw new T("provider-already-linked")}))}))}function Kh(t,e,n){return Xr({user:t,credential:Uo(e),additionalUserInfo:e=$i(e),operationType:n})}function Wh(t,e){return Vh(t,e),t.reload().then((function(){return t}))}function Hh(t,e,n,r,i){if(!Rr())return Ce(new T("operation-not-supported-in-this-environment"));if(t.i&&!i)return Ce(t.i);var o=Qi(n.providerId),a=Ur(t.uid+":::"),s=null;(!Or()||br())&&t.s&&n.isOAuthProvider&&(s=mu(t.s,t.l,t.m,e,n,null,a,Ke.SDK_VERSION||null,null,null,t.tenantId,t.u));var u=dr(s,o&&o.va,o&&o.ua);return r=r().then((function(){if(Gh(t),!i)return t.I().then((function(){}))})).then((function(){return Uc(t.b,u,e,n,a,!!s,t.tenantId)})).then((function(){return new be((function(n,r){t.na(e,null,new T("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=a,t.c=Vc(t.b,t,e,u,a)}))})).then((function(t){return u&&pr(u),t?Xr(t):null})).o((function(t){throw u&&pr(u),t})),Qh(t,r,i)}function zh(t,e,n,r,i){if(!Rr())return Ce(new T("operation-not-supported-in-this-environment"));if(t.i&&!i)return Ce(t.i);var o=null,a=Ur(t.uid+":::");return r=r().then((function(){if(Gh(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=a,Ph(t)})).then((function(e){return t.ha&&(e=(e=t.ha).b.set(Xh,t.w(),e.a)),e})).then((function(){return qc(t.b,e,n,a,t.tenantId)})).o((function(e){if(o=e,t.ha)return Jh(t.ha);throw o})).then((function(){if(o)throw o})),Qh(t,r,i)}function Gh(t){if(!t.b||!t.P){if(t.b&&!t.P)throw new T("internal-error");throw new T("auth-domain-config-required")}}function Qh(t,e,n){var r=function(t,e,n){return t.i&&!n?(e.cancel(),Ce(t.i)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.i||t.dispatchEvent(new ch("userInvalidated")),t.i=e),e}))}(t,e,n);return t.N.push(r),r.oa((function(){z(t.N,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=oh(e.w(),kh(t),b(t.jc,t))),n||e}))}function $h(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Ja]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new _h(e,n,t);return t.providerData&&V(t.providerData,(function(t){t&&Mh(i,Xr(t))})),t.redirectEventId&&(i.ga=t.redirectEventId),i}function Yh(t){this.a=t,this.b=ec()}eh.prototype.Rc=function(t){var e=this;return t.tb(this.a.a,this.c).then((function(t){var n=ft(e.f);return delete n[nh],delete n[rh],dt(n,t),e.g(n)}))},w(ih,T),ah.prototype.tb=function(t,e,n){return e.type==ao?function(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),dt(n,{phoneVerificationInfo:Lo(t.a)}),ru(e,Ds,n)}))}(this,t,e,n):function(t,e,n){return n.Ha().then((function(n){return dt(n={mfaPendingCredential:n},{phoneVerificationInfo:Lo(t.a)}),ru(e,xs,n)}))}(this,t,e)},w(sh,ah),w(uh,sh),w(ch,$e),(t=hh.prototype).yc=function(t){lh(this,function(t){var e=[];return V(t.mfaInfo||[],(function(t){(t=ti(t))&&e.push(t)})),e}(t.hd))},t.Sb=function(){return this.a.I().then((function(t){return new oo(t,null)}))},t.fc=function(t,e){var n=this,r=this.a.a;return this.Sb().then((function(n){return t.tb(r,n,e)})).then((function(t){return Vh(n.a,t),n.a.reload()}))},t.bd=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return ru(r,nu,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=B(e.b,(function(t){return t.uid!=n}));return lh(e,r),Vh(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},t.w=function(){return{multiFactor:{enrolledFactors:K(this.b,(function(t){return t.w()}))}}},fh.prototype.start=function(){this.a=this.c,ph(this,!0)},fh.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},dh.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},dh.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Ce(new T("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?yh(this,{grant_type:"refresh_token",refresh_token:this.a}):ke(null):ke({accessToken:this.b.toString(),refreshToken:this.a})},mh.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},w(_h,_n),_h.prototype.xa=function(t){this.za=t,rs(this.a,t)},_h.prototype.la=function(){return this.za},_h.prototype.Ga=function(){return $(this.aa)},_h.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())},$r(_h.prototype,"providerId","firebase"),(t=_h.prototype).reload=function(){var t=this;return Qh(this,Oh(this).then((function(){return qh(t).then((function(){return Ph(t)})).then(xh)})))},t.oc=function(t){return this.I(t).then((function(t){return new th(t)}))},t.I=function(t){var e=this;return Qh(this,Oh(this).then((function(){return e.h.getToken(t)})).then((function(t){if(!t)throw new T("internal-error");return t.accessToken!=e.Aa&&(Ah(e,t.accessToken),e.dispatchEvent(new ch("tokenChanged"))),Uh(e,"refreshToken",t.refreshToken),t.accessToken})))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new T("internal-error");Dh(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?K(t,(function(t){return new bh(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)Mh(this,e[n]);Uh(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new ch("userReloaded",{hd:t}))},t.Lc=function(t){return Gr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(t)},t.ub=function(t){var e=this,n=null;return Qh(this,t.c(this.a,this.uid).then((function(t){return Vh(e,t),n=Kh(e,t,"reauthenticate"),e.i=null,e.reload()})).then((function(){return n})),!0)},t.Cc=function(t){return Gr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(t)},t.rb=function(t){var e=this,n=null;return Qh(this,Bh(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=Kh(e,t,"link"),Wh(e,t)})).then((function(){return n})))},t.Dc=function(t,e){var n=this;return Qh(this,Bh(this,"phone").then((function(){return Zc(kh(n),t,e,b(n.rb,n))})))},t.Mc=function(t,e){var n=this;return Qh(this,ke().then((function(){return Zc(kh(n),t,e,b(n.ub,n))})),!0)},t.Cb=function(t){var e=this;return Qh(this,this.I().then((function(n){return e.a.Cb(n,t)})).then((function(t){return Vh(e,t),e.reload()})))},t.ed=function(t){var e=this;return Qh(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return Vh(e,t),e.reload()})))},t.Db=function(t){var e=this;return Qh(this,this.I().then((function(n){return e.a.Db(n,t)})).then((function(t){return Vh(e,t),e.reload()})))},t.Eb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Oh(this);var e=this;return Qh(this,this.I().then((function(n){return e.a.Eb(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return Vh(e,t),Uh(e,"displayName",t.displayName||null),Uh(e,"photoURL",t.photoUrl||null),V(e.providerData,(function(t){"password"===t.providerId&&($r(t,"displayName",e.displayName),$r(t,"photoURL",e.photoURL))})),Ph(e)})).then(xh))},t.cd=function(t){var e=this;return Qh(this,qh(this).then((function(n){return H(Lh(e),t)?function(t,e,n){return ru(t,As,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return V(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),V(Lh(e),(function(t){n[t]||Fh(e,t)})),n[Mo.PROVIDER_ID]||$r(e,"phoneNumber",null),Ph(e)})):Ph(e).then((function(){throw new T("no-such-provider")}))})))},t.delete=function(){var t=this;return Qh(this,this.I().then((function(e){return ru(t.a,Ns,{idToken:e})})).then((function(){t.dispatchEvent(new ch("userDeleted"))}))).then((function(){for(var e=0;e<t.N.length;e++)t.N[e].cancel("app-deleted");Ih(t,null),Th(t,null),Sh(t,null),t.N=[],t.J=!0,Nh(t),$r(t,"refreshToken",null),t.b&&Lc(t.b,t)}))},t.Gb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?b(this.Lb,this):"reauthViaPopup"==t&&e==(this.g||null)?b(this.Mb,this):"linkViaRedirect"==t&&(this.ga||null)==e?b(this.Lb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?b(this.Mb,this):null},t.Ec=function(t){var e=this;return Hh(this,"linkViaPopup",t,(function(){return Bh(e,t.providerId).then((function(){return Ph(e)}))}),!1)},t.Nc=function(t){return Hh(this,"reauthViaPopup",t,(function(){return ke()}),!0)},t.Fc=function(t){var e=this;return zh(this,"linkViaRedirect",t,(function(){return Bh(e,t.providerId)}),!1)},t.Oc=function(t){return zh(this,"reauthViaRedirect",t,(function(){return ke()}),!0)},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Qh(this,this.I().then((function(n){return ws(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=Kh(i,t,"link"),Wh(i,t)})).then((function(){return o})))},t.Mb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Qh(this,ke().then((function(){return co(Is(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=Kh(i,t,"reauthenticate"),Vh(i,t),i.i=null,i.reload()})).then((function(){return o})),!0)},t.vb=function(t){var e=this,n=null;return Qh(this,this.I().then((function(e){return n=e,void 0===t||lt(t)?{}:ji(new Ai(t))})).then((function(t){return e.a.vb(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.Fb=function(t,e){var n=this,r=null;return Qh(this,this.I().then((function(t){return r=t,void 0===e||lt(e)?{}:ji(new Ai(e))})).then((function(e){return n.a.Fb(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},t.jc=function(t){var e=null,n=this;return Qh(this,t=co(ke(t),n.uid).then((function(t){return e=Kh(n,t,"reauthenticate"),Vh(n,t),n.i=null,n.reload()})).then((function(){return e})),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&dt(t,this.metadata.w()),V(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),dt(t,this.S.w()),t};var Xh={name:"redirectUser",F:"session"};function Jh(t){return ic(t.b,Xh,t.a)}function Zh(t){this.a=t,this.b=ec(),this.c=null,this.f=function(t){var e=nl("local"),n=nl("session"),r=nl("none");return function(t,e,n){var r=rc(e,n),i=nc(t,e.F);return t.get(e,n).then((function(o){var s=null;try{s=Fr(a.localStorage.getItem(r))}catch(u){}if(s&&!o)return a.localStorage.removeItem(r),t.set(e,s,n);s&&o&&"localStorage"!=i.type&&a.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(el,t.a).then((function(t){return t?nl(t):e}))}))}))})).then((function(e){return t.c=e,tl(t,e.F)})).o((function(){t.c||(t.c=e)}))}(this),this.b.addListener(nl("local"),this.a,b(this.g,this))}function tl(t,e){var n,r=[];for(n in Zu)Zu[n]!==e&&r.push(ic(t.b,nl(Zu[n]),t.a));return r.push(ic(t.b,el,t.a)),function(t){return new be((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},a=function(t){n(t)},s=0;s<t.length;s++)Ne(t[s],_(o,s),a);else e(i)}))}(r)}Zh.prototype.g=function(){var t=this,e=nl("local");al(this,(function(){return ke().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return tl(t,"local").then((function(){t.c=e}))}))}))};var el={name:"persistence",F:"session"};function nl(t){return{name:"authUser",F:t}}function rl(t,e){return al(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function il(t){return al(t,(function(){return ic(t.b,t.c,t.a)}))}function ol(t,e,n){return al(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),$h(t||{})}))}))}function al(t,e){return t.f=t.f.then(e,e),t.f}function sl(t){if(this.l=!1,$r(this,"settings",new Xc),$r(this,"app",t),!gl(this).options||!gl(this).options.apiKey)throw new T("invalid-api-key");t=Ke.SDK_VERSION?Cr(Ke.SDK_VERSION):null,this.a=new Ya(gl(this).options&&gl(this).options.apiKey,A(S),t),this.P=[],this.s=[],this.N=[],this.Pa=Ke.INTERNAL.createSubscribe(b(this.zc,this)),this.W=void 0,this.ib=Ke.INTERNAL.createSubscribe(b(this.Ac,this)),dl(this,null),this.i=new Zh(gl(this).options.apiKey+":"+gl(this).name),this.D=new Yh(gl(this).options.apiKey+":"+gl(this).name),this.$=_l(this,function(t){var e=gl(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Xh,t.a).then((function(t){return t&&e&&(t.authDomain=e),$h(t||{})}))}(t.D,gl(t).options.authDomain).then((function(e){return(t.m=e)&&(e.ha=t.D),Jh(t.D)}));return _l(t,e)}(t).then((function(){return ol(t.i,e,t.R)})).then((function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then((function(){return rl(t.i,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:il(t.i)}))):null})).then((function(e){dl(t,e||null)}));return _l(t,n)}(this)),this.h=_l(this,function(t){return t.$.then((function(){return fl(t)})).o((function(){})).then((function(){if(!t.l)return t.ja()})).o((function(){})).then((function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(nl("local"),e.a,t.ja)}}))}(this)),this.ba=!1,this.ja=b(this.Zc,this),this.Ba=b(this.da,this),this.qa=b(this.mc,this),this.za=b(this.wc,this),this.Aa=b(this.xc,this),this.b=null,function(t){var e=gl(t).options.authDomain,n=gl(t).options.apiKey;e&&Rr()&&(t.Oa=t.$.then((function(){if(!t.l){if(t.b=Wc(e,n,gl(t).name,t.R),Oc(t.b,t),yl(t)&&Rh(yl(t)),t.m){Rh(t.m);var r=t.m;r.xa(t.la()),Ih(r,t),Eh(r=t.m,t.J),Sh(r,t),wh(r=t.m,t.R),Th(r,t),t.m=null}return t.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=b(this.delete,this),this.INTERNAL.logFramework=b(this.Gc,this),this.u=0,_n.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.xa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.zb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.R){var t=Un(this.R.url);t=Xr({protocol:t.c,host:t.a,port:t.g,options:Xr({disableWarnings:this.R.ec})})}else t=null;return t},enumerable:!1})}(this),this.J=[],this.R=null}function ul(t){$e.call(this,"languageCodeChanged"),this.h=t}function cl(t){$e.call(this,"emulatorConfigChanged"),this.c=t}function hl(t){$e.call(this,"frameworkChanged"),this.f=t}function ll(t){return t.Oa||Ce(new T("auth-domain-config-required"))}function fl(t){if(!Rr())return Ce(new T("operation-not-supported-in-this-environment"));var e=ll(t).then((function(){return t.b.ra()})).then((function(t){return t?Xr(t):null}));return _l(t,e)}function pl(t,e){var n={};return n.apiKey=gl(t).options.apiKey,n.authDomain=gl(t).options.authDomain,n.appName=gl(t).name,t.R&&(n.emulatorConfig=t.R),t.$.then((function(){return function(t,e,n,r){var i=new _h(t,e);return n&&(i.ha=n),r&&Eh(i,r),i.reload().then((function(){return i}))}(n,e,t.D,t.Ga())})).then((function(e){return yl(t)&&e.uid==yl(t).uid?(jh(yl(t),e),t.da(e)):(dl(t,e),Rh(e),t.da(e))})).then((function(){bl(t)}))}function dl(t,e){yl(t)&&(function(t,e){G(t.W,(function(t){return t==e}))}(yl(t),t.Ba),ln(yl(t),"tokenChanged",t.qa),ln(yl(t),"userDeleted",t.za),ln(yl(t),"userInvalidated",t.Aa),Nh(yl(t))),e&&(e.W.push(t.Ba),un(e,"tokenChanged",t.qa),un(e,"userDeleted",t.za),un(e,"userInvalidated",t.Aa),0<t.u&&Ch(e)),$r(t,"currentUser",e),e&&(e.xa(t.la()),Ih(e,t),Eh(e,t.J),Sh(e,t),wh(e,t.R),Th(e,t))}function vl(t,e){var n=null,r=null;return _l(t,e.then((function(e){return n=Uo(e),r=$i(e),pl(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=oh(e.w(),t,b(t.kc,t))),n||e})).then((function(){return Xr({user:yl(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function gl(t){return t.app}function yl(t){return t.currentUser}function ml(t){return yl(t)&&yl(t)._lat||null}function bl(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](ml(t));if(t.W!==t.getUid()&&t.N.length)for(t.W=t.getUid(),e=0;e<t.N.length;e++)t.N[e]&&t.N[e](ml(t))}}function _l(t,e){return t.P.push(e),e.oa((function(){z(t.P,e)})),e}function wl(){}function Il(){this.a={},this.b=1e12}Zh.prototype.yb=function(t){var e=null,n=this;return function(t){var e=new T("invalid-persistence-type"),n=new T("unsupported-persistence-type");t:{for(r in Zu)if(Zu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(wr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Du()&&"none"!==t)throw n;break;default:if(!Pr()&&"none"!==t)throw n}}(t),al(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(r){return e=r,tl(n,t)})).then((function(){if(n.c=nl(t),e)return n.b.set(n.c,e,n.a)})):ke()}))},w(sl,_n),w(ul,$e),w(cl,$e),w(hl,$e),(t=sl.prototype).yb=function(t){return _l(this,t=this.i.yb(t))},t.xa=function(t){this.aa===t||this.l||(this.aa=t,rs(this.a,this.aa),this.dispatchEvent(new ul(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=a.navigator;this.xa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.R){if(!/^https?:\/\//.test(t))throw new T("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(t){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),a.document&&!t&&yr().then((function(){var t=a.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#b50000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),a.document.body.appendChild(t)}))})(e=!!e&&!!e.disableWarnings),this.R={url:t,ec:e},this.settings.jb=!0,is(this.a,this.R),this.dispatchEvent(new cl(this.R))}},t.Gc=function(t){this.J.push(t),as(this.a,Ke.SDK_VERSION?Cr(Ke.SDK_VERSION,this.J):null),this.dispatchEvent(new hl(this.J))},t.Ga=function(){return $(this.J)},t.zb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:gl(this).options.apiKey,authDomain:gl(this).options.authDomain,appName:gl(this).name,currentUser:yl(this)&&yl(this).w()}},t.Gb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?b(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return vl(i,_s(i.a,o))}))},t.Xc=function(t){if(!Rr())return Ce(new T("operation-not-supported-in-this-environment"));var e=this,n=Qi(t.providerId),r=Ur(),i=null;(!Or()||br())&&gl(this).options.authDomain&&t.isOAuthProvider&&(i=mu(gl(this).options.authDomain,gl(this).options.apiKey,gl(this).name,"signInViaPopup",t,null,r,Ke.SDK_VERSION||null,null,null,this.T(),this.R));var o=dr(i,n&&n.va,n&&n.ua);return _l(this,n=ll(this).then((function(n){return Uc(n,o,"signInViaPopup",t,r,!!i,e.T())})).then((function(){return new be((function(t,n){e.na("signInViaPopup",null,new T("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=r,e.c=Vc(e.b,e,"signInViaPopup",o,r)}))})).then((function(t){return o&&pr(o),t?Xr(t):null})).o((function(t){throw o&&pr(o),t})))},t.Yc=function(t){if(!Rr())return Ce(new T("operation-not-supported-in-this-environment"));var e=this;return _l(this,ll(this).then((function(){return function(t){return al(t,(function(){return t.b.set(el,t.c.F,t.a)}))}(e.i)})).then((function(){return qc(e.b,"signInViaRedirect",t,void 0,e.T())})))},t.ra=function(){var t=this;return fl(this).then((function(e){return t.b&&Gc(t.b.b),e})).o((function(e){throw t.b&&Gc(t.b.b),e}))},t.dd=function(t){if(!t)return Ce(new T("null-user"));if(this.S!=t.tenantId)return Ce(new T("tenant-id-mismatch"));var e=this,n={};n.apiKey=gl(this).options.apiKey,n.authDomain=gl(this).options.authDomain,n.appName=gl(this).name;var r=function(t,e,n,r){var i=t.h,o={};return o[Ja]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new _h(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&Eh(e,r),jh(e,t),e}(t,n,e.D,e.Ga());return _l(this,this.h.then((function(){if(gl(e).options.apiKey!=t.l)return r.reload()})).then((function(){return yl(e)&&t.uid==yl(e).uid?(jh(yl(e),t),e.da(t)):(dl(e,r),Rh(r),e.da(r))})).then((function(){bl(e)})))},t.Bb=function(){var t=this;return _l(this,this.h.then((function(){return t.b&&Gc(t.b.b),yl(t)?(dl(t,null),il(t.i).then((function(){bl(t)}))):ke()})))},t.Zc=function(){var t=this;return ol(this.i,gl(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=yl(t)&&e){n=yl(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return jh(yl(t),e),yl(t).I();(yl(t)||e)&&(dl(t,e),e&&(Rh(e),e.ha=t.D),t.b&&Oc(t.b,t),bl(t))}}))},t.da=function(t){return rl(this.i,t)},t.mc=function(){bl(this),this.da(yl(this))},t.wc=function(){this.Bb()},t.xc=function(){this.Bb()},t.kc=function(t){var e=this;return this.h.then((function(){return vl(e,ke(t))}))},t.zc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(yl(e))}))},t.Ac=function(t){var e=this;!function(t,e){t.N.push(e),_l(t,t.h.then((function(){!t.l&&H(t.N,e)&&t.W!==t.getUid()&&(t.W=t.getUid(),e(ml(t)))})))}(this,(function(){t.next(yl(e))}))},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"==typeof t?t(yl(r)):"function"==typeof t.next&&t.next(yl(r))})),this.Pa(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.W=r.getUid(),"function"==typeof t?t(yl(r)):"function"==typeof t.next&&t.next(yl(r))})),this.ib(t,e,n)},t.nc=function(t){var e=this;return _l(this,this.h.then((function(){return yl(e)?yl(e).I(t).then((function(t){return{accessToken:t}})):null})))},t.Tc=function(t){var e=this;return this.h.then((function(){return vl(e,ru(e.a,Xs,{token:t}))})).then((function(t){var n=t.user;return Uh(n,"isAnonymous",!1),e.da(n),t}))},t.Uc=function(t,e){var n=this;return this.h.then((function(){return vl(n,ru(n.a,Js,{email:t,password:e}))}))},t.dc=function(t,e){var n=this;return this.h.then((function(){return vl(n,ru(n.a,ks,{email:t,password:e}))}))},t.ab=function(t){var e=this;return this.h.then((function(){return vl(e,t.ka(e.a))}))},t.Sc=function(t){return Gr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(t)},t.Ab=function(){var t=this;return this.h.then((function(){var e=yl(t);if(e&&e.isAnonymous){var n=Xr({providerId:null,isNewUser:!1});return Xr({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return vl(t,t.a.Ab()).then((function(e){var n=e.user;return Uh(n,"isAnonymous",!0),t.da(n),e}))}))},t.getUid=function(){return yl(this)&&yl(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&yl(this)&&Ch(yl(this))},t.Pc=function(t){var e=this;V(this.s,(function(n){n==t&&e.u--})),0>this.u&&(this.u=0),0==this.u&&yl(this)&&Nh(yl(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),_l(this,this.h.then((function(){e.l||H(e.s,t)&&t(ml(e))})))},t.removeAuthTokenListener=function(t){G(this.s,(function(e){return e==t}))},t.delete=function(){this.l=!0;for(var t=0;t<this.P.length;t++)this.P[t].cancel("app-deleted");return this.P=[],this.i&&(t=this.i).b.removeListener(nl("local"),t.a,this.ja),this.b&&(Lc(this.b,this),Gc(this.b.b)),Promise.resolve()},t.hc=function(t){return _l(this,function(t,e){return ru(t,Cs,{identifier:e,continueUri:Dr()?cr():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.a,t))},t.Bc=function(t){return!!Do(t)},t.xb=function(t,e){var n=this;return _l(this,ke().then((function(){var t=new Ai(e);if(!t.c)throw new T("argument-error",Di+" must be true when sending sign in link to email");return ji(t)})).then((function(e){return n.a.xb(t,e)})).then((function(){})))},t.jd=function(t){return this.Sa(t).then((function(t){return t.data.email}))},t.ob=function(t,e){return _l(this,this.a.ob(t,e).then((function(){})))},t.Sa=function(t){return _l(this,this.a.Sa(t).then((function(t){return new ai(t)})))},t.kb=function(t){return _l(this,this.a.kb(t).then((function(){})))},t.wb=function(t,e){var n=this;return _l(this,ke().then((function(){return void 0===e||lt(e)?{}:ji(new Ai(e))})).then((function(e){return n.a.wb(t,e)})).then((function(){})))},t.Wc=function(t,e){return _l(this,Zc(this,t,e,b(this.ab,this)))},t.Vc=function(t,e){var n=this;return _l(this,ke().then((function(){var r=e||cr(),i=Ro(t,r);if(!(r=Do(r)))throw new T("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new T("tenant-id-mismatch");return n.ab(i)})))},wl.prototype.render=function(){},wl.prototype.reset=function(){},wl.prototype.getResponse=function(){},wl.prototype.execute=function(){};var Tl=null;function El(t,e){return(e=Sl(e))&&t.a[e]||null}function Sl(t){return(t=void 0===t?1e12:t)?t.toString():null}function kl(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=se(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():un(this.f,"click",this.i)}function Cl(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function Nl(){}function Al(){}Il.prototype.render=function(t,e){return this.a[this.b.toString()]=new kl(t,e),this.b++},Il.prototype.reset=function(t){var e=El(this,t);t=Sl(t),e&&t&&(e.delete(),delete this.a[t])},Il.prototype.getResponse=function(t){return(t=El(this,t))?t.getResponse():null},Il.prototype.execute=function(t){(t=El(this,t))&&t.execute()},kl.prototype.getResponse=function(){return Cl(this),this.b},kl.prototype.execute=function(){Cl(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(r){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(r){}t.h&&t.execute()}),6e4)}),500))},kl.prototype.delete=function(){Cl(this),this.g=!0,clearTimeout(this.a),this.a=null,ln(this.f,"click",this.i)},$r(Nl,"FACTOR_ID","phone"),Al.prototype.g=function(){return Tl||(Tl=new Il),ke(Tl)},Al.prototype.c=function(){};var Pl=null;function Rl(){this.b=a.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Dl=new gt(_t,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),xl=new Vr(3e4,6e4);Rl.prototype.g=function(t){var e=this;return new be((function(n,r){var i=setTimeout((function(){r(new T("network-request-failed"))}),xl.get());!a.grecaptcha||t!==e.f&&!e.b?(a[e.a]=function(){if(a.grecaptcha){e.f=t;var o=a.grecaptcha.render;a.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(a.grecaptcha)}else clearTimeout(i),r(new T("internal-error"));delete a[e.a]},ke(Ka(Et(Dl,{onload:e.a,hl:t||""}))).o((function(){clearTimeout(i),r(new T("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(a.grecaptcha))}))},Rl.prototype.c=function(){this.b--};var Ol=null;function Ll(t,e,n,r,i,o,s){if($r(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=e,this.g=null,s?(Pl||(Pl=new Al),s=Pl):(Ol||(Ol=new Rl),s=Ol),this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Ul])throw new T("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[jl],!a.document)throw new T("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!se(e)||!this.i&&se(e).hasChildNodes())throw new T("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Ya(t,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var c=this.a[Ml];this.a[Ml]=function(t){if(ql(u,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=Ar(c,a);"function"==typeof e&&e(t)}};var h=this.a[Fl];this.a[Fl]=function(){if(ql(u,null),"function"==typeof h)h();else if("string"==typeof h){var t=Ar(h,a);"function"==typeof t&&t()}}}var Ml="callback",Fl="expired-callback",Ul="sitekey",jl="size";function ql(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(r){}}function Vl(t,e){return t.h.push(e),e.oa((function(){z(t.h,e)})),e}function Bl(t){if(t.J)throw new T("internal-error","RecaptchaVerifier instance has been destroyed.")}function Kl(t,e,n){var r=!1;try{this.b=n||Ke.app()}catch(a){throw new T("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new T("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(a){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(a){}o=Ke.SDK_VERSION?Cr(Ke.SDK_VERSION,o):null,Ll.call(this,n,t,e,(function(){try{var t=i.b.auth().la()}catch(e){t=null}return t}),o,A(S),r)}function Wl(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new T("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=Hl.length)throw new T("internal-error","Argument validator received an unsupported number of arguments.");n=Hl[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new T("argument-error",t+" failed: "+r)}(t=Ll.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=Vl(this,ke().then((function(){if(Dr()&&!_r())return yr();throw new T("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.u())})).then((function(e){return t.g=e,ru(t.s,qs,{})})).then((function(e){t.a[Ul]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},t.render=function(){Bl(this);var t=this;return Vl(this,this.Ia().then((function(){if(null===t.c){var e=t.v;if(!t.i){var n=se(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!ae&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',Vt(a.name),'"'),a.type){o.push(' type="',Vt(a.type),'"');var s={};dt(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=pe(i,o),a&&("string"==typeof a?o.className=a:Array.isArray(a)?o.className=a.join(" "):ue(o,a)),2<r.length&&fe(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){Bl(this);var t=this;return Vl(this,this.render().then((function(e){return new be((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){G(t.l,(function(t){return t==e}))}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},t.reset=function(){Bl(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Bl(this),this.J=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=se(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},w(Kl,Ll);var Hl="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function zl(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"==typeof t}}}function Gl(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"==typeof t}}}function Ql(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:d}}function $l(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"==typeof t}}}function Yl(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function Xl(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ka||!n)}}}function Jl(t,e){return d(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Zl(t){return d(t)&&"string"==typeof t.uid}function tf(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function ef(t,e){for(var n in e){var r=e[n].name;t[r]=of(r,t[n],e[n].j)}}function nf(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:_((function(t){return this[t]}),n),set:_((function(t,e,n,r){Wl(t,[n],[r],!0),this[e]=r}),r,n,e[n].lb),enumerable:!0})}}function rf(t,e,n,r){t[e]=of(e,n,r)}function of(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Wl(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}ef(sl.prototype,{kb:{name:"applyActionCode",j:[zl("code")]},Sa:{name:"checkActionCode",j:[zl("code")]},ob:{name:"confirmPasswordReset",j:[zl("code"),zl("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[zl("email"),zl("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[zl("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[zl("emailLink")]},Hc:{name:"onAuthStateChanged",j:[tf(Ql(),$l(),"nextOrObserver"),$l("opt_error",!0),$l("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[tf(Ql(),$l(),"nextOrObserver"),$l("opt_error",!0),$l("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[zl("email"),tf(Ql("opt_actionCodeSettings",!0),Yl(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[zl("email"),Ql("actionCodeSettings")]},yb:{name:"setPersistence",j:[zl("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[Xl()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[Xl()]},Tc:{name:"signInWithCustomToken",j:[zl("token")]},Uc:{name:"signInWithEmailAndPassword",j:[zl("email"),zl("password")]},Vc:{name:"signInWithEmailLink",j:[zl("email"),zl("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[zl("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[tf({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof _h)}},Yl(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[zl(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[zl("url"),Ql("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[zl("code")]}}),nf(sl.prototype,{lc:{name:"languageCode",lb:tf(zl(),Yl(),"languageCode")},ti:{name:"tenantId",lb:tf(zl(),Yl(),"tenantId")}}),sl.Persistence=Zu,sl.Persistence.LOCAL="local",sl.Persistence.SESSION="session",sl.Persistence.NONE="none",ef(_h.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Gl("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Gl("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[Xl()]},rb:{name:"linkWithCredential",j:[Xl()]},Dc:{name:"linkWithPhoneNumber",j:[zl("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Xl()]},ub:{name:"reauthenticateWithCredential",j:[Xl()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[zl("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[tf(Ql("opt_actionCodeSettings",!0),Yl(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[zl(null,!0)]},cd:{name:"unlink",j:[zl("provider")]},Cb:{name:"updateEmail",j:[zl("email")]},Db:{name:"updatePassword",j:[zl("password")]},ed:{name:"updatePhoneNumber",j:[Xl("phone")]},Eb:{name:"updateProfile",j:[Ql("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[zl("email"),tf(Ql("opt_actionCodeSettings",!0),Yl(null,!0),"opt_actionCodeSettings",!0)]}}),ef(Il.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),ef(wl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),ef(be.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),nf(Xc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:Gl("appVerificationDisabledForTesting")}}),ef(Jc.prototype,{confirm:{name:"confirm",j:[zl("verificationCode")]}}),rf(uo,"fromJSON",(function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[go,Ao,Oo,fo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[tf(zl(),Ql(),"json")]),rf(Po,"credential",(function(t,e){return new No(t,e)}),[zl("email"),zl("password")]),ef(No.prototype,{w:{name:"toJSON",j:[zl(null,!0)]}}),ef(_o.prototype,{Ca:{name:"addScope",j:[zl("scope")]},Ka:{name:"setCustomParameters",j:[Ql("customOAuthParameters")]}}),rf(_o,"credential",wo,[tf(zl(),Ql(),"token")]),rf(Po,"credentialWithLink",Ro,[zl("email"),zl("emailLink")]),ef(Io.prototype,{Ca:{name:"addScope",j:[zl("scope")]},Ka:{name:"setCustomParameters",j:[Ql("customOAuthParameters")]}}),rf(Io,"credential",To,[tf(zl(),Ql(),"token")]),ef(Eo.prototype,{Ca:{name:"addScope",j:[zl("scope")]},Ka:{name:"setCustomParameters",j:[Ql("customOAuthParameters")]}}),rf(Eo,"credential",So,[tf(zl(),tf(Ql(),Yl()),"idToken"),tf(zl(),Yl(),"accessToken",!0)]),ef(ko.prototype,{Ka:{name:"setCustomParameters",j:[Ql("customOAuthParameters")]}}),rf(ko,"credential",Co,[tf(zl(),Ql(),"token"),zl("secret",!0)]),ef(bo.prototype,{Ca:{name:"addScope",j:[zl("scope")]},credential:{name:"credential",j:[tf(zl(),tf(Ql(),Yl()),"optionsOrIdToken"),tf(zl(),Yl(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Ql("customOAuthParameters")]}}),ef(po.prototype,{w:{name:"toJSON",j:[zl(null,!0)]}}),ef(ho.prototype,{w:{name:"toJSON",j:[zl(null,!0)]}}),rf(Mo,"credential",Fo,[zl("verificationId"),zl("verificationCode")]),ef(Mo.prototype,{gb:{name:"verifyPhoneNumber",j:[tf(zl(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?Jl(t.session,ao)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Jl(t.session,so)&&Zl(t.multiFactorHint):t.session&&t.multiFactorUid?Jl(t.session,so)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),ef(xo.prototype,{w:{name:"toJSON",j:[zl(null,!0)]}}),ef(T.prototype,{toJSON:{name:"toJSON",j:[zl(null,!0)]}}),ef(zo.prototype,{toJSON:{name:"toJSON",j:[zl(null,!0)]}}),ef(Ho.prototype,{toJSON:{name:"toJSON",j:[zl(null,!0)]}}),ef(ih.prototype,{toJSON:{name:"toJSON",j:[zl(null,!0)]}}),ef(eh.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}}]}}),ef(hh.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}},zl("displayName",!0)]},bd:{name:"unenroll",j:[tf({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Zl},zl(),"multiFactorInfoIdentifier")]}}),ef(Kl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),rf(_i,"parseLink",Ni,[zl("link")]),rf(Nl,"assertion",(function(t){return new uh(t)}),[Xl("phone")]),function(){if(void 0===Ke||!Ke.INTERNAL||!Ke.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ui,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:si,VERIFY_AND_CHANGE_EMAIL:ci,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:sl,AuthCredential:uo,Error:T};rf(t,"EmailAuthProvider",Po,[]),rf(t,"FacebookAuthProvider",_o,[]),rf(t,"GithubAuthProvider",Io,[]),rf(t,"GoogleAuthProvider",Eo,[]),rf(t,"TwitterAuthProvider",ko,[]),rf(t,"OAuthProvider",bo,[zl("providerId")]),rf(t,"SAMLAuthProvider",mo,[zl("providerId")]),rf(t,"PhoneAuthProvider",Mo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof sl)}}]),rf(t,"RecaptchaVerifier",Kl,[tf(zl(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Ql("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof Ke.app.App)}}]),rf(t,"ActionCodeURL",_i,[]),rf(t,"PhoneMultiFactorGenerator",Nl,[]),Ke.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new sl(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(t){t.getProvider("auth-internal").initialize()}}),Ke.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:b((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:b(t.nc,t),addAuthTokenListener:b(t.cc,t),removeAuthTokenListener:b(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),Ke.registerVersion("@firebase/auth","0.16.8"),Ke.INTERNAL.extendNamespace({User:_h})}()}.apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var We="";function He(t){We=t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze,Ge=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Jt(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Xt(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),Qe=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return te(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),$e=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Ge(e)}}catch(aT){}return new Qe},Ye=$e("localStorage"),Xe=$e("sessionStorage"),Je=new Ne("@firebase/database"),Ze=(ze=1,function(){return ze++}),tn=function(t){var e=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var o=i-55296;r++,At(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),n=new ie;n.update(e);var r=n.digest();return Dt.encodeByteArray(r)},en=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=en.apply(null,i):n+="object"==typeof i?Jt(i):i,n+=" "}return n},nn=null,rn=!0,on=function(t,e){At(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(Je.logLevel=_e.VERBOSE,nn=Je.log.bind(Je),e&&Xe.set("logging_enabled",!0)):"function"==typeof t?nn=t:(nn=null,Xe.remove("logging_enabled"))},an=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===rn&&(rn=!1,null===nn&&!0===Xe.get("logging_enabled")&&on(!0)),nn){var n=en.apply(null,t);nn(n)}},sn=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];an.apply(void 0,kt([t],St(e)))}},un=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+en.apply(void 0,kt([],St(t)));Je.error(n)},cn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+en.apply(void 0,kt([],St(t)));throw Je.error(n),new Error(n)},hn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+en.apply(void 0,kt([],St(t)));Je.warn(n)},ln=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},fn="[MIN_NAME]",pn="[MAX_NAME]",dn=function(t,e){if(t===e)return 0;if(t===fn||e===pn)return-1;if(e===fn||t===pn)return 1;var n=In(t),r=In(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},vn=function(t,e){return t===e?0:t<e?-1:1},gn=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Jt(e))},yn=function(t){if("object"!=typeof t||null===t)return Jt(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=Jt(e[i]),r+=":",r+=yn(t[e[i]]);return r+="}"},mn=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var _n=function(t){At(!ln(t),"Invalid JSON number");var e,n,r,i,o,a=1023;0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),a))+a,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var s=[];for(o=52;o;o-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(e?1:0),s.reverse();var u=s.join(""),c="";for(o=0;o<64;o+=8){var h=parseInt(u.substr(o,8),2).toString(16);1===h.length&&(h="0"+h),c+=h}return c.toLowerCase()};var wn=new RegExp("^-?(0*)\\d{1,10}$"),In=function(t){if(wn.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},Tn=function(t){try{t()}catch(aT){setTimeout((function(){var e=aT.stack||"";throw hn("Exception was thrown by user callback.",e),aT}),Math.floor(0))}},En=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},Sn=function(){function t(t,e){var n=this;this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then((function(t){return n.appCheck=t}))}return t.prototype.getToken=function(t){var e=this;return this.appCheck?this.appCheck.getToken(t):new Promise((function(n,r){setTimeout((function(){e.appCheck?e.getToken(t).then(n,r):n(null)}),0)}))},t.prototype.addTokenChangeListener=function(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then((function(e){return e.addTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){hn('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},t}(),kn=function(){function t(t,e,n){var r=this;this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((function(t){return r.auth_=t}))}return t.prototype.getToken=function(t){var e=this;return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(an("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):new Promise((function(n,r){setTimeout((function(){e.auth_?e.getToken(t).then(n,r):n(null)}),0)}))},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)}))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',hn(t)},t}(),Cn=function(){function t(t){this.accessToken=t}return t.prototype.getToken=function(t){return Promise.resolve({accessToken:this.accessToken})},t.prototype.addTokenChangeListener=function(t){t(this.accessToken)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.OWNER="owner",t}(),Nn=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,An=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===a&&(a=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ye.get("host:"+t)||this._host}return t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Ye.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){var t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return""+t+this.host+"/"+e},t}();function Pn(t,e,n){var r;if(At("string"==typeof e,"typeof type must == string"),At("object"==typeof n,"typeof params must == object"),"websocket"===e)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if("long_polling"!==e)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);var i=[];return bn(n,(function(t,e){i.push(t+"="+e)})),r+i.join("&")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rn=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),te(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Ot(this.counters_)},t}(),Dn={},xn={};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(t){var e=t.toString();return Dn[e]||(Dn[e]=new Rn),Dn[e]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ln=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&Tn((function(){n.onMessage_(t[e])}))},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum];){if("break"===r())break}},t}(),Mn=function(){function t(t,e,n,r,i,o,a){var s=this;this.connId=t,this.repoInfo=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=sn(t),this.stats_=On(e),this.urlFn=function(t){return s.appCheckToken&&(t.ac=s.appCheckToken),Pn(e,"long_polling",t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Ln(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if("complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new Fn((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=St(t,5),i=r[0],o=r[1],a=r[2];if(r[3],r[4],n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"===i)n.id=o,n.password=a;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=St(t,2),i=r[0],o=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)}),(function(){n.onClosed_()}),n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),n.appCheckToken&&(t.ac=n.appCheckToken),"undefined"!=typeof location&&location.hostname&&Nn.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!!t.forceAllow_||!(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Jt(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n,r=(n=Rt(e),Dt.encodeByteArray(n,!0)),i=mn(r,1840),o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},t.prototype.incrementIncomingBytes_=function(t){var e=Jt(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),Fn=function(){function t(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,this.uniqueCallbackIdentifier=Ze(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(o='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(aT){an("frame writing exception"),aT.stack&&an(aT.stack),an(aT)}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||an("No IE domain setting required")}catch(aT){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(i),r()}))},t.prototype.addTag=function(t,e){var n=this;setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){an("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(aT){}}),Math.floor(1))},t}(),Un=null;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */"undefined"!=typeof MozWebSocket?Un=MozWebSocket:"undefined"!=typeof WebSocket&&(Un=WebSocket);var jn=function(){function t(e,n,r,i,o,a,s){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=sn(this.connId),this.stats_=On(n),this.connURL=t.connectionURL_(n,a,s,i),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n,r){var i={v:"5"};return"undefined"!=typeof location&&location.hostname&&Nn.test(location.hostname)&&(i.r="f"),e&&(i.s=e),n&&(i.ls=n),r&&(i.ac=r),Pn(t,"websocket",i)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ye.set("previous_websocket_failure",!0);try{if(Kt());else{var r={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new Un(this.connURL,[],r)}}catch(aT){this.log_("Error instantiating WebSocket.");var i=aT.message||aT.data;return i&&this.log_(i),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Un&&!t.forceDisallow_},t.previouslyFailed=function(){return Ye.isInMemoryStorage||!0===Ye.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){Ye.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Xt(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(At(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Jt(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=mn(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(aT){this.log_("Exception thrown from WebSocket.send():",aT.message||aT.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),qn=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[Mn,jn]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=jn&&jn.isAvailable(),o=i&&!jn.previouslyFailed();if(e.webSocketOnly&&(i||hn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[jn];else{var a=this.transports_=[];try{for(var s=Et(t.ALL_TRANSPORTS),u=s.next();!u.done;u=s.next()){var c=u.value;c&&c.isAvailable()&&a.push(c)}}catch(h){n={error:h}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),Vn=function(){function t(t,e,n,r,i,o,a,s,u,c){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=s,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=sn("c:"+this.id+":"),this.transportManager_=new qn(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=En((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=gn("t",t),n=gn("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=gn("t",t),n=gn("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=gn("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?un("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):un("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&hn("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),En((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):En((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ye.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),Bn=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.refreshAppCheckToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),Kn=function(){function t(t){this.allowedEvents_=t,this.listeners_={},At(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=kt([],St(this.listeners_[t])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){At(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),Wn=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||jt()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return _t(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return At("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(Kn),Hn=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zn(){return new Hn("")}function Gn(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Qn(t){return t.pieces_.length-t.pieceNum_}function $n(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new Hn(t.pieces_,e)}function Yn(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Xn(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function Jn(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Hn(e,0)}function Zn(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Hn)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new Hn(n,0)}function tr(t){return t.pieceNum_>=t.pieces_.length}function er(t,e){var n=Gn(t),r=Gn(e);if(null===n)return e;if(n===r)return er($n(t),$n(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function nr(t,e){for(var n=Xn(t,0),r=Xn(e,0),i=0;i<n.length&&i<r.length;i++){var o=dn(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function rr(t,e){if(Qn(t)!==Qn(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function ir(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(Qn(t)>Qn(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var or=function(t,e){this.errorPrefix_=e,this.parts_=Xn(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=fe(this.parts_[n]);ar(this)};function ar(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+sr(t))}function sr(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ur,cr,hr=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))}),!1),r}return _t(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return At("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(Kn),lr=function(t){function e(n,r,i,o,a,s,u,c){var h=t.call(this)||this;if(h.repoInfo_=n,h.applicationId_=r,h.onDataUpdate_=i,h.onConnectStatus_=o,h.onServerInfoUpdate_=a,h.authTokenProvider_=s,h.appCheckTokenProvider_=u,h.authOverride_=c,h.id=e.nextPersistentConnectionId_++,h.log_=sn("p:"+h.id+":"),h.interruptReasons_={},h.listens=new Map,h.outstandingPuts_=[],h.outstandingGets_=[],h.outstandingPutCount_=0,h.outstandingGetCount_=0,h.onDisconnectRequestQueue_=[],h.connected_=!1,h.reconnectDelay_=1e3,h.maxReconnectDelay_=3e5,h.securityDebugCallback_=null,h.lastSessionId=null,h.establishConnectionTimer_=null,h.visible_=!1,h.requestCBHash_={},h.requestNumber_=0,h.realtime_=null,h.authToken_=null,h.appCheckToken_=null,h.forceTokenRefresh_=!1,h.invalidAuthTokenCount_=0,h.invalidAppCheckTokenCount_=0,h.firstConnection_=!0,h.lastConnectionAttemptTime_=null,h.lastConnectionEstablishedTime_=null,c&&!Kt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return hr.getInstance().on("visible",h.onVisible_,h),-1===n.host.indexOf("fblocal")&&Wn.getInstance().on("online",h.onOnline_,h),h}return _t(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(Jt(i)),At(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this;this.initConnection_();var n=new Mt,r={p:t._path.toString(),q:t._queryObject},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var o=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var t=e.outstandingGets_[o];void 0!==t&&i===t&&(delete e.outstandingGets_[o],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+o+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(o),n.promise},e.prototype.listen=function(t,e,n,r){this.initConnection_();var i=t._queryIdentifier,o=t._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),At(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),At(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,(function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);var a={p:i};t.tag&&(a.q=r._queryObject,a.t=t.tag),a.h=t.hashFn(),this.sendRequest("q",a,(function(a){var s=a.d,u=a.s;e.warnOnListenWarnings_(s,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",a),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,s))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&te(t,"w")){var n=ee(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e._queryParams.getIndex().toString()+'"',i=e._path.toString();hn("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){var e;(t&&40===t.length||"object"==typeof(e=Zt(t).claims)&&!0===e.admin)&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.refreshAppCheckToken=function(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))},e.prototype.tryAuth=function(){var t,e=this;if(this.connected_&&this.authToken_){var n=this.authToken_,r=(t=Zt(n).claims)&&"object"==typeof t&&t.hasOwnProperty("iat")?"auth":"gauth",i={cred:n};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,(function(t){var r=t.s,i=t.d||"error";e.authToken_===n&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}},e.prototype.tryAppCheck=function(){var t=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(e){var n=e.s,r=e.d||"error";"ok"===n?t.invalidAppCheckTokenCount_=0:t.onAppCheckRevoked_(n,r)}))},e.prototype.unlisten=function(t,e){var n=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),At(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t._queryObject,e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(function(t){r&&setTimeout((function(){r(t.s,t.d)}),Math.floor(0))}))},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){this.initConnection_();var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){if("ok"!==t.s){var n=t.d;e.log_("reportStats","Error sending stats: "+n)}}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Jt(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"apc"===t?this.onAppCheckRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):un("Unrecognized action received from server: "+Jt(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;At(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){return It(this,void 0,void 0,(function(){var t,n,r,i,o,a,s,u,c,h,l,f,p,d,v=this;return Tt(this,(function(g){switch(g.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+e.nextConnectionId_++,o=this.lastSessionId,a=!1,s=null,u=function(){s?s.close():(a=!0,r())},c=function(t){At(s,"sendRequest call when we're not connected not allowed."),s.sendRequest(t)},this.realtime_={close:u,sendRequest:c},h=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,g.label=1;case 1:return g.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)])];case 2:return l=St.apply(void 0,[g.sent(),2]),f=l[0],p=l[1],a?an("getToken() completed but was canceled"):(an("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=p&&p.token,s=new Vn(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,(function(t){hn(t+" ("+v.repoInfo_.toString()+")"),v.interrupt("server_kill")}),o)),[3,4];case 3:return d=g.sent(),this.log_("Failed to get token: "+d),a||(this.repoInfo_.nodeAdmin&&hn(d),u()),[3,4];case 4:return[2]}}))}))},e.prototype.interrupt=function(t){an("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){an("Resuming connection for reason: "+t),delete this.interruptReasons_[t],ne(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return yn(t)})).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new Hn(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){an("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onAppCheckRevoked_=function(t,e){an("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth(),this.tryAppCheck();try{for(var i=Et(this.listens.values()),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var s=(n=void 0,Et(a.values())),u=s.next();!u.done;u=s.next()){var c=u.value;this.sendListen_(c)}}catch(f){n={error:f}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}}catch(p){t={error:p}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var h=0;h<this.outstandingPuts_.length;h++)this.outstandingPuts_[h]&&this.sendPut_(h);for(;this.onDisconnectRequestQueue_.length;){var l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}for(h=0;h<this.outstandingGets_.length;h++)this.outstandingGets_[h]&&this.sendGet_(h)},e.prototype.sendConnectStats_=function(){var t={};t["sdk.js."+We.replace(/\./g,"-")]=1,jt()?t["framework.cordova"]=1:Bt()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=Wn.getInstance().currentlyOnline();return ne(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(Bn),fr=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),pr=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new fr(fn,t),r=new fr(fn,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return fr.MIN},t}(),dr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _t(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return ur},set:function(t){ur=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return dn(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Pt("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return fr.MIN},e.prototype.maxPost=function(){return new fr(pn,ur)},e.prototype.makePost=function(t,e){return At("string"==typeof t,"KeyIndex indexValue must always be a string."),new fr(t,ur)},e.prototype.toString=function(){return".key"},e}(pr),vr=new dr,gr=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),yr=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:br.EMPTY_NODE,this.right=null!=o?o:br.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return br.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return br.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),mr=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new yr(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),br=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,yr.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,yr.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new gr(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new gr(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new gr(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new gr(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new mr,t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function _r(t,e){return dn(t.name,e.name)}function wr(t,e){return dn(t,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ir,Tr,Er,Sr=function(t){return"number"==typeof t?"number:"+_n(t):"string:"+t},kr=function(t){if(t.isLeafNode()){var e=t.val();At("string"==typeof e||"number"==typeof e||"object"==typeof e&&te(e,".sv"),"Priority must be a string or number.")}else At(t===cr||t.isEmpty(),"priority of unexpected type.");At(t===cr||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Cr=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,At(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),kr(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return Ir},set:function(t){Ir=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return tr(e)?this:".priority"===Gn(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=Gn(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:(At(".priority"!==r||1===Qn(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild($n(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Sr(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?_n(this.value_):this.value_,this.lazyHash_=tn(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(At(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),o=t.VALUE_TYPE_ORDER.indexOf(r);return At(i>=0,"Unknown leaf type: "+n),At(o>=0,"Unknown leaf type: "+r),i===o?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}();var Nr,Ar,Pr=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _t(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?dn(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return fr.MIN},e.prototype.maxPost=function(){return new fr(pn,new Cr("[PRIORITY-POST]",Er))},e.prototype.makePost=function(t,e){var n=Tr(t);return new fr(e,new Cr("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(pr)),Rr=Math.log(2),Dr=function(){function t(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/Rr,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),xr=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,a,s=r-e;if(0===s)return null;if(1===s)return o=t[e],a=n?n(o):o,new yr(a,o.node,yr.BLACK,null,null);var u=parseInt(s/2,10)+e,c=i(e,u),h=i(u+1,r);return o=t[u],a=n?n(o):o,new yr(a,o.node,yr.BLACK,c,h)},o=function(e){for(var r=null,o=null,a=t.length,s=function(e,r){var o=a-e,s=a;a-=e;var c=i(o+1,s),h=t[o],l=n?n(h):h;u(new yr(l,h.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var h=e.nextBitIsOne(),l=Math.pow(2,e.count-(c+1));h?s(l,yr.BLACK):(s(l,yr.BLACK),s(l,yr.RED))}return o}(new Dr(t.length));return new br(r||e,o)},Or={},Lr=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return At(Or&&Pr,"ChildrenNode.ts has not been loaded"),Nr=Nr||new t({".priority":Or},{".priority":Pr})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=ee(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof br?e:null},t.prototype.hasIndex=function(t){return te(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){At(e!==vr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],o=!1,a=n.getIterator(fr.Wrap),s=a.getNext();s;)o=o||e.isDefinedOn(s.node),i.push(s),s=a.getNext();r=o?xr(i,e.getCompare()):Or;var u=e.toString(),c=wt({},this.indexSet_);c[u]=e;var h=wt({},this.indexes_);return h[u]=r,new t(h,c)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(re(this.indexes_,(function(t,i){var o=ee(r.indexSet_,i);if(At(o,"Missing index implementation for "+i),t===Or){if(o.isDefinedOn(e.node)){for(var a=[],s=n.getIterator(fr.Wrap),u=s.getNext();u;)u.name!==e.name&&a.push(u),u=s.getNext();return a.push(e),xr(a,o.getCompare())}return Or}var c=n.get(e.name),h=t;return c&&(h=h.remove(new fr(e.name,c))),h.insert(e,e.node)})),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(re(this.indexes_,(function(t){if(t===Or)return t;var r=n.get(e.name);return r?t.remove(new fr(e.name,r)):t})),this.indexSet_)},t}(),Mr=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&kr(this.priorityNode_),this.children_.isEmpty()&&At(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return Ar||(Ar=new t(new br(wr),null,Lr.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||Ar},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?Ar:e},t.prototype.getChild=function(t){var e=Gn(t);return null===e?this:this.getImmediateChild(e).getChild($n(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(At(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new fr(e,n),i=void 0,o=void 0;n.isEmpty()?(i=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),o=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?Ar:this.priorityNode_;return new t(i,a,o)},t.prototype.updateChild=function(t,e){var n=Gn(t);if(null===n)return e;At(".priority"!==Gn(t)||1===Qn(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild($n(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Pr,(function(a,s){n[a]=s.val(e),r++,o&&t.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1})),!e&&o&&i<2*r){var a=[];for(var s in n)a[s]=n[s];return a}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Sr(this.getPriority().val())+":"),this.forEachChild(Pr,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":tn(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new fr(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new fr(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new fr(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getIteratorFrom(t.name,fr.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getReverseIteratorFrom(t.name,fr.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Fr?-1:0},t.prototype.withIndex=function(e){if(e===vr||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===vr||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Pr),r=e.getIterator(Pr),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===vr?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),Fr=new(function(t){function e(){return t.call(this,new br(wr),Mr.EMPTY_NODE,Lr.Default)||this}return _t(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return Mr.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(Mr));Object.defineProperties(fr,{MIN:{value:new fr(fn,Mr.EMPTY_NODE)},MAX:{value:new fr(pn,Fr)}}),dr.__EMPTY_NODE=Mr.EMPTY_NODE,Cr.__childrenNodeConstructor=Mr,cr=Fr,function(t){Er=t}(Fr);function Ur(t,e){if(void 0===e&&(e=null),null===t)return Mr.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),At(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Cr(t,Ur(e));if(t instanceof Array){var n=Mr.EMPTY_NODE;return bn(t,(function(e,r){if(te(t,e)&&"."!==e.substring(0,1)){var i=Ur(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}})),n.updatePriority(Ur(e))}var r=[],i=!1;if(bn(t,(function(t,e){if("."!==t.substring(0,1)){var n=Ur(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new fr(t,n)))}})),0===r.length)return Mr.EMPTY_NODE;var o=xr(r,_r,(function(t){return t.name}),wr);if(i){var a=xr(r,Pr.getCompare());return new Mr(o,Ur(e),new Lr({".priority":a},{".priority":Pr}))}return new Mr(o,Ur(e),Lr.Default)}!function(t){Tr=t}(Ur);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var jr,qr,Vr=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,At(!tr(e)&&".priority"!==Gn(e),"Can't create PathIndex with empty path or .priority key"),n}return _t(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?dn(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=Ur(t),r=Mr.EMPTY_NODE.updateChild(this.indexPath_,n);return new fr(e,r)},e.prototype.maxPost=function(){var t=Mr.EMPTY_NODE.updateChild(this.indexPath_,Fr);return new fr(pn,t)},e.prototype.toString=function(){return Xn(this.indexPath_,0).join("/")},e}(pr),Br=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _t(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?dn(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return fr.MIN},e.prototype.maxPost=function(){return fr.MAX},e.prototype.makePost=function(t,e){var n=Ur(t);return new fr(e,n)},e.prototype.toString=function(){return".value"},e}(pr)),Kr="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Wr=(jr=0,qr=[],function(t){var e,n=t===jr;jr=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=Kr.charAt(t%64),t=Math.floor(t/64);At(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===qr[e];e--)qr[e]=0;qr[e]++}else for(e=0;e<12;e++)qr[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=Kr.charAt(qr[e]);return At(20===i.length,"nextPushId: Length should be 20."),i}),Hr=function(t){if("2147483647"===t)return"-";var e=In(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return pn;var o=n[i],a=Kr.charAt(Kr.indexOf(o)+1);return n[i]=a,n.slice(0,i+1).join("")},zr=function(t){if("-2147483648"===t)return fn;var e=In(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=Kr.charAt(Kr.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Gr(t){return{type:"value",snapshotNode:t}}function Qr(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function $r(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Yr(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Xr=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,o){At(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange($r(e,a)):At(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Qr(e,n)):o.trackChildChange(Yr(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Pr,(function(t,r){e.hasChild(t)||n.trackChildChange($r(t,r))})),e.isLeafNode()||e.forEachChild(Pr,(function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(Yr(e,r,i))}else n.trackChildChange(Qr(e,r))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?Mr.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),Jr=function(){function t(e){this.indexedFilter_=new Xr(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new fr(e,n))||(n=Mr.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Mr.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(Mr.EMPTY_NODE);var i=this;return e.forEachChild(Pr,(function(t,e){i.matches(new fr(t,e))||(r=r.updateImmediateChild(t,Mr.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),Zr=function(){function t(t){this.rangedFilter_=new Jr(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new fr(e,n))||(n=Mr.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=Mr.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=Mr.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(Mr.EMPTY_NODE);var s=void 0,u=void 0,c=void 0;i=void 0;if(this.reverse_){i=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var h=this.index_.getCompare();c=function(t,e){return h(e,t)}}else i=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var l=!1;i.hasNext();){a=i.getNext();!l&&c(s,a)<=0&&(l=!0),l&&o<this.limit_&&c(a,u)<=0?o++:r=r.updateImmediateChild(a.name,Mr.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o;if(this.reverse_){var a=this.index_.getCompare();o=function(t,e){return a(e,t)}}else o=this.index_.getCompare();var s=t;At(s.numChildren()===this.limit_,"");var u=new fr(e,n),c=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),h=this.rangedFilter_.matches(u);if(s.hasChild(e)){for(var l=s.getImmediateChild(e),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===e||s.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:o(f,u);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(Yr(e,n,l)),s.updateImmediateChild(e,n);null!=i&&i.trackChildChange($r(e,l));var d=s.updateImmediateChild(e,Mr.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(Qr(f.name,f.node)),d.updateImmediateChild(f.name,f.node)):d}return n.isEmpty()?t:h&&o(c,u)>=0?(null!=i&&(i.trackChildChange($r(c.name,c.node)),i.trackChildChange(Qr(e,n))),s.updateImmediateChild(e,n).updateImmediateChild(c.name,Mr.EMPTY_NODE)):t},t}(),ti=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Pr}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return At(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return At(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:fn},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return At(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return At(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:pn},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return At(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Pr},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function ni(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function ri(t,e){var n=t.copy();return n.index_=e,n}function ii(t){var e,n={};return t.isDefault()||(t.index_===Pr?e="$priority":t.index_===Br?e="$value":t.index_===vr?e="$key":(At(t.index_ instanceof Vr,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=Jt(e),t.startSet_&&(n.startAt=Jt(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+Jt(t.indexStartName_))),t.endSet_&&(n.endAt=Jt(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+Jt(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}function oi(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Pr&&(e.i=t.index_.toString()),e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ai=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.repoInfo_=e,o.onDataUpdate_=n,o.authTokenProvider_=r,o.appCheckTokenProvider_=i,o.log_=sn("p:rest:"),o.listens_={},o}return _t(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(At(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())},e.prototype.listen=function(t,n,r,i){var o=this,a=t._path.toString();this.log_("Listen called for "+a+" "+t._queryIdentifier);var s=e.getListenId_(t,r),u={};this.listens_[s]=u;var c=ii(t._queryParams);this.restRequest_(a+".json",c,(function(t,e){var n=e;(404===t&&(n=null,t=null),null===t&&o.onDataUpdate_(a,n,!1,r),ee(o.listens_,s)===u)&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=ii(t._queryParams),r=t._path.toString(),i=new Mt;return this.restRequest_(r+".json",n,(function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))})),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;return void 0===e&&(e={}),e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var o=St(i,2),a=o[0],s=o[1];a&&a.accessToken&&(e.auth=a.accessToken),s&&s.token&&(e.ac=s.token);var u=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+function(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}(e);r.log_("Sending REST request for "+u);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(n&&4===c.readyState){r.log_("REST Response for "+u+" received. status:",c.status,"response:",c.responseText);var t=null;if(c.status>=200&&c.status<300){try{t=Xt(c.responseText)}catch(aT){hn("Failed to parse JSON response for "+u+": "+c.responseText)}n(null,t)}else 401!==c.status&&404!==c.status&&hn("Got unsuccessful REST response for "+u+" Status: "+c.status),n(c.status);n=null}},c.open("GET",u,!0),c.send()}))},e}(Bn),si=function(){function t(){this.rootNode_=Mr.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ui(){return{value:null,children:new Map}}function ci(t,e,n){if(tr(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{var r=Gn(e);t.children.has(r)||t.children.set(r,ui()),ci(t.children.get(r),e=$n(e),n)}}function hi(t,e){if(tr(e))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;var n=t.value;return t.value=null,n.forEachChild(Pr,(function(e,n){ci(t,new Hn(e),n)})),hi(t,e)}if(t.children.size>0){var r=Gn(e);if(e=$n(e),t.children.has(r))hi(t.children.get(r),e)&&t.children.delete(r);return 0===t.children.size}return!0}function li(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach((function(t,n){e(n,t)}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,(function(t,r){li(r,new Hn(e.toString()+"/"+t),n)}))}var fi,pi,di=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=wt({},t);return this.last_&&bn(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),vi=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new di(t);var n=1e4+2e4*Math.random();En(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;bn(e,(function(e,i){i>0&&te(t.statsToReport_,e)&&(n[e]=i,r=!0)})),r&&this.server_.reportStats(n),En(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gi(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(pi=fi||(fi={}))[pi.OVERWRITE=0]="OVERWRITE",pi[pi.MERGE=1]="MERGE",pi[pi.ACK_USER_WRITE=2]="ACK_USER_WRITE",pi[pi.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";var yi,mi=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=fi.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if(tr(this.path)){if(null!=this.affectedTree.value)return At(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new Hn(e));return new t(zn(),n,this.revert)}return At(Gn(this.path)===e,"operationForChild called for unrelated child."),new t($n(this.path),this.affectedTree,this.revert)},t}(),bi=function(){function t(t,e){this.source=t,this.path=e,this.type=fi.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return tr(this.path)?new t(this.source,zn()):new t(this.source,$n(this.path))},t}(),_i=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=fi.OVERWRITE}return t.prototype.operationForChild=function(e){return tr(this.path)?new t(this.source,zn(),this.snap.getImmediateChild(e)):new t(this.source,$n(this.path),this.snap)},t}(),wi=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=fi.MERGE}return t.prototype.operationForChild=function(e){if(tr(this.path)){var n=this.children.subtree(new Hn(e));return n.isEmpty()?null:n.value?new _i(this.source,zn(),n.value):new t(this.source,zn(),n)}return At(Gn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,$n(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),Ii=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(tr(t))return this.isFullyInitialized()&&!this.filtered_;var e=Gn(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),Ti=function(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ei(t,e,n,r,i,o){var a=r.filter((function(t){return t.type===n}));a.sort((function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw Pt("Should only compare child_ events.");var r=new fr(e.childName,e.snapshotNode),i=new fr(n.childName,n.snapshotNode);return t.index_.compare(r,i)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e,n)})),a.forEach((function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,o);i.forEach((function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))}))}))}function Si(t,e){return{eventCache:t,serverCache:e}}function ki(t,e,n,r){return Si(new Ii(e,n,r),t.serverCache)}function Ci(t,e,n,r){return Si(t.eventCache,new Ii(e,n,r))}function Ni(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Ai(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pi=function(){function t(t,e){void 0===e&&(yi||(yi=new br(vn)),e=yi),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return bn(e,(function(t,e){n=n.set(new Hn(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:zn(),value:this.value};if(tr(t))return null;var n=Gn(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue($n(t),e);return null!=i?{path:Zn(new Hn(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(tr(e))return this;var n=Gn(e),r=this.children.get(n);return null!==r?r.subtree($n(e)):new t(null)},t.prototype.set=function(e,n){if(tr(e))return new t(n,this.children);var r=Gn(e),i=(this.children.get(r)||new t(null)).set($n(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(tr(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=Gn(e),r=this.children.get(n);if(r){var i=r.remove($n(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(tr(t))return this.value;var e=Gn(t),n=this.children.get(e);return n?n.get($n(t)):null},t.prototype.setTree=function(e,n){if(tr(e))return n;var r=Gn(e),i=(this.children.get(r)||new t(null)).setTree($n(e),n),o=void 0;return o=i.isEmpty()?this.children.remove(r):this.children.insert(r,i),new t(this.value,o)},t.prototype.fold=function(t){return this.fold_(zn(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(Zn(t,r),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,zn(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(tr(t))return null;var i=Gn(t),o=this.children.get(i);return o?o.findOnPath_($n(t),Zn(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,zn(),e)},t.prototype.foreachOnPath_=function(e,n,r){if(tr(e))return this;this.value&&r(n,this.value);var i=Gn(e),o=this.children.get(i);return o?o.foreachOnPath_($n(e),Zn(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(zn(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(Zn(t,n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t}(),Ri=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new Pi(null))},t}();function Di(t,e,n){if(tr(e))return new Ri(new Pi(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,a=er(i,e);return o=o.updateChild(a,n),new Ri(t.writeTree_.set(i,o))}var s=new Pi(n),u=t.writeTree_.setTree(e,s);return new Ri(u)}function xi(t,e,n){var r=t;return bn(n,(function(t,n){r=Di(r,Zn(e,t),n)})),r}function Oi(t,e){if(tr(e))return Ri.empty();var n=t.writeTree_.setTree(e,new Pi(null));return new Ri(n)}function Li(t,e){return null!=Mi(t,e)}function Mi(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(er(n.path,e)):null}function Fi(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Pr,(function(t,n){e.push(new fr(t,n))})):t.writeTree_.children.inorderTraversal((function(t,n){null!=n.value&&e.push(new fr(t,n.value))})),e}function Ui(t,e){if(tr(e))return t;var n=Mi(t,e);return new Ri(null!=n?new Pi(n):t.writeTree_.subtree(e))}function ji(t){return t.writeTree_.isEmpty()}function qi(t,e){return Vi(zn(),t.writeTree_,e)}function Vi(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal((function(e,i){".priority"===e?(At(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=Vi(Zn(t,e),i,n)})),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(Zn(t,".priority"),r)),n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bi(t,e){return eo(e,t)}function Ki(t,e){var n=t.allWrites.findIndex((function(t){return t.writeId===e}));At(n>=0,"removeWrite called with nonexistent writeId.");var r=t.allWrites[n];t.allWrites.splice(n,1);for(var i=r.visible,o=!1,a=t.allWrites.length-1;i&&a>=0;){var s=t.allWrites[a];s.visible&&(a>=n&&Wi(s,r.path)?i=!1:ir(r.path,s.path)&&(o=!0)),a--}if(i){if(o)return function(t){t.visibleWrites=zi(t.allWrites,Hi,zn()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}(t),!0;r.snap?t.visibleWrites=Oi(t.visibleWrites,r.path):bn(r.children,(function(e){t.visibleWrites=Oi(t.visibleWrites,Zn(r.path,e))}));return!0}return!1}function Wi(t,e){if(t.snap)return ir(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&ir(Zn(t.path,n),e))return!0;return!1}function Hi(t){return t.visible}function zi(t,e,n){for(var r=Ri.empty(),i=0;i<t.length;++i){var o=t[i];if(e(o)){var a=o.path,s=void 0;if(o.snap)ir(n,a)?r=Di(r,s=er(n,a),o.snap):ir(a,n)&&(s=er(a,n),r=Di(r,zn(),o.snap.getChild(s)));else{if(!o.children)throw Pt("WriteRecord should have .snap or .children");if(ir(n,a))r=xi(r,s=er(n,a),o.children);else if(ir(a,n))if(tr(s=er(a,n)))r=xi(r,zn(),o.children);else{var u=ee(o.children,Gn(s));if(u){var c=u.getChild($n(s));r=Di(r,zn(),c)}}}}}return r}function Gi(t,e,n,r,i){if(r||i){var o=Ui(t.visibleWrites,e);if(!i&&ji(o))return n;if(i||null!=n||Li(o,zn())){return qi(zi(t.allWrites,(function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(ir(t.path,e)||ir(e,t.path))}),e),n||Mr.EMPTY_NODE)}return null}var a=Mi(t.visibleWrites,e);if(null!=a)return a;var s=Ui(t.visibleWrites,e);return ji(s)?n:null!=n||Li(s,zn())?qi(s,n||Mr.EMPTY_NODE):null}function Qi(t,e,n,r){return Gi(t.writeTree,t.treePath,e,n,r)}function $i(t,e){return function(t,e,n){var r=Mr.EMPTY_NODE,i=Mi(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Pr,(function(t,e){r=r.updateImmediateChild(t,e)})),r;if(n){var o=Ui(t.visibleWrites,e);return n.forEachChild(Pr,(function(t,e){var n=qi(Ui(o,new Hn(t)),e);r=r.updateImmediateChild(t,n)})),Fi(o).forEach((function(t){r=r.updateImmediateChild(t.name,t.node)})),r}return Fi(Ui(t.visibleWrites,e)).forEach((function(t){r=r.updateImmediateChild(t.name,t.node)})),r}(t.writeTree,t.treePath,e)}function Yi(t,e,n,r){return function(t,e,n,r,i){At(r||i,"Either existingEventSnap or existingServerSnap must exist");var o=Zn(e,n);if(Li(t.visibleWrites,o))return null;var a=Ui(t.visibleWrites,o);return ji(a)?i.getChild(n):qi(a,i.getChild(n))}(t.writeTree,t.treePath,e,n,r)}function Xi(t,e){return function(t,e){return Mi(t.visibleWrites,e)}(t.writeTree,Zn(t.treePath,e))}function Ji(t,e,n,r,i,o){return function(t,e,n,r,i,o,a){var s,u=Ui(t.visibleWrites,e),c=Mi(u,zn());if(null!=c)s=c;else{if(null==n)return[];s=qi(u,n)}if((s=s.withIndex(a)).isEmpty()||s.isLeafNode())return[];for(var h=[],l=a.getCompare(),f=o?s.getReverseIteratorFrom(r,a):s.getIteratorFrom(r,a),p=f.getNext();p&&h.length<i;)0!==l(p,r)&&h.push(p),p=f.getNext();return h}(t.writeTree,t.treePath,e,n,r,i,o)}function Zi(t,e,n){return function(t,e,n,r){var i=Zn(e,n),o=Mi(t.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?qi(Ui(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function to(t,e){return eo(Zn(t.treePath,e),t.writeTree)}function eo(t,e){return{treePath:t,writeTree:e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var no=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;At("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),At(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,Yr(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,$r(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,Qr(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw Pt("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,Yr(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),ro=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),io=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new Ii(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Zi(this.writes_,t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ai(this.viewCache_),i=Ji(this.writes_,r,e,1,n,t);return 0===i.length?null:i[0]},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oo(t,e,n,r,i){var o,a,s=new no;if(n.type===fi.OVERWRITE){var u=n;u.source.fromUser?o=uo(t,e,u.path,u.snap,r,i,s):(At(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!tr(u.path),o=so(t,e,u.path,u.snap,r,i,a,s))}else if(n.type===fi.MERGE){var c=n;c.source.fromUser?o=function(t,e,n,r,i,o,a){var s=e;return r.foreach((function(r,u){var c=Zn(n,r);co(e,Gn(c))&&(s=uo(t,s,c,u,i,o,a))})),r.foreach((function(r,u){var c=Zn(n,r);co(e,Gn(c))||(s=uo(t,s,c,u,i,o,a))})),s}(t,e,c.path,c.children,r,i,s):(At(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=lo(t,e,c.path,c.children,r,i,a,s))}else if(n.type===fi.ACK_USER_WRITE){var h=n;o=h.revert?function(t,e,n,r,i,o){var a;if(null!=Xi(r,n))return e;var s=new io(r,e,i),u=e.eventCache.getNode(),c=void 0;if(tr(n)||".priority"===Gn(n)){var h=void 0;if(e.serverCache.isFullyInitialized())h=Qi(r,Ai(e));else{var l=e.serverCache.getNode();At(l instanceof Mr,"serverChildren would be complete if leaf node"),h=$i(r,l)}h=h,c=t.filter.updateFullNode(u,h,o)}else{var f=Gn(n),p=Zi(r,f,e.serverCache);null==p&&e.serverCache.isCompleteForChild(f)&&(p=u.getImmediateChild(f)),(c=null!=p?t.filter.updateChild(u,f,p,$n(n),s,o):e.eventCache.getNode().hasChild(f)?t.filter.updateChild(u,f,Mr.EMPTY_NODE,$n(n),s,o):u).isEmpty()&&e.serverCache.isFullyInitialized()&&(a=Qi(r,Ai(e))).isLeafNode()&&(c=t.filter.updateFullNode(c,a,o))}return a=e.serverCache.isFullyInitialized()||null!=Xi(r,zn()),ki(e,c,a,t.filter.filtersNodes())}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e,h.path,r,i,s):function(t,e,n,r,i,o,a){if(null!=Xi(i,n))return e;var s=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(tr(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return so(t,e,n,u.getNode().getChild(n),i,o,s,a);if(tr(n)){var c=new Pi(null);return u.getNode().forEachChild(vr,(function(t,e){c=c.set(new Hn(t),e)})),lo(t,e,n,c,i,o,s,a)}return e}var h=new Pi(null);return r.foreach((function(t,e){var r=Zn(n,t);u.isCompleteForPath(r)&&(h=h.set(t,u.getNode().getChild(r)))})),lo(t,e,n,h,i,o,s,a)}(t,e,h.path,h.affectedTree,r,i,s)}else{if(n.type!==fi.LISTEN_COMPLETE)throw Pt("Unknown operation type: "+n.type);o=function(t,e,n,r,i){var o=e.serverCache,a=Ci(e,o.getNode(),o.isFullyInitialized()||tr(n),o.isFiltered());return ao(t,a,n,r,ro,i)}(t,e,n.path,r,s)}var l=s.getChanges();return function(t,e,n){var r=e.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Ni(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(Gr(Ni(e)))}}(e,o,l),{viewCache:o,changes:l}}function ao(t,e,n,r,i,o){var a=e.eventCache;if(null!=Xi(r,n))return e;var s=void 0,u=void 0;if(tr(n))if(At(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){var c=Ai(e),h=$i(r,c instanceof Mr?c:Mr.EMPTY_NODE);s=t.filter.updateFullNode(e.eventCache.getNode(),h,o)}else{var l=Qi(r,Ai(e));s=t.filter.updateFullNode(e.eventCache.getNode(),l,o)}else{var f=Gn(n);if(".priority"===f){At(1===Qn(n),"Can't have a priority with additional path components");var p=a.getNode(),d=Yi(r,n,p,u=e.serverCache.getNode());s=null!=d?t.filter.updatePriority(p,d):a.getNode()}else{var v=$n(n),g=void 0;if(a.isCompleteForChild(f)){u=e.serverCache.getNode();var y=Yi(r,n,a.getNode(),u);g=null!=y?a.getNode().getImmediateChild(f).updateChild(v,y):a.getNode().getImmediateChild(f)}else g=Zi(r,f,e.serverCache);s=null!=g?t.filter.updateChild(a.getNode(),f,g,v,i,o):a.getNode()}}return ki(e,s,a.isFullyInitialized()||tr(n),t.filter.filtersNodes())}function so(t,e,n,r,i,o,a,s){var u,c=e.serverCache,h=a?t.filter:t.filter.getIndexedFilter();if(tr(n))u=h.updateFullNode(c.getNode(),r,null);else if(h.filtersNodes()&&!c.isFiltered()){var l=c.getNode().updateChild(n,r);u=h.updateFullNode(c.getNode(),l,null)}else{var f=Gn(n);if(!c.isCompleteForPath(n)&&Qn(n)>1)return e;var p=$n(n),d=c.getNode().getImmediateChild(f).updateChild(p,r);u=".priority"===f?h.updatePriority(c.getNode(),d):h.updateChild(c.getNode(),f,d,p,ro,null)}var v=Ci(e,u,c.isFullyInitialized()||tr(n),h.filtersNodes());return ao(t,v,n,i,new io(i,v,o),s)}function uo(t,e,n,r,i,o,a){var s,u,c=e.eventCache,h=new io(i,e,o);if(tr(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,a),s=ki(e,u,!0,t.filter.filtersNodes());else{var l=Gn(n);if(".priority"===l)u=t.filter.updatePriority(e.eventCache.getNode(),r),s=ki(e,u,c.isFullyInitialized(),c.isFiltered());else{var f=$n(n),p=c.getNode().getImmediateChild(l),d=void 0;if(tr(f))d=r;else{var v=h.getCompleteChild(l);d=null!=v?".priority"===Yn(f)&&v.getChild(Jn(f)).isEmpty()?v:v.updateChild(f,r):Mr.EMPTY_NODE}if(p.equals(d))s=e;else s=ki(e,t.filter.updateChild(c.getNode(),l,d,f,h,a),c.isFullyInitialized(),t.filter.filtersNodes())}}return s}function co(t,e){return t.eventCache.isCompleteForChild(e)}function ho(t,e,n){return n.foreach((function(t,n){e=e.updateChild(t,n)})),e}function lo(t,e,n,r,i,o,a,s){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var u,c=e;u=tr(n)?r:new Pi(null).setTree(n,r);var h=e.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(h.hasChild(n)){var u=ho(0,e.serverCache.getNode().getImmediateChild(n),r);c=so(t,c,new Hn(n),u,i,o,a,s)}})),u.children.inorderTraversal((function(n,r){var u=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!h.hasChild(n)&&!u){var l=ho(0,e.serverCache.getNode().getImmediateChild(n),r);c=so(t,c,new Hn(n),l,i,o,a,s)}})),c}var fo,po=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_._queryParams,i=new Xr(r.getIndex()),o=(n=r).loadsAllData()?new Xr(n.getIndex()):n.hasLimit()?new Zr(n):new Jr(n);this.processor_=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t){return{filter:t}}(o);var a=e.serverCache,s=e.eventCache,u=i.updateFullNode(Mr.EMPTY_NODE,a.getNode(),null),c=o.updateFullNode(Mr.EMPTY_NODE,s.getNode(),null),h=new Ii(u,a.isFullyInitialized(),i.filtersNodes()),l=new Ii(c,s.isFullyInitialized(),o.filtersNodes());this.viewCache_=Si(l,h),this.eventGenerator_=new Ti(this.query_)}return Object.defineProperty(t.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),t}();function vo(t,e){var n=Ai(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!tr(e)&&!n.getImmediateChild(Gn(e)).isEmpty())?n.getChild(e):null}function go(t){return 0===t.eventRegistrations_.length}function yo(t,e,n){var r=[];if(n){At(null==e,"A cancel should cancel all event registrations.");var i=t.query._path;t.eventRegistrations_.forEach((function(t){var e=t.createCancelEvent(n,i);e&&r.push(e)}))}if(e){for(var o=[],a=0;a<t.eventRegistrations_.length;++a){var s=t.eventRegistrations_[a];if(s.matches(e)){if(e.hasAnyCallback()){o=o.concat(t.eventRegistrations_.slice(a+1));break}}else o.push(s)}t.eventRegistrations_=o}else t.eventRegistrations_=[];return r}function mo(t,e,n,r){e.type===fi.MERGE&&null!==e.source.queryId&&(At(Ai(t.viewCache_),"We should always have a full cache before handling merges"),At(Ni(t.viewCache_),"Missing event cache, even though we have a server cache"));var i,o,a=t.viewCache_,s=oo(t.processor_,a,e,n,r);return i=t.processor_,o=s.viewCache,At(o.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),At(o.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),At(s.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,bo(t,s.changes,s.viewCache.eventCache.getNode(),null)}function bo(t,e,n,r){var i=r?[r]:t.eventRegistrations_;return function(t,e,n,r){var i=[],o=[];return e.forEach((function(e){var n;"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push((n=e.childName,{type:"child_moved",snapshotNode:e.snapshotNode,childName:n}))})),Ei(t,i,"child_removed",e,r,n),Ei(t,i,"child_added",e,r,n),Ei(t,i,"child_moved",o,r,n),Ei(t,i,"child_changed",e,r,n),Ei(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,i)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _o,wo=function(){this.views=new Map};function Io(t,e,n,r){var i,o,a=e.source.queryId;if(null!==a){var s=t.views.get(a);return At(null!=s,"SyncTree gave us an op for an invalid query."),mo(s,e,n,r)}var u=[];try{for(var c=Et(t.views.values()),h=c.next();!h.done;h=c.next()){s=h.value;u=u.concat(mo(s,e,n,r))}}catch(l){i={error:l}}finally{try{h&&!h.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}return u}function To(t,e,n,r,i){var o=e._queryIdentifier,a=t.views.get(o);if(!a){var s=Qi(n,i?r:null),u=!1;s?u=!0:r instanceof Mr?(s=$i(n,r),u=!1):(s=Mr.EMPTY_NODE,u=!1);var c=Si(new Ii(s,u,!1),new Ii(r,i,!1));return new po(e,c)}return a}function Eo(t,e,n,r,i,o){var a=To(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,a),function(t,e){t.eventRegistrations_.push(e)}(a,n),function(t,e){var n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Pr,(function(t,e){r.push(Qr(t,e))})),n.isFullyInitialized()&&r.push(Gr(n.getNode())),bo(t,r,n.getNode(),e)}(a,n)}function So(t,e,n,r){var i,o,a=e._queryIdentifier,s=[],u=[],c=Po(t);if("default"===a)try{for(var h=Et(t.views.entries()),l=h.next();!l.done;l=h.next()){var f=St(l.value,2),p=f[0],d=f[1];u=u.concat(yo(d,n,r)),go(d)&&(t.views.delete(p),d.query._queryParams.loadsAllData()||s.push(d.query))}}catch(v){i={error:v}}finally{try{l&&!l.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}else(d=t.views.get(a))&&(u=u.concat(yo(d,n,r)),go(d)&&(t.views.delete(a),d.query._queryParams.loadsAllData()||s.push(d.query)));return c&&!Po(t)&&s.push(new(At(fo,"Reference.ts has not been loaded"),fo)(e._repo,e._path)),{removed:s,events:u}}function ko(t){var e,n,r=[];try{for(var i=Et(t.views.values()),o=i.next();!o.done;o=i.next()){var a=o.value;a.query._queryParams.loadsAllData()||r.push(a)}}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Co(t,e){var n,r,i=null;try{for(var o=Et(t.views.values()),a=o.next();!a.done;a=o.next()){var s=a.value;i=i||vo(s,e)}}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}function No(t,e){if(e._queryParams.loadsAllData())return Ro(t);var n=e._queryIdentifier;return t.views.get(n)}function Ao(t,e){return null!=No(t,e)}function Po(t){return null!=Ro(t)}function Ro(t){var e,n;try{for(var r=Et(t.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.query._queryParams.loadsAllData())return o}}catch(a){e={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Do=1,xo=function(t){this.listenProvider_=t,this.syncPointTree_=new Pi(null),this.pendingWriteTree_={visibleWrites:Ri.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map};function Oo(t,e,n,r,i){return function(t,e,n,r,i){At(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Di(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,i),i?Bo(t,new _i({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function Lo(t,e,n,r){!function(t,e,n,r){At(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=xi(t.visibleWrites,e,n),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r);var i=Pi.fromObject(n);return Bo(t,new wi({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}function Mo(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(Ki(t.pendingWriteTree_,e)){var i=new Pi(null);return null!=r.snap?i=i.set(zn(),!0):bn(r.children,(function(t){i=i.set(new Hn(t),!0)})),Bo(t,new mi(r.path,i,n))}return[]}function Fo(t,e,n){return Bo(t,new _i({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function Uo(t,e,n,r){var i=e._path,o=t.syncPointTree_.get(i),a=[];if(o&&("default"===e._queryIdentifier||Ao(o,e))){var s=So(o,e,n,r);0===o.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(i));var u=s.removed;a=s.events;var c=-1!==u.findIndex((function(t){return t._queryParams.loadsAllData()})),h=t.syncPointTree_.findOnPath(i,(function(t,e){return Po(e)}));if(c&&!h){var l=t.syncPointTree_.subtree(i);if(!l.isEmpty())for(var f=function(t){return t.fold((function(t,e,n){if(e&&Po(e))return[Ro(e)];var r=[];return e&&(r=ko(e)),bn(n,(function(t,e){r=r.concat(e)})),r}))}(l),p=0;p<f.length;++p){var d=f[p],v=d.query,g=Ho(t,d);t.listenProvider_.startListening(Xo(v),zo(t,v),g.hashFn,g.onComplete)}}if(!h&&u.length>0&&!r)if(c){t.listenProvider_.stopListening(Xo(e),null)}else u.forEach((function(e){var n=t.queryToTagMap.get(Go(e));t.listenProvider_.stopListening(Xo(e),n)}));!function(t,e){for(var n=0;n<e.length;++n){var r=e[n];if(!r._queryParams.loadsAllData()){var i=Go(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}(t,u)}return a}function jo(t,e,n){var r=e._path,i=null,o=!1;t.syncPointTree_.foreachOnPath(r,(function(t,e){var n=er(t,r);i=i||Co(e,n),o=o||Po(e)}));var a,s=t.syncPointTree_.get(r);(s?(o=o||Po(s),i=i||Co(s,zn())):(s=new wo,t.syncPointTree_=t.syncPointTree_.set(r,s)),null!=i)?a=!0:(a=!1,i=Mr.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((function(t,e){var n=Co(e,zn());n&&(i=i.updateImmediateChild(t,n))})));var u=Ao(s,e);if(!u&&!e._queryParams.loadsAllData()){var c=Go(e);At(!t.queryToTagMap.has(c),"View does not exist, but we have a tag");var h=Do++;t.queryToTagMap.set(c,h),t.tagToQueryMap.set(h,c)}var l=Eo(s,e,n,Bi(t.pendingWriteTree_,r),i,a);if(!u&&!o){var f=No(s,e);l=l.concat(function(t,e,n){var r=e._path,i=zo(t,e),o=Ho(t,n),a=t.listenProvider_.startListening(Xo(e),i,o.hashFn,o.onComplete),s=t.syncPointTree_.subtree(r);if(i)At(!Po(s.value),"If we're adding a query, it shouldn't be shadowed");else for(var u=s.fold((function(t,e,n){if(!tr(t)&&e&&Po(e))return[Ro(e).query];var r=[];return e&&(r=r.concat(ko(e).map((function(t){return t.query})))),bn(n,(function(t,e){r=r.concat(e)})),r})),c=0;c<u.length;++c){var h=u[c];t.listenProvider_.stopListening(Xo(h),zo(t,h))}return a}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e,f))}return l}function qo(t,e,n){var r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(function(t,n){var r=Co(n,er(t,e));if(r)return r}));return Gi(r,e,i,n,!0)}function Vo(t,e){var n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,(function(t,e){var i=er(t,n);r=r||Co(e,i)}));var i=t.syncPointTree_.get(n);i?r=r||Co(i,zn()):(i=new wo,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,a=o?new Ii(r,!0,!1):null;return function(t){return Ni(t.viewCache_)}(To(i,e,Bi(t.pendingWriteTree_,e._path),o?a.getNode():Mr.EMPTY_NODE,o))}function Bo(t,e){return Ko(e,t.syncPointTree_,null,Bi(t.pendingWriteTree_,zn()))}function Ko(t,e,n,r){if(tr(t.path))return Wo(t,e,n,r);var i=e.get(zn());null==n&&null!=i&&(n=Co(i,zn()));var o=[],a=Gn(t.path),s=t.operationForChild(a),u=e.children.get(a);if(u&&s){var c=n?n.getImmediateChild(a):null,h=to(r,a);o=o.concat(Ko(s,u,c,h))}return i&&(o=o.concat(Io(i,t,r,n))),o}function Wo(t,e,n,r){var i=e.get(zn());null==n&&null!=i&&(n=Co(i,zn()));var o=[];return e.children.inorderTraversal((function(e,i){var a=n?n.getImmediateChild(e):null,s=to(r,e),u=t.operationForChild(e);u&&(o=o.concat(Wo(u,i,a,s)))})),i&&(o=o.concat(Io(i,t,r,n))),o}function Ho(t,e){var n=e.query,r=zo(t,n);return{hashFn:function(){return(function(t){return t.viewCache_.serverCache.getNode()}(e)||Mr.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?function(t,e,n){var r=Qo(t,n);if(r){var i=$o(r),o=i.path,a=i.queryId,s=er(o,e);return Yo(t,o,new bi(gi(a),s))}return[]}(t,n._path,r):function(t,e){return Bo(t,new bi({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n._path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}(e,n);return Uo(t,n,null,i)}}}function zo(t,e){var n=Go(e);return t.queryToTagMap.get(n)}function Go(t){return t._path.toString()+"$"+t._queryIdentifier}function Qo(t,e){return t.tagToQueryMap.get(e)}function $o(t){var e=t.indexOf("$");return At(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Hn(t.substr(0,e))}}function Yo(t,e,n){var r=t.syncPointTree_.get(e);return At(r,"Missing sync point for query tag that we're tracking"),Io(r,n,Bi(t.pendingWriteTree_,e),null)}function Xo(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(At(_o,"Reference.ts has not been loaded"),_o)(t._repo,t._path):t}var Jo=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),Zo=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=Zn(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return qo(this.syncTree_,this.path_)},t}(),ta=function(t,e,n){return t&&"object"==typeof t?(At(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?ea(t[".sv"],e,n):"object"==typeof t[".sv"]?na(t[".sv"],e):void At(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},ea=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:At(!1,"Unexpected server value: "+t)}},na=function(t,e,n){t.hasOwnProperty("increment")||At(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&At(!1,"Unexpected increment value: "+r);var i=e.node();if(At(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var o=i.getValue();return"number"!=typeof o?r:o+r},ra=function(t,e,n,r){return oa(e,new Zo(n,t),r)},ia=function(t,e,n){return oa(t,new Jo(e),n)};function oa(t,e,n){var r,i=t.getPriority().val(),o=ta(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var a=t,s=ta(a.getValue(),e,n);return s!==a.getValue()||o!==a.getPriority().val()?new Cr(s,Ur(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Cr(o))),u.forEachChild(Pr,(function(t,i){var o=oa(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))})),r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var aa=function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n};function sa(t,e){for(var n=e instanceof Hn?e:new Hn(e),r=t,i=Gn(n);null!==i;){var o=ee(r.node.children,i)||{children:{},childCount:0};r=new aa(i,r,o),i=Gn(n=$n(n))}return r}function ua(t){return t.node.value}function ca(t,e){t.node.value=e,da(t)}function ha(t){return t.node.childCount>0}function la(t,e){bn(t.node.children,(function(n,r){e(new aa(n,t,r))}))}function fa(t,e,n,r){n&&!r&&e(t),la(t,(function(t){fa(t,e,!0,r)})),n&&r&&e(t)}function pa(t){return new Hn(null===t.parent?t.name:pa(t.parent)+"/"+t.name)}function da(t){null!==t.parent&&function(t,e,n){var r=function(t){return void 0===ua(t)&&!ha(t)}(n),i=te(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,da(t)):r||i||(t.node.children[e]=n.node,t.node.childCount++,da(t))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t.parent,t.name,t)}var va=/[\[\].#$\/\u0000-\u001F\u007F]/,ga=/[\[\].#$\u0000-\u001F\u007F]/,ya=function(t){return"string"==typeof t&&0!==t.length&&!va.test(t)},ma=function(t){return"string"==typeof t&&0!==t.length&&!ga.test(t)},ba=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!ln(t)||t&&"object"==typeof t&&te(t,".sv")},_a=function(t,e,n,r){r&&void 0===e||wa(ce(t,"value"),e,n)},wa=function(t,e,n){var r=n instanceof Hn?new or(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+sr(r));if("function"==typeof e)throw new Error(t+"contains a function "+sr(r)+" with contents = "+e.toString());if(ln(e))throw new Error(t+"contains "+e.toString()+" "+sr(r));if("string"==typeof e&&e.length>10485760/3&&fe(e)>10485760)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+sr(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,o=!1;if(bn(e,(function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(o=!0,!ya(e)))throw new Error(t+" contains an invalid key ("+e+") "+sr(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var a,s;s=e,(a=r).parts_.length>0&&(a.byteLength_+=1),a.parts_.push(s),a.byteLength_+=fe(s),ar(a),wa(t,n,r),function(t){var e=t.parts_.pop();t.byteLength_-=fe(e),t.parts_.length>0&&(t.byteLength_-=1)}(r)})),i&&o)throw new Error(t+' contains ".value" child '+sr(r)+" in addition to actual children.")}},Ia=function(t,e,n,r){if(!r||void 0!==e){var i=ce(t,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");var o=[];bn(e,(function(t,e){var r=new Hn(t);if(wa(i,e,Zn(n,r)),".priority"===Yn(r)&&!ba(e))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(r)})),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=Xn(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!ya(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(nr);var a=null;for(n=0;n<e.length;n++){if(r=e[n],null!==a&&ir(a,r))throw new Error(t+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}}(i,o)}},Ta=function(t,e,n){if(!n||void 0!==e){if(ln(e))throw new Error(ce(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ba(e))throw new Error(ce(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Ea=function(t,e,n){if(!n||void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(ce(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Sa=function(t,e,n,r){if(!(r&&void 0===n||ya(n)))throw new Error(ce(t,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},ka=function(t,e,n,r){if(!(r&&void 0===n||ma(n)))throw new Error(ce(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ca=function(t,e){if(".info"===Gn(e))throw new Error(t+" failed = Can't modify data under /.info/")},Na=function(t,e){var n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!ya(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),ma(t)}(n))throw new Error(ce(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Aa=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(ce(t,e)+"must be a boolean.")},Pa=function(){this.eventLists_=[],this.recursionDepth_=0};function Ra(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||rr(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function Da(t,e,n){Ra(t,n),Oa(t,(function(t){return rr(t,e)}))}function xa(t,e,n){Ra(t,n),Oa(t,(function(t){return ir(t,e)||ir(e,t)}))}function Oa(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];if(i)e(i.path)?(La(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}n&&(t.eventLists_=[]),t.recursionDepth_--}function La(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();nn&&an("event: "+n.toString()),Tn(r)}}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ma=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Pa,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ui(),this.transactionQueueTree_=new aa,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t}();function Fa(t,e,n){if(t.stats_=On(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new ai(t.repoInfo_,(function(e,n,r,i){qa(t,e,n,r,i)}),t.authTokenProvider_,t.appCheckProvider_),setTimeout((function(){return Va(t,!0)}),0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Jt(n)}catch(aT){throw new Error("Invalid authOverride provided: "+aT)}}t.persistentConnection_=new lr(t.repoInfo_,e,(function(e,n,r,i){qa(t,e,n,r,i)}),(function(e){Va(t,e)}),(function(e){!function(t,e){bn(e,(function(e,n){Ba(t,e,n)}))}(t,e)}),t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}var r,i,o;t.authTokenProvider_.addTokenChangeListener((function(e){t.server_.refreshAuthToken(e)})),t.appCheckProvider_.addTokenChangeListener((function(e){t.server_.refreshAppCheckToken(e.token)})),t.statsReporter_=(r=t.repoInfo_,i=function(){return new vi(t.stats_,t.server_)},o=r.toString(),xn[o]||(xn[o]=i()),xn[o]),t.infoData_=new si,t.infoSyncTree_=new xo({startListening:function(e,n,r,i){var o=[],a=t.infoData_.getNode(e._path);return a.isEmpty()||(o=Fo(t.infoSyncTree_,e._path,a),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),Ba(t,"connected",!1),t.serverSyncTree_=new xo({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,(function(n,r){var o=i(n,r);xa(t.eventQueue_,e._path,o)})),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}function Ua(t){var e=t.infoData_.getNode(new Hn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function ja(t){return(e=(e={timestamp:Ua(t)})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e}function qa(t,e,n,r,i){t.dataUpdateCount++;var o=new Hn(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var a=[];if(i)if(r){var s=re(n,(function(t){return Ur(t)}));a=function(t,e,n,r){var i=Qo(t,r);if(i){var o=$o(i),a=o.path,s=o.queryId,u=er(a,e),c=Pi.fromObject(n);return Yo(t,a,new wi(gi(s),u,c))}return[]}(t.serverSyncTree_,o,s,i)}else{var u=Ur(n);a=function(t,e,n,r){var i=Qo(t,r);if(null!=i){var o=$o(i),a=o.path,s=o.queryId,u=er(a,e);return Yo(t,a,new _i(gi(s),u,n))}return[]}(t.serverSyncTree_,o,u,i)}else if(r){var c=re(n,(function(t){return Ur(t)}));a=function(t,e,n){var r=Pi.fromObject(n);return Bo(t,new wi({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,o,c)}else{var h=Ur(n);a=Fo(t.serverSyncTree_,o,h)}var l=o;a.length>0&&(l=Za(t,o)),xa(t.eventQueue_,l,a)}function Va(t,e){Ba(t,"connected",e),!1===e&&function(t){$a(t,"onDisconnectEvents");var e=ja(t),n=ui();li(t.onDisconnect_,zn(),(function(r,i){var o=ra(r,i,t.serverSyncTree_,e);ci(n,r,o)}));var r=[];li(n,zn(),(function(e,n){r=r.concat(Fo(t.serverSyncTree_,e,n));var i=is(t,e);Za(t,i)})),t.onDisconnect_=ui(),xa(t.eventQueue_,zn(),r)}(t)}function Ba(t,e,n){var r=new Hn("/.info/"+e),i=Ur(n);t.infoData_.updateSnapshot(r,i);var o=Fo(t.infoSyncTree_,r,i);xa(t.eventQueue_,r,o)}function Ka(t){return t.nextWriteId_++}function Wa(t,e,n,r,i){$a(t,"set",{path:e.toString(),value:n,priority:r});var o=ja(t),a=Ur(n,r),s=qo(t.serverSyncTree_,e),u=ia(a,s,o),c=Ka(t),h=Oo(t.serverSyncTree_,e,u,c,!0);Ra(t.eventQueue_,h),t.server_.put(e.toString(),a.val(!0),(function(n,r){var o="ok"===n;o||hn("set at "+e+" failed: "+n);var a=Mo(t.serverSyncTree_,c,!o);xa(t.eventQueue_,e,a),Ya(t,i,n,r)}));var l=is(t,e);Za(t,l),xa(t.eventQueue_,l,[])}function Ha(t,e,n){t.server_.onDisconnectCancel(e.toString(),(function(r,i){"ok"===r&&hi(t.onDisconnect_,e),Ya(t,n,r,i)}))}function za(t,e,n,r){var i=Ur(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(function(n,o){"ok"===n&&ci(t.onDisconnect_,e,i),Ya(t,r,n,o)}))}function Ga(t,e,n){var r;r=".info"===Gn(e._path)?Uo(t.infoSyncTree_,e,n):Uo(t.serverSyncTree_,e,n),Da(t.eventQueue_,e._path,r)}function Qa(t){t.persistentConnection_&&t.persistentConnection_.interrupt("repo_interrupt")}function $a(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),an.apply(void 0,kt([r],St(e)))}function Ya(t,e,n,r){e&&Tn((function(){if("ok"===n)e(null);else{var t=(n||"error").toUpperCase(),i=t;r&&(i+=": "+r);var o=new Error(i);o.code=t,e(o)}}))}function Xa(t,e,n){return qo(t.serverSyncTree_,e,n)||Mr.EMPTY_NODE}function Ja(t,e){if(void 0===e&&(e=t.transactionQueueTree_),e||rs(t,e),ua(e)){var n=es(t,e);At(n.length>0,"Sending zero length transaction queue"),n.every((function(t){return 0===t.status}))&&function(t,e,n){for(var r=n.map((function(t){return t.currentWriteId})),i=Xa(t,e,r),o=i,a=i.hash(),s=0;s<n.length;s++){var u=n[s];At(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;var c=er(e,u.path);o=o.updateChild(c,u.currentOutputSnapshotRaw)}var h=o.val(!0),l=e;t.server_.put(l.toString(),h,(function(r){$a(t,"transaction put response",{path:l.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=function(e){n[e].status=2,i=i.concat(Mo(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&o.push((function(){return n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved)})),n[e].unwatcher()},s=0;s<n.length;s++)a(s);rs(t,sa(t.transactionQueueTree_,e)),Ja(t,t.transactionQueueTree_),xa(t.eventQueue_,e,i);for(s=0;s<o.length;s++)Tn(o[s])}else{if("datastale"===r)for(s=0;s<n.length;s++)3===n[s].status?n[s].status=4:n[s].status=0;else{hn("transaction at "+l.toString()+" failed: "+r);for(s=0;s<n.length;s++)n[s].status=4,n[s].abortReason=r}Za(t,e)}}),a)}(t,pa(e),n)}else ha(e)&&la(e,(function(e){Ja(t,e)}))}function Za(t,e){var n=ts(t,e),r=pa(n);return function(t,e,n){if(0===e.length)return;for(var r=[],i=[],o=e.filter((function(t){return 0===t.status})).map((function(t){return t.currentWriteId})),a=function(a){var s,u,c=e[a],h=er(n,c.path),l=!1;if(At(null!==h,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)l=!0,s=c.abortReason,i=i.concat(Mo(t.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=25)l=!0,s="maxretry",i=i.concat(Mo(t.serverSyncTree_,c.currentWriteId,!0));else{var f=Xa(t,c.path,o);c.currentInputSnapshot=f;var p=e[a].update(f.val());if(void 0!==p){wa("transaction failed: Data returned ",p,c.path);var d=Ur(p);"object"==typeof p&&null!=p&&te(p,".priority")||(d=d.updatePriority(f.getPriority()));var v=c.currentWriteId,g=ja(t),y=ia(d,f,g);c.currentOutputSnapshotRaw=d,c.currentOutputSnapshotResolved=y,c.currentWriteId=Ka(t),o.splice(o.indexOf(v),1),i=(i=i.concat(Oo(t.serverSyncTree_,c.path,y,c.currentWriteId,c.applyLocally))).concat(Mo(t.serverSyncTree_,v,!0))}else l=!0,s="nodata",i=i.concat(Mo(t.serverSyncTree_,c.currentWriteId,!0))}xa(t.eventQueue_,n,i),i=[],l&&(e[a].status=2,u=e[a].unwatcher,setTimeout(u,Math.floor(0)),e[a].onComplete&&("nodata"===s?r.push((function(){return e[a].onComplete(null,!1,e[a].currentInputSnapshot)})):r.push((function(){return e[a].onComplete(new Error(s),!1,null)}))))},s=0;s<e.length;s++)a(s);rs(t,t.transactionQueueTree_);for(s=0;s<r.length;s++)Tn(r[s]);Ja(t,t.transactionQueueTree_)}(t,es(t,n),r),r}function ts(t,e){var n,r=t.transactionQueueTree_;for(n=Gn(e);null!==n&&void 0===ua(r);)r=sa(r,n),n=Gn(e=$n(e));return r}function es(t,e){var n=[];return ns(t,e,n),n.sort((function(t,e){return t.order-e.order})),n}function ns(t,e,n){var r=ua(e);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);la(e,(function(e){ns(t,e,n)}))}function rs(t,e){var n=ua(e);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,ca(e,n.length>0?n:void 0)}la(e,(function(e){rs(t,e)}))}function is(t,e){var n=pa(ts(t,e)),r=sa(t.transactionQueueTree_,e);return function(t,e,n){for(var r=n?t:t.parent;null!==r;){if(e(r))return!0;r=r.parent}}(r,(function(e){os(t,e)})),os(t,r),fa(r,(function(e){os(t,e)})),n}function os(t,e){var n=ua(e);if(n){for(var r=[],i=[],o=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?(At(o===a-1,"All SENT items should be at beginning of queue."),o=a,n[a].status=3,n[a].abortReason="set"):(At(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat(Mo(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));-1===o?ca(e,void 0):n.length=o+1,xa(t.eventQueue_,pa(e),i);for(a=0;a<r.length;a++)Tn(r[a])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var as=function(t,e){var n=ss(t),r=n.namespace;"firebase.com"===n.domain&&cn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||cn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&hn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new An(n.host,n.secure,r,e,i,"",r!==n.subdomain),path:new Hn(n.pathString)}},ss=function(t){var e="",n="",r="",i="",o="",a=!0,s="https",u=443;if("string"==typeof t){var c=t.indexOf("//");c>=0&&(s=t.substring(0,c-1),t=t.substring(c+2));var h=t.indexOf("/");-1===h&&(h=t.length);var l=t.indexOf("?");-1===l&&(l=t.length),e=t.substring(0,Math.min(h,l)),h<l&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(aT){}e+="/"+i}return e}(t.substring(h,l)));var f=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=Et(t.split("&")),o=i.next();!o.done;o=i.next()){var a=o.value;if(0!==a.length){var s=a.split("=");2===s.length?r[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):hn("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(u){e={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,l)));(c=e.indexOf(":"))>=0?(a="https"===s||"wss"===s,u=parseInt(e.substring(c+1),10)):c=e.length;var p=e.slice(0,c);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var d=e.indexOf(".");r=e.substring(0,d).toLowerCase(),n=e.substring(d+1),o=r}"ns"in f&&(o=f.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:a,scheme:s,pathString:i,namespace:o}},us=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Jt(this.snapshot.exportVal())},t}(),cs=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),hs=function(){function t(t,e){this.snapshotCallback=t,this.cancelCallback=e}return t.prototype.onValue=function(t,e){this.snapshotCallback.call(null,t,e)},t.prototype.onCancel=function(t){return At(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)},Object.defineProperty(t.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),t.prototype.matches=function(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context},t}(),ls=function(){function t(t,e){this._repo=t,this._path=e}return t.prototype.cancel=function(){var t=new Mt;return Ha(this._repo,this._path,t.wrapCallback((function(){}))),t.promise},t.prototype.remove=function(){Ca("OnDisconnect.remove",this._path);var t=new Mt;return za(this._repo,this._path,null,t.wrapCallback((function(){}))),t.promise},t.prototype.set=function(t){Ca("OnDisconnect.set",this._path),_a("OnDisconnect.set",t,this._path,!1);var e=new Mt;return za(this._repo,this._path,t,e.wrapCallback((function(){}))),e.promise},t.prototype.setWithPriority=function(t,e){Ca("OnDisconnect.setWithPriority",this._path),_a("OnDisconnect.setWithPriority",t,this._path,!1),Ta("OnDisconnect.setWithPriority",e,!1);var n=new Mt;return function(t,e,n,r,i){var o=Ur(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),(function(n,r){"ok"===n&&ci(t.onDisconnect_,e,o),Ya(0,i,n,r)}))}(this._repo,this._path,t,e,n.wrapCallback((function(){}))),n.promise},t.prototype.update=function(t){Ca("OnDisconnect.update",this._path),Ia("OnDisconnect.update",t,this._path,!1);var e=new Mt;return function(t,e,n,r){if(ne(n))return an("onDisconnect().update() called with empty data.  Don't do anything."),void Ya(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,(function(i,o){"ok"===i&&bn(n,(function(n,r){var i=Ur(r);ci(t.onDisconnect_,Zn(e,n),i)})),Ya(0,r,i,o)}))}(this._repo,this._path,t,e.wrapCallback((function(){}))),e.promise},t}(),fs=function(){function t(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}return Object.defineProperty(t.prototype,"key",{get:function(){return tr(this._path)?null:Yn(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new gs(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryIdentifier",{get:function(){var t=oi(this._queryParams),e=yn(t);return"{}"===e?"default":e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryObject",{get:function(){return oi(this._queryParams)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!((e=de(e))instanceof t))return!1;var n=this._repo===e._repo,r=rr(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i},t.prototype.toJSON=function(){return this.toString()},t.prototype.toString=function(){return this._repo.toString()+function(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)},t}();function ps(t,e){if(!0===t._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function ds(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===vr){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==fn)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==pn)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Pr){if(null!=e&&!ba(e)||null!=n&&!ba(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(At(t.getIndex()instanceof Vr||t.getIndex()===Br,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function vs(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var gs=function(t){function e(e,n){return t.call(this,e,n,new ti,!1)||this}return _t(e,t),Object.defineProperty(e.prototype,"parent",{get:function(){var t=Jn(this._path);return null===t?null:new e(this._repo,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t},enumerable:!1,configurable:!0}),e}(fs),ys=function(){function t(t,e,n){this._node=t,this.ref=e,this._index=n}return Object.defineProperty(t.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),t.prototype.child=function(e){var n=new Hn(e),r=_s(this.ref,e);return new t(this._node.getChild(n),r,Pr)},t.prototype.exists=function(){return!this._node.isEmpty()},t.prototype.exportVal=function(){return this._node.val(!0)},t.prototype.forEach=function(e){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return e(new t(i,_s(n.ref,r),Pr))}))},t.prototype.hasChild=function(t){var e=new Hn(t);return!this._node.getChild(e).isEmpty()},t.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},t.prototype.toJSON=function(){return this.exportVal()},t.prototype.val=function(){return this._node.val()},t}();function ms(t,e){return(t=de(t))._checkNotDeleted("ref"),void 0!==e?_s(t._root,e):t._root}function bs(t,e){(t=de(t))._checkNotDeleted("refFromURL");var n=as(e,t._repo.repoInfo_.nodeAdmin);Na("refFromURL",n);var r=n.repoInfo;return t._repo.repoInfo_.isCustomHost()||r.host===t._repo.repoInfo_.host||cn("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),ms(t,n.path.toString())}function _s(t,e){var n,r,i,o;return null===Gn((t=de(t))._path)?(n="child",r="path",o=!1,(i=e)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),ka(n,r,i,o)):ka("child","path",e,!1),new gs(t._repo,Zn(t._path,e))}function ws(t,e){t=de(t),Ca("push",t._path),_a("push",e,t._path,!0);var n,r=Ua(t._repo),i=Wr(r),o=_s(t,i),a=_s(t,i);return n=null!=e?Ts(a,e).then((function(){return a})):Promise.resolve(a),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),o}function Is(t){return Ca("remove",t._path),Ts(t,null)}function Ts(t,e){t=de(t),Ca("set",t._path),_a("set",e,t._path,!1);var n=new Mt;return Wa(t._repo,t._path,e,null,n.wrapCallback((function(){}))),n.promise}function Es(t,e){t=de(t),Ca("setPriority",t._path),Ta("setPriority",e,!1);var n=new Mt;return Wa(t._repo,Zn(t._path,".priority"),e,null,n.wrapCallback((function(){}))),n.promise}function Ss(t,e,n){if(Ca("setWithPriority",t._path),_a("setWithPriority",e,t._path,!1),Ta("setWithPriority",n,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";var r=new Mt;return Wa(t._repo,t._path,e,n,r.wrapCallback((function(){}))),r.promise}function ks(t,e){Ia("update",e,t._path,!1);var n=new Mt;return function(t,e,n,r){$a(t,"update",{path:e.toString(),value:n});var i=!0,o=ja(t),a={};if(bn(n,(function(n,r){i=!1,a[n]=ra(Zn(e,n),Ur(r),t.serverSyncTree_,o)})),i)an("update() called with empty data.  Don't do anything."),Ya(0,r,"ok",void 0);else{var s=Ka(t),u=Lo(t.serverSyncTree_,e,a,s);Ra(t.eventQueue_,u),t.server_.merge(e.toString(),n,(function(n,i){var o="ok"===n;o||hn("update at "+e+" failed: "+n);var a=Mo(t.serverSyncTree_,s,!o),u=a.length>0?Za(t,e):e;xa(t.eventQueue_,u,a),Ya(0,r,n,i)})),bn(n,(function(n){var r=is(t,Zn(e,n));Za(t,r)})),xa(t.eventQueue_,e,[])}}(t._repo,t._path,e,n.wrapCallback((function(){}))),n.promise}function Cs(t){return function(t,e){var n=Vo(t.serverSyncTree_,e);return null!=n?Promise.resolve(n):t.server_.get(e).then((function(n){var r=Ur(n).withIndex(e._queryParams.getIndex()),i=Fo(t.serverSyncTree_,e._path,r);return Da(t.eventQueue_,e._path,i),Promise.resolve(r)}),(function(n){return $a(t,"get for query "+Jt(e)+" failed: "+n),Promise.reject(new Error(n))}))}((t=de(t))._repo,t).then((function(e){return new ys(e,new gs(t._repo,t._path),t._queryParams.getIndex())}))}var Ns=function(){function t(t){this.callbackContext=t}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e._queryParams.getIndex();return new us("value",this,new ys(t.snapshotNode,new gs(e._repo,e._path),n))},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,null)}},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new cs(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))},t.prototype.hasAnyCallback=function(){return null!==this.callbackContext},t}(),As=function(){function t(t,e){this.eventType=t,this.callbackContext=e}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new cs(this,t,e):null},t.prototype.createEvent=function(t,e){At(null!=t.childName,"Child events should have a childName.");var n=_s(new gs(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new us(t.type,this,new ys(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,t.prevName)}},t.prototype.matches=function(e){return e instanceof t&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))},t.prototype.hasAnyCallback=function(){return!!this.callbackContext},t}();function Ps(t,e,n,r,i){var o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){var a=n,s=function(e,n){Ga(t._repo,t,c),a(e,n)};s.userCallback=n.userCallback,s.context=n.context,n=s}var u=new hs(n,o||void 0),c="value"===e?new Ns(u):new As(e,u);return function(t,e,n){var r;r=".info"===Gn(e._path)?jo(t.infoSyncTree_,e,n):jo(t.serverSyncTree_,e,n),Da(t.eventQueue_,e._path,r)}(t._repo,t,c),function(){return Ga(t._repo,t,c)}}function Rs(t,e,n,r){return Ps(t,"value",e,n,r)}function Ds(t,e,n,r){return Ps(t,"child_added",e,n,r)}function xs(t,e,n,r){return Ps(t,"child_changed",e,n,r)}function Os(t,e,n,r){return Ps(t,"child_moved",e,n,r)}function Ls(t,e,n,r){return Ps(t,"child_removed",e,n,r)}function Ms(t,e,n){var r=null,i=n?new hs(n):null;"value"===e?r=new Ns(i):e&&(r=new As(e,i)),Ga(t._repo,t,r)}var Fs=function(){},Us=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return _t(e,t),e.prototype._apply=function(t){_a("endAt",this._value,t._path,!0);var e=ni(t._queryParams,this._value,this._key);if(vs(e),ds(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new fs(t._repo,t._path,e,t._orderByCalled)},e}(Fs);function js(t,e){return Sa("endAt","key",e,!0),new Us(t,e)}var qs=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return _t(e,t),e.prototype._apply=function(t){_a("endBefore",this._value,t._path,!1);var e,n,r,i,o=(e=t._queryParams,n=this._value,r=this._key,e.index_===vr?("string"==typeof n&&(n=zr(n)),i=ni(e,n,r)):i=ni(e,n,null==r?fn:zr(r)),i.endBeforeSet_=!0,i);if(vs(o),ds(o),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new fs(t._repo,t._path,o,t._orderByCalled)},e}(Fs);function Vs(t,e){return Sa("endBefore","key",e,!0),new qs(t,e)}var Bs=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return _t(e,t),e.prototype._apply=function(t){_a("startAt",this._value,t._path,!0);var e=ei(t._queryParams,this._value,this._key);if(vs(e),ds(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new fs(t._repo,t._path,e,t._orderByCalled)},e}(Fs);function Ks(t,e){return void 0===t&&(t=null),Sa("startAt","key",e,!0),new Bs(t,e)}var Ws=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return _t(e,t),e.prototype._apply=function(t){_a("startAfter",this._value,t._path,!1);var e=function(t,e,n){var r;t.index_===vr?("string"==typeof e&&(e=Hr(e)),r=ei(t,e,n)):r=ei(t,e,null==n?pn:Hr(n));return r.startAfterSet_=!0,r}(t._queryParams,this._value,this._key);if(vs(e),ds(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new fs(t._repo,t._path,e,t._orderByCalled)},e}(Fs);function Hs(t,e){return Sa("startAfter","key",e,!0),new Ws(t,e)}var zs=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return _t(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new fs(t._repo,t._path,(e=t._queryParams,n=this._limit,(r=e.copy()).limitSet_=!0,r.limit_=n,r.viewFrom_="l",r),t._orderByCalled);var e,n,r},e}(Fs);function Gs(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new zs(t)}var Qs=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return _t(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new fs(t._repo,t._path,(e=t._queryParams,n=this._limit,(r=e.copy()).limitSet_=!0,r.limit_=n,r.viewFrom_="r",r),t._orderByCalled);var e,n,r},e}(Fs);function $s(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Qs(t)}var Ys=function(t){function e(e){var n=t.call(this)||this;return n._path=e,n}return _t(e,t),e.prototype._apply=function(t){ps(t,"orderByChild");var e=new Hn(this._path);if(tr(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new Vr(e),r=ri(t._queryParams,n);return ds(r),new fs(t._repo,t._path,r,!0)},e}(Fs);function Xs(t){if("$key"===t)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===t)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===t)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return ka("orderByChild","path",t,!1),new Ys(t)}var Js=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _t(e,t),e.prototype._apply=function(t){ps(t,"orderByKey");var e=ri(t._queryParams,vr);return ds(e),new fs(t._repo,t._path,e,!0)},e}(Fs);function Zs(){return new Js}var tu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _t(e,t),e.prototype._apply=function(t){ps(t,"orderByPriority");var e=ri(t._queryParams,Pr);return ds(e),new fs(t._repo,t._path,e,!0)},e}(Fs);function eu(){return new tu}var nu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _t(e,t),e.prototype._apply=function(t){ps(t,"orderByValue");var e=ri(t._queryParams,Br);return ds(e),new fs(t._repo,t._path,e,!0)},e}(Fs);function ru(){return new nu}var iu=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return _t(e,t),e.prototype._apply=function(t){if(_a("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Us(this._value,this._key)._apply(new Bs(this._value,this._key)._apply(t))},e}(Fs);function ou(t,e){return Sa("equalTo","key",e,!0),new iu(t,e)}function au(t){for(var e,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var o=de(t);try{for(var a=Et(r),s=a.next();!s.done;s=a.next()){var u=s.value;o=u._apply(o)}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return o}!function(t){At(!fo,"__referenceConstructor has already been defined"),fo=t}(gs),function(t){At(!_o,"__referenceConstructor has already been defined"),_o=t}(gs);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var su={},uu=!1;function cu(t,e,n,r,i){var o=r||t.options.databaseURL;void 0===o&&(t.options.projectId||cn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),an("Using default host for project ",t.options.projectId),o=t.options.projectId+"-default-rtdb.firebaseio.com");var a,s=as(o,i),u=s.repoInfo,c=void 0;"undefined"!=typeof process&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(a=!0,o="http://"+c+"?ns="+u.namespace,u=(s=as(o,i)).repoInfo):a=!s.repoInfo.secure;var h=i&&a?new Cn(Cn.OWNER):new kn(t.name,t.options,e);Na("Invalid Firebase Database URL",s),tr(s.path)||cn("Database URL must point to the root of a Firebase Database (not including a child path).");var l=function(t,e,n,r){var i=su[e.name];i||(i={},su[e.name]=i);var o=i[t.toURLString()];o&&cn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return o=new Ma(t,uu,n,r),i[t.toURLString()]=o,o}(u,t,h,new Sn(t.name,n));return new hu(l,t)}var hu=function(){function t(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}return Object.defineProperty(t.prototype,"_repo",{get:function(){return this._instanceStarted||(Fa(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new gs(this._repo,zn())),this._rootInternal},enumerable:!1,configurable:!0}),t.prototype._delete=function(){var t,e,n;return null!==this._rootInternal&&(t=this._repo,e=this.app.name,(n=su[e])&&n[t.key]===t||cn("Database "+e+"("+t.repoInfo_+") has already been deleted."),Qa(t),delete n[t.key],this._repoInternal=null,this._rootInternal=null),Promise.resolve()},t.prototype._checkNotDeleted=function(t){null===this._rootInternal&&cn("Cannot call "+t+" on a deleted database.")},t}();function lu(t,e,n,r){void 0===r&&(r={}),(t=de(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&cn("Cannot call useEmulator() after instance has already been initialized.");var i=t._repoInternal,o=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&cn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Cn(Cn.OWNER);else if(r.mockUserToken){var a=Ft(r.mockUserToken,t.app.options.projectId);o=new Cn(a)}!function(t,e,n,r){t.repoInfo_=new An(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),r&&(t.authTokenProvider_=r)}(i,e,n,o)}function fu(t){(t=de(t))._checkNotDeleted("goOffline"),Qa(t._repo)}function pu(t){var e;(t=de(t))._checkNotDeleted("goOnline"),(e=t._repo).persistentConnection_&&e.persistentConnection_.resume("repo_interrupt")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var du={".sv":"timestamp"};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var vu=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}();function gu(t,e,n){var r;if(t=de(t),Ca("Reference.transaction",t._path),".length"===t.key||".keys"===t.key)throw"Reference.transaction failed: "+t.key+" is a read-only object.";var i=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,o=new Mt,a=Rs(t,(function(){}));return function(t,e,n,r,i,o){$a(t,"transaction on "+e);var a={path:e,update:n,onComplete:r,status:null,order:Ze(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},s=Xa(t,e,void 0);a.currentInputSnapshot=s;var u=a.update(s.val());if(void 0===u)a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete&&a.onComplete(null,!1,a.currentInputSnapshot);else{wa("transaction failed: Data returned ",u,a.path),a.status=0;var c=sa(t.transactionQueueTree_,e),h=ua(c)||[];h.push(a),ca(c,h);var l=void 0;"object"==typeof u&&null!==u&&te(u,".priority")?(l=ee(u,".priority"),At(ba(l),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):l=(qo(t.serverSyncTree_,e)||Mr.EMPTY_NODE).getPriority().val();var f=ja(t),p=Ur(u,l),d=ia(p,s,f);a.currentOutputSnapshotRaw=p,a.currentOutputSnapshotResolved=d,a.currentWriteId=Ka(t);var v=Oo(t.serverSyncTree_,e,d,a.currentWriteId,a.applyLocally);xa(t.eventQueue_,e,v),Ja(t,t.transactionQueueTree_)}}(t._repo,t._path,e,(function(e,n,r){var i=null;e?o.reject(e):(i=new ys(r,new gs(t._repo,t._path),Pr),o.resolve(new vu(n,i)))}),a,i),o.promise}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yu=function(){function t(t){this._delegate=t}return t.prototype.cancel=function(t){ue("OnDisconnect.cancel",0,1,arguments.length),he("OnDisconnect.cancel","onComplete",t,!0);var e=this._delegate.cancel();return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},t.prototype.remove=function(t){ue("OnDisconnect.remove",0,1,arguments.length),he("OnDisconnect.remove","onComplete",t,!0);var e=this._delegate.remove();return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},t.prototype.set=function(t,e){ue("OnDisconnect.set",1,2,arguments.length),he("OnDisconnect.set","onComplete",e,!0);var n=this._delegate.set(t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},t.prototype.setWithPriority=function(t,e,n){ue("OnDisconnect.setWithPriority",2,3,arguments.length),he("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(t,e);return n&&r.then((function(){return n(null)}),(function(t){return n(t)})),r},t.prototype.update=function(t,e){if(ue("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,hn("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}he("OnDisconnect.update","onComplete",e,!0);var i=this._delegate.update(t);return e&&i.then((function(){return e(null)}),(function(t){return e(t)})),i},t}(),mu=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return ue("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),bu=function(){function t(t,e){this._database=t,this._delegate=e}return t.prototype.val=function(){return ue("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},t.prototype.exportVal=function(){return ue("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},t.prototype.toJSON=function(){return ue("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.exists=function(){return ue("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},t.prototype.child=function(e){return ue("DataSnapshot.child",0,1,arguments.length),e=String(e),ka("DataSnapshot.child","path",e,!1),new t(this._database,this._delegate.child(e))},t.prototype.hasChild=function(t){return ue("DataSnapshot.hasChild",1,1,arguments.length),ka("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)},t.prototype.getPriority=function(){return ue("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},t.prototype.forEach=function(e){var n=this;return ue("DataSnapshot.forEach",1,1,arguments.length),he("DataSnapshot.forEach","action",e,!1),this._delegate.forEach((function(r){return e(new t(n._database,r))}))},t.prototype.hasChildren=function(){return ue("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(t.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return ue("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},t.prototype.getRef=function(){return ue("DataSnapshot.ref",0,0,arguments.length),new wu(this._database,this._delegate.ref)},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),_u=function(){function t(t,e){this.database=t,this._delegate=e}return t.prototype.on=function(e,n,r,i){var o,a=this;ue("Query.on",2,4,arguments.length),he("Query.on","callback",n,!1);var s=t.getCancelAndContextArgs_("Query.on",r,i),u=function(t,e){n.call(s.context,new bu(a.database,t),e)};u.userCallback=n,u.context=s.context;var c=null===(o=s.cancel)||void 0===o?void 0:o.bind(s.context);switch(e){case"value":return Rs(this._delegate,u,c),n;case"child_added":return Ds(this._delegate,u,c),n;case"child_removed":return Ls(this._delegate,u,c),n;case"child_changed":return xs(this._delegate,u,c),n;case"child_moved":return Os(this._delegate,u,c),n;default:throw new Error(ce("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},t.prototype.off=function(t,e,n){if(ue("Query.off",0,3,arguments.length),Ea("Query.off",t,!0),he("Query.off","callback",e,!0),le("Query.off","context",n,!0),e){var r=function(){};r.userCallback=e,r.context=n,Ms(this._delegate,t,r)}else Ms(this._delegate,t)},t.prototype.get=function(){var t=this;return Cs(this._delegate).then((function(e){return new bu(t.database,e)}))},t.prototype.once=function(e,n,r,i){var o=this;ue("Query.once",1,4,arguments.length),he("Query.once","callback",n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),s=new Mt,u=function(t,e){var r=new bu(o.database,t);n&&n.call(a.context,r,e),s.resolve(r)};u.userCallback=n,u.context=a.context;var c=function(t){a.cancel&&a.cancel.call(a.context,t),s.reject(t)};switch(e){case"value":Rs(this._delegate,u,c,{onlyOnce:!0});break;case"child_added":Ds(this._delegate,u,c,{onlyOnce:!0});break;case"child_removed":Ls(this._delegate,u,c,{onlyOnce:!0});break;case"child_changed":xs(this._delegate,u,c,{onlyOnce:!0});break;case"child_moved":Os(this._delegate,u,c,{onlyOnce:!0});break;default:throw new Error(ce("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise},t.prototype.limitToFirst=function(e){return ue("Query.limitToFirst",1,1,arguments.length),new t(this.database,au(this._delegate,Gs(e)))},t.prototype.limitToLast=function(e){return ue("Query.limitToLast",1,1,arguments.length),new t(this.database,au(this._delegate,$s(e)))},t.prototype.orderByChild=function(e){return ue("Query.orderByChild",1,1,arguments.length),new t(this.database,au(this._delegate,Xs(e)))},t.prototype.orderByKey=function(){return ue("Query.orderByKey",0,0,arguments.length),new t(this.database,au(this._delegate,Zs()))},t.prototype.orderByPriority=function(){return ue("Query.orderByPriority",0,0,arguments.length),new t(this.database,au(this._delegate,eu()))},t.prototype.orderByValue=function(){return ue("Query.orderByValue",0,0,arguments.length),new t(this.database,au(this._delegate,ru()))},t.prototype.startAt=function(e,n){return void 0===e&&(e=null),ue("Query.startAt",0,2,arguments.length),new t(this.database,au(this._delegate,Ks(e,n)))},t.prototype.startAfter=function(e,n){return void 0===e&&(e=null),ue("Query.startAfter",0,2,arguments.length),new t(this.database,au(this._delegate,Hs(e,n)))},t.prototype.endAt=function(e,n){return void 0===e&&(e=null),ue("Query.endAt",0,2,arguments.length),new t(this.database,au(this._delegate,js(e,n)))},t.prototype.endBefore=function(e,n){return void 0===e&&(e=null),ue("Query.endBefore",0,2,arguments.length),new t(this.database,au(this._delegate,Vs(e,n)))},t.prototype.equalTo=function(e,n){return ue("Query.equalTo",1,2,arguments.length),new t(this.database,au(this._delegate,ou(e,n)))},t.prototype.toString=function(){return ue("Query.toString",0,0,arguments.length),this._delegate.toString()},t.prototype.toJSON=function(){return ue("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.isEqual=function(e){if(ue("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:void 0,context:void 0};if(e&&n)r.cancel=e,he(t,"cancel",r.cancel,!0),r.context=n,le(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(ce(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return new wu(this.database,new gs(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),t}(),wu=function(t){function e(e,n){var r=t.call(this,e,new fs(n._repo,n._path,new ti,!1))||this;return r.database=e,r._delegate=n,r}return _t(e,t),e.prototype.getKey=function(){return ue("Reference.key",0,0,arguments.length),this._delegate.key},e.prototype.child=function(t){return ue("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new e(this.database,_s(this._delegate,t))},e.prototype.getParent=function(){ue("Reference.parent",0,0,arguments.length);var t=this._delegate.parent;return t?new e(this.database,t):null},e.prototype.getRoot=function(){return ue("Reference.root",0,0,arguments.length),new e(this.database,this._delegate.root)},e.prototype.set=function(t,e){ue("Reference.set",1,2,arguments.length),he("Reference.set","onComplete",e,!0);var n=Ts(this._delegate,t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},e.prototype.update=function(t,e){if(ue("Reference.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,hn("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ca("Reference.update",this._delegate._path),he("Reference.update","onComplete",e,!0);var i=ks(this._delegate,t);return e&&i.then((function(){return e(null)}),(function(t){return e(t)})),i},e.prototype.setWithPriority=function(t,e,n){ue("Reference.setWithPriority",2,3,arguments.length),he("Reference.setWithPriority","onComplete",n,!0);var r=Ss(this._delegate,t,e);return n&&r.then((function(){return n(null)}),(function(t){return n(t)})),r},e.prototype.remove=function(t){ue("Reference.remove",0,1,arguments.length),he("Reference.remove","onComplete",t,!0);var e=Is(this._delegate);return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},e.prototype.transaction=function(t,e,n){var r=this;ue("Reference.transaction",1,3,arguments.length),he("Reference.transaction","transactionUpdate",t,!1),he("Reference.transaction","onComplete",e,!0),Aa("Reference.transaction","applyLocally",n,!0);var i=gu(this._delegate,t,{applyLocally:n}).then((function(t){return new mu(t.committed,new bu(r.database,t.snapshot))}));return e&&i.then((function(t){return e(null,t.committed,t.snapshot)}),(function(t){return e(t,!1,null)})),i},e.prototype.setPriority=function(t,e){ue("Reference.setPriority",1,2,arguments.length),he("Reference.setPriority","onComplete",e,!0);var n=Es(this._delegate,t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},e.prototype.push=function(t,n){var r=this;ue("Reference.push",0,2,arguments.length),he("Reference.push","onComplete",n,!0);var i=ws(this._delegate,t),o=i.then((function(t){return new e(r.database,t)}));n&&o.then((function(){return n(null)}),(function(t){return n(t)}));var a=new e(this.database,i);return a.then=o.then.bind(o),a.catch=o.catch.bind(o,void 0),a},e.prototype.onDisconnect=function(){return Ca("Reference.onDisconnect",this._delegate._path),new yu(new ls(this._delegate._repo,this._delegate._path))},Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(_u),Iu=function(){function t(t,e){var n=this;this._delegate=t,this.app=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),lu(this._delegate,t,e,n)},t.prototype.ref=function(t){if(ue("database.ref",0,1,arguments.length),t instanceof wu){var e=bs(this._delegate,t.toString());return new wu(this,e)}e=ms(this._delegate,t);return new wu(this,e)},t.prototype.refFromURL=function(t){var e="database.refFromURL";ue(e,1,1,arguments.length);var n=bs(this._delegate,t);return new wu(this,n)},t.prototype.goOffline=function(){return ue("database.goOffline",0,0,arguments.length),fu(this._delegate)},t.prototype.goOnline=function(){return ue("database.goOnline",0,0,arguments.length),pu(this._delegate)},t.ServerValue={TIMESTAMP:du,increment:function(t){return function(t){return{".sv":{increment:t}}}(t)}},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tu=Object.freeze({__proto__:null,forceLongPolling:function(){jn.forceDisallow(),Mn.forceAllow()},forceWebSockets:function(){Mn.forceDisallow()},isWebSocketsAvailable:function(){return jn.isAvailable()},setSecurityDebugCallback:function(t,e){t._delegate._repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){!function(t,e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var n;e?(t.statsListener_||(t.statsListener_=new di(t.stats_)),n=t.statsListener_.get()):n=t.stats_.get();var r=Object.keys(n).reduce((function(t,e){return Math.max(e.length,t)}),0);bn(n,(function(t,e){for(var n=t,i=t.length;i<r+2;i++)n+=" ";console.log(n+e)}))}}(t._delegate._repo,e)},statsIncrementCounter:function(t,e){!function(t,e){var n,r;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */t.stats_.incrementCounter(e),n=t.statsReporter_,r=e,n.statsToReport_[r]=!0}(t._delegate._repo,e)},dataUpdateCount:function(t){return t._delegate._repo.dataUpdateCount},interceptServerData:function(t,e){return function(t,e){t.interceptServerDataCallback_=e}(t._delegate._repo,e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.version,i=t.customAuthImpl,o=t.namespace,a=t.nodeAdmin,s=void 0!==a&&a;He(r);var u=new ge("auth-internal",new me("database-standalone"));return u.setComponent(new ve("auth-internal",(function(){return i}),"PRIVATE")),{instance:new Iu(cu(e,u,void 0,n,s),e),namespace:o}}}),Eu=lr;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */lr.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},lr.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Su,ku=Vn,Cu=An,Nu=Object.freeze({__proto__:null,DataConnection:Eu,RealTimeConnection:ku,hijackHash:function(t){var e=lr.prototype.put;return lr.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){lr.prototype.put=e}},ConnectionTarget:Cu,queryIdentifier:function(t){return t._delegate._queryIdentifier},forceRestClient:function(t){!function(t){uu=t}(t)}}),Au=Iu.ServerValue;He((Su=Ke).SDK_VERSION),Su.INTERNAL.registerComponent(new ve("database",(function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new Iu(cu(r,i,o,n),r)}),"PUBLIC").setServiceProps({Reference:wu,Query:_u,Database:Iu,DataSnapshot:bu,enableLogging:on,INTERNAL:Tu,ServerValue:Au,TEST_ACCESS:Nu}).setMultipleInstances(!0)),Su.registerVersion("@firebase/database","0.10.9");
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var Pu=function(t,e){return(Pu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Ru(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Du,xu="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ou=Ou||{},Lu=xu||self;function Mu(){}function Fu(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Uu(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var ju="closure_uid_"+(1e9*Math.random()>>>0),qu=0;function Vu(t,e,n){return t.call.apply(t.bind,arguments)}function Bu(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Ku(t,e,n){return(Ku=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Vu:Bu).apply(null,arguments)}function Wu(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Hu(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function zu(){this.s=this.s,this.o=this.o}var Gu={};zu.prototype.s=!1,zu.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,ju)&&t[ju]||(t[ju]=++qu)}(this);delete Gu[t]}},zu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Qu=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},$u=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Yu(t){return Array.prototype.concat.apply([],arguments)}function Xu(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Ju(t){return/^[\s\xa0]*$/.test(t)}var Zu,tc=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function ec(t,e){return-1!=t.indexOf(e)}function nc(t,e){return t<e?-1:t>e?1:0}t:{var rc=Lu.navigator;if(rc){var ic=rc.userAgent;if(ic){Zu=ic;break t}}Zu=""}function oc(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function ac(t){var e={};for(var n in t)e[n]=t[n];return e}var sc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function uc(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<sc.length;o++)n=sc[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function cc(t){return cc[" "](t),t}cc[" "]=Mu;var hc,lc,fc=ec(Zu,"Opera"),pc=ec(Zu,"Trident")||ec(Zu,"MSIE"),dc=ec(Zu,"Edge"),vc=dc||pc,gc=ec(Zu,"Gecko")&&!(ec(Zu.toLowerCase(),"webkit")&&!ec(Zu,"Edge"))&&!(ec(Zu,"Trident")||ec(Zu,"MSIE"))&&!ec(Zu,"Edge"),yc=ec(Zu.toLowerCase(),"webkit")&&!ec(Zu,"Edge");function mc(){var t=Lu.document;return t?t.documentMode:void 0}t:{var bc="",_c=(lc=Zu,gc?/rv:([^\);]+)(\)|;)/.exec(lc):dc?/Edge\/([\d\.]+)/.exec(lc):pc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(lc):yc?/WebKit\/(\S+)/.exec(lc):fc?/(?:Version)[ \/]?(\S+)/.exec(lc):void 0);if(_c&&(bc=_c?_c[1]:""),pc){var wc=mc();if(null!=wc&&wc>parseFloat(bc)){hc=String(wc);break t}}hc=bc}var Ic,Tc={};function Ec(){return function(t){var e=Tc;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}((function(){for(var t=0,e=tc(String(hc)).split("."),n=tc("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",a=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;t=nc(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||nc(0==o[2].length,0==a[2].length)||nc(o[2],a[2]),o=o[3],a=a[3]}while(0==t)}return 0<=t}))}if(Lu.document&&pc){var Sc=mc();Ic=Sc||(parseInt(hc,10)||void 0)}else Ic=void 0;var kc=Ic,Cc=function(){if(!Lu.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Lu.addEventListener("test",Mu,e),Lu.removeEventListener("test",Mu,e)}catch(n){}return t}();function Nc(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function Ac(t,e){if(Nc.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(gc){t:{try{cc(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Pc[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Ac.Z.h.call(this)}}Nc.prototype.h=function(){this.defaultPrevented=!0},Hu(Ac,Nc);var Pc={2:"touch",3:"pen",4:"mouse"};Ac.prototype.h=function(){Ac.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Rc="closure_listenable_"+(1e6*Math.random()|0),Dc=0;function xc(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++Dc,this.ca=this.fa=!1}function Oc(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function Lc(t){this.src=t,this.g={},this.h=0}function Mc(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],o=Qu(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Oc(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function Fc(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ca&&o.listener==e&&o.capture==!!n&&o.ia==r)return i}return-1}Lc.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var a=Fc(t,e,r,i);return-1<a?(e=t[a],n||(e.fa=!1)):((e=new xc(e,this.src,o,!!r,i)).fa=n,t.push(e)),e};var Uc="closure_lm_"+(1e6*Math.random()|0),jc={};function qc(t,e,n,r,i){if(r&&r.once)return Bc(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)qc(t,e[o],n,r,i);return null}return n=$c(n),t&&t[Rc]?t.N(e,n,Uu(r)?!!r.capture:!!r,i):Vc(t,e,n,!1,r,i)}function Vc(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=Uu(i)?!!i.capture:!!i,s=Gc(t);if(s||(t[Uc]=s=new Lc(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){function t(n){return e.call(t.src,t.listener,n)}var e=zc;return t}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Cc||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Hc(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Bc(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Bc(t,e[o],n,r,i);return null}return n=$c(n),t&&t[Rc]?t.O(e,n,Uu(r)?!!r.capture:!!r,i):Vc(t,e,n,!0,r,i)}function Kc(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Kc(t,e[o],n,r,i);else r=Uu(r)?!!r.capture:!!r,n=$c(n),t&&t[Rc]?(t=t.i,(e=String(e).toString())in t.g&&(-1<(n=Fc(o=t.g[e],n,r,i))&&(Oc(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--)))):t&&(t=Gc(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Fc(e,n,r,i)),(n=-1<t?e[t]:null)&&Wc(n))}function Wc(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[Rc])Mc(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Hc(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Gc(e))?(Mc(n,t),0==n.h&&(n.src=null,e[Uc]=null)):Oc(t)}}}function Hc(t){return t in jc?jc[t]:jc[t]="on"+t}function zc(t,e){if(t.ca)t=!0;else{e=new Ac(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&Wc(t),t=n.call(r,e)}return t}function Gc(t){return(t=t[Uc])instanceof Lc?t:null}var Qc="__closure_events_fn_"+(1e9*Math.random()>>>0);function $c(t){return"function"==typeof t?t:(t[Qc]||(t[Qc]=function(e){return t.handleEvent(e)}),t[Qc])}function Yc(){zu.call(this),this.i=new Lc(this),this.P=this,this.I=null}function Xc(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new Nc(e,t);else if(e instanceof Nc)e.target=e.target||t;else{var i=e;uc(e=new Nc(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=e.g=n[o];i=Jc(a,r,!0,e)&&i}if(i=Jc(a=e.g=t,r,!0,e)&&i,i=Jc(a,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Jc(a=e.g=n[o],r,!1,e)&&i}function Jc(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.ca&&a.capture==n){var s=a.listener,u=a.ia||a.src;a.fa&&Mc(t.i,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}Hu(Yc,zu),Yc.prototype[Rc]=!0,Yc.prototype.removeEventListener=function(t,e,n,r){Kc(this,t,e,n,r)},Yc.prototype.M=function(){if(Yc.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)Oc(n[r]);delete e.g[t],e.h--}}this.I=null},Yc.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},Yc.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var Zc=Lu.JSON.stringify;function th(){var t=uh,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var eh,nh=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=rh.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),rh=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t},t}())((function(){return new ih}),(function(t){return t.reset()})),ih=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function oh(t){Lu.setTimeout((function(){throw t}),0)}function ah(t,e){eh||function(){var t=Lu.Promise.resolve(void 0);eh=function(){t.then(ch)}}(),sh||(eh(),sh=!0),uh.add(t,e)}var sh=!1,uh=new nh;function ch(){for(var t;t=th();){try{t.h.call(t.g)}catch(n){oh(n)}var e=rh;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}sh=!1}function hh(t,e){Yc.call(this),this.h=t||1,this.g=e||Lu,this.j=Ku(this.kb,this),this.l=Date.now()}function lh(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function fh(t,e,n){if("function"==typeof t)n&&(t=Ku(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Ku(t.handleEvent,t)}return 2147483647<Number(e)?-1:Lu.setTimeout(t,e||0)}function ph(t){t.g=fh((function(){t.g=null,t.i&&(t.i=!1,ph(t))}),t.j);var e=t.h;t.h=null,t.m.apply(null,e)}Hu(hh,Yc),(Du=hh.prototype).da=!1,Du.S=null,Du.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Xc(this,"tick"),this.da&&(lh(this),this.start()))}},Du.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Du.M=function(){hh.Z.M.call(this),lh(this),delete this.g};var dh=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Pu(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:ph(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(Lu.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(zu);function vh(t){zu.call(this),this.h=t,this.g={}}Hu(vh,zu);var gh=[];function yh(t,e,n,r){Array.isArray(n)||(n&&(gh[0]=n.toString()),n=gh);for(var i=0;i<n.length;i++){var o=qc(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function mh(t){oc(t.g,(function(t,e){this.g.hasOwnProperty(e)&&Wc(t)}),t),t.g={}}function bh(){this.g=!0}function _h(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return Zc(n)}catch(s){return e}}(t,n)+(r?" "+r:"")}))}vh.prototype.M=function(){vh.Z.M.call(this),mh(this)},vh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},bh.prototype.Aa=function(){this.g=!1},bh.prototype.info=function(){};var wh={},Ih=null;function Th(){return Ih=Ih||new Yc}function Eh(t){Nc.call(this,wh.Ma,t)}function Sh(t){var e=Th();Xc(e,new Eh(e,t))}function kh(t,e){Nc.call(this,wh.STAT_EVENT,t),this.stat=e}function Ch(t){var e=Th();Xc(e,new kh(e,t))}function Nh(t,e){Nc.call(this,wh.Na,t),this.size=e}function Ah(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Lu.setTimeout((function(){t()}),e)}wh.Ma="serverreachability",Hu(Eh,Nc),wh.STAT_EVENT="statevent",Hu(kh,Nc),wh.Na="timingevent",Hu(Nh,Nc);var Ph={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Rh={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Dh(){}function xh(t){return t.h||(t.h=t.i())}function Oh(){}Dh.prototype.h=null;var Lh,Mh={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Fh(){Nc.call(this,"d")}function Uh(){Nc.call(this,"c")}function jh(){}function qh(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new vh(this),this.P=Bh,t=vc?125:void 0,this.W=new hh(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Vh}function Vh(){this.i=null,this.g="",this.h=!1}Hu(Fh,Nc),Hu(Uh,Nc),Hu(jh,Dh),jh.prototype.g=function(){return new XMLHttpRequest},jh.prototype.i=function(){return{}},Lh=new jh;var Bh=45e3,Kh={},Wh={};function Hh(t,e,n){t.K=1,t.v=dl(ul(e)),t.s=n,t.U=!0,zh(t,null)}function zh(t,e){t.F=Date.now(),Yh(t),t.A=ul(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),Cl(n.h,"t",r),t.C=0,n=t.l.H,t.h=new Vh,t.g=Af(t.l,n?e:null,!t.s),0<t.O&&(t.L=new dh(Ku(t.Ia,t,t.g),t.O)),yh(t.V,t.g,"readystatechange",t.gb),e=t.H?ac(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Sh(1),function(t,e,n,r,i,o){t.info((function(){if(t.g)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var h=c[0];c=c[1];var l=h.split("_");a=2<=l.length&&"type"==l[1]?a+(h+"=")+c+"&":a+(h+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+a}))}(t.j,t.u,t.A,t.m,t.X,t.s)}function Gh(t){return!!t.g&&("GET"==t.u&&2!=t.K&&t.l.Ba)}function Qh(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if((r=$h(t,n))==Wh){4==e&&(t.o=4,Ch(14),i=!1),_h(t.j,t.m,null,"[Incomplete Response]");break}if(r==Kh){t.o=4,Ch(15),_h(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}_h(t.j,t.m,r,null),el(t,r)}Gh(t)&&r!=Wh&&r!=Kh&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,Ch(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),wf(e),e.L=!0,Ch(11))):(_h(t.j,t.m,n,"[Invalid Chunked Response]"),tl(t),Zh(t))}function $h(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?Wh:(n=Number(e.substring(n,r)),isNaN(n)?Kh:(r+=1)+n>e.length?Wh:(e=e.substr(r,n),t.C=r+n,e))}function Yh(t){t.Y=Date.now()+t.P,Xh(t,t.P)}function Xh(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Ah(Ku(t.eb,t),e)}function Jh(t){t.B&&(Lu.clearTimeout(t.B),t.B=null)}function Zh(t){0==t.l.G||t.I||Ef(t.l,t)}function tl(t){Jh(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,lh(t.W),mh(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function el(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||Ol(n.i,t)))if(n.I=t.N,!t.J&&Ol(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(g){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;Tf(n),ff(n)}_f(n),Ch(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Ah(Ku(n.ab,n),6e3));if(1>=xl(n.i)&&n.ka){try{n.ka()}catch(g){}n.ka=void 0}}else kf(n,11)}else if((t.J||n.g==t)&&Tf(n),!Ju(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var o=i[e];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var a=o[3];null!=a&&(n.ma=a,n.h.info("VER="+n.ma));var s=o[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var h=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var l=r.i;!l.g&&(ec(h,"spdy")||ec(h,"quic")||ec(h,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(Ll(l,l.h),l.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,pl(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var p=t;if((r=n).oa=Nf(r,r.H?r.la:null,r.W),p.J){Ml(r.i,p);var d=p,v=r.K;v&&d.setTimeout(v),d.B&&(Jh(d),Yh(d)),r.g=p}else bf(r);0<n.l.length&&vf(n)}else"stop"!=o[0]&&"close"!=o[0]||kf(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?kf(n,7):lf(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}Sh(4)}catch(g){}}function nl(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Fu(t)||"string"==typeof t)$u(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(Fu(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(Fu(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function rl(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof rl)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function il(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];ol(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)ol(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function ol(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Du=qh.prototype).setTimeout=function(t){this.P=t},Du.gb=function(t){t=t.target;var e=this.L;e&&3==af(t)?e.l():this.Ia(t)},Du.Ia=function(t){try{if(t==this.g)t:{var e=af(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||vc||this.g&&(this.h.h||this.g.ga()||sf(this.g)))){this.I||4!=e||7==n||Sh(8==n||0>=r?3:2),Jh(this);var i=this.g.ba();this.N=i;e:if(Gh(this)){var o=sf(this.g);t="";var a=o.length,s=4==af(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){tl(this),Zh(this);var u="";break e}this.h.i=new Lu.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,t+=this.h.i.decode(o[n],{stream:s&&n==a-1});o.splice(0,a),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(t,e,n,r,i,o,a){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+a}))}(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var c,h=this.g;if((c=h.g?h.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ju(c)){var l=c;break e}}l=null}if(!(i=l)){this.i=!1,this.o=3,Ch(12),tl(this),Zh(this);break t}_h(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,el(this,i)}this.U?(Qh(this,e,u),vc&&this.i&&3==e&&(yh(this.V,this.W,"tick",this.fb),this.W.start())):(_h(this.j,this.m,u,null),el(this,u)),4==e&&tl(this),this.i&&!this.I&&(4==e?Ef(this.l,this):(this.i=!1,Yh(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,Ch(12)):(this.o=0,Ch(13)),tl(this),Zh(this)}}}catch(f){}},Du.fb=function(){if(this.g){var t=af(this.g),e=this.g.ga();this.C<e.length&&(Jh(this),Qh(this,t,e),this.i&&4!=t&&Yh(this))}},Du.cancel=function(){this.I=!0,tl(this)},Du.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.K&&(Sh(3),Ch(17)),tl(this),this.o=2,Zh(this)):Xh(this,this.Y-t)},(Du=rl.prototype).R=function(){il(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},Du.T=function(){return il(this),this.g.concat()},Du.get=function(t,e){return ol(this.h,t)?this.h[t]:e},Du.set=function(t,e){ol(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},Du.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var al=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function sl(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof sl){this.g=void 0!==e?e:t.g,cl(this,t.j),this.s=t.s,hl(this,t.i),ll(this,t.m),this.l=t.l,e=t.h;var n=new Tl;n.i=e.i,e.g&&(n.g=new rl(e.g),n.h=e.h),fl(this,n),this.o=t.o}else t&&(n=String(t).match(al))?(this.g=!!e,cl(this,n[1]||"",!0),this.s=vl(n[2]||""),hl(this,n[3]||"",!0),ll(this,n[4]),this.l=vl(n[5]||"",!0),fl(this,n[6]||"",!0),this.o=vl(n[7]||"")):(this.g=!!e,this.h=new Tl(null,this.g))}function ul(t){return new sl(t)}function cl(t,e,n){t.j=n?vl(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function hl(t,e,n){t.i=n?vl(e,!0):e}function ll(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function fl(t,e,n){e instanceof Tl?(t.h=e,function(t,e){e&&!t.j&&(El(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Sl(this,e),Cl(this,n,t))}),t)),t.j=e}(t.h,t.g)):(n||(e=gl(e,wl)),t.h=new Tl(e,t.g))}function pl(t,e,n){t.h.set(e,n)}function dl(t){return pl(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function vl(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function gl(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,yl),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function yl(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}sl.prototype.toString=function(){var t=[],e=this.j;e&&t.push(gl(e,ml,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(gl(e,ml,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(gl(n,"/"==n.charAt(0)?_l:bl,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",gl(n,Il)),t.join("")};var ml=/[#\/\?@]/g,bl=/[#\?:]/g,_l=/[#\?]/g,wl=/[#\?@]/g,Il=/#/g;function Tl(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function El(t){t.g||(t.g=new rl,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Sl(t,e){El(t),e=Nl(t,e),ol(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,ol((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&il(t)))}function kl(t,e){return El(t),e=Nl(t,e),ol(t.g.h,e)}function Cl(t,e,n){Sl(t,e),0<n.length&&(t.i=null,t.g.set(Nl(t,e),Xu(n)),t.h+=n.length)}function Nl(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(Du=Tl.prototype).add=function(t,e){El(this),this.i=null,t=Nl(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},Du.forEach=function(t,e){El(this),this.g.forEach((function(n,r){$u(n,(function(n){t.call(e,n,r,this)}),this)}),this)},Du.T=function(){El(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Du.R=function(t){El(this);var e=[];if("string"==typeof t)kl(this,t)&&(e=Yu(e,this.g.get(Nl(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=Yu(e,t[n])}return e},Du.set=function(t,e){return El(this),this.i=null,kl(this,t=Nl(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},Du.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},Du.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.i=t.join("&")};var Al=function(t,e){this.h=t,this.g=e};function Pl(t){this.l=t||Rl,Lu.PerformanceNavigationTiming?t=0<(t=Lu.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(Lu.g&&Lu.g.Ea&&Lu.g.Ea()&&Lu.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Rl=10;function Dl(t){return!!t.h||!!t.g&&t.g.size>=t.j}function xl(t){return t.h?1:t.g?t.g.size:0}function Ol(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function Ll(t,e){t.g?t.g.add(e):t.h=e}function Ml(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Fl(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var i=Ru(t.g.values()),o=i.next();!o.done;o=i.next()){var a=o.value;r=r.concat(a.D)}}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Xu(t.i)}function Ul(){}function jl(){this.g=new Ul}function ql(t,e,n){var r=n||"";try{nl(t,(function(t,n){var i=t;Uu(t)&&(i=Zc(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(aT){throw e.push(r+"type="+encodeURIComponent("_badmap")),aT}}function Vl(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}function Bl(t){this.l=t.$b||null,this.j=t.ib||!1}function Kl(t,e){Yc.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=Wl,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Pl.prototype.cancel=function(){var t,e;if(this.i=Fl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=Ru(this.g.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},Ul.prototype.stringify=function(t){return Lu.JSON.stringify(t,void 0)},Ul.prototype.parse=function(t){return Lu.JSON.parse(t,void 0)},Hu(Bl,Dh),Bl.prototype.g=function(){return new Kl(this.l,this.j)},Bl.prototype.i=function(t){return function(){return t}}({}),Hu(Kl,Yc);var Wl=0;function Hl(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function zl(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Gl(t)}function Gl(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(Du=Kl.prototype).open=function(t,e){if(this.readyState!=Wl)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Gl(this)},Du.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||Lu).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Du.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,zl(this)),this.readyState=Wl},Du.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Gl(this)),this.g&&(this.readyState=3,Gl(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Lu.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Hl(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},Du.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?zl(this):Gl(this),3==this.readyState&&Hl(this)}},Du.Ua=function(t){this.g&&(this.response=this.responseText=t,zl(this))},Du.Ta=function(t){this.g&&(this.response=t,zl(this))},Du.ha=function(){this.g&&zl(this)},Du.setRequestHeader=function(t,e){this.v.append(t,e)},Du.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},Du.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Kl.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Ql=Lu.JSON.parse;function $l(t){Yc.call(this),this.headers=new rl,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Yl,this.K=this.L=!1}Hu($l,Yc);var Yl="",Xl=/^https?$/i,Jl=["POST","PUT"];function Zl(t){return"content-type"==t.toLowerCase()}function tf(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,ef(t),rf(t)}function ef(t){t.D||(t.D=!0,Xc(t,"complete"),Xc(t,"error"))}function nf(t){if(t.h&&void 0!==Ou&&(!t.C[1]||4!=af(t)||2!=t.ba()))if(t.v&&4==af(t))fh(t.Fa,0,t);else if(Xc(t,"readystatechange"),4==af(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.H).match(al)[1]||null;if(!o&&Lu.self&&Lu.self.location){var a=Lu.self.location.protocol;o=a.substr(0,a.length-1)}i=!Xl.test(o?o.toLowerCase():"")}e=i}if(e)Xc(t,"complete"),Xc(t,"success");else{t.m=6;try{var s=2<af(t)?t.g.statusText:""}catch(u){s=""}t.j=s+" ["+t.ba()+"]",ef(t)}}finally{rf(t)}}}function rf(t,e){if(t.g){of(t);var n=t.g,r=t.C[0]?Mu:null;t.g=null,t.C=null,e||Xc(t,"ready");try{n.onreadystatechange=r}catch(aT){}}}function of(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(Lu.clearTimeout(t.A),t.A=null)}function af(t){return t.g?t.g.readyState:0}function sf(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case Yl:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function uf(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return oc(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):pl(t,e,n))}function cf(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function hf(t){this.za=0,this.l=[],this.h=new bh,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=cf("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=cf("baseRetryDelayMs",5e3,t),this.$a=cf("retryDelaySeedMs",1e4,t),this.Ya=cf("forwardChannelMaxRetries",2,t),this.ra=cf("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new Pl(t&&t.concurrentRequestLimit),this.Ca=new jl,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function lf(t){if(pf(t),3==t.G){var e=t.V++,n=ul(t.F);pl(n,"SID",t.J),pl(n,"RID",e),pl(n,"TYPE","terminate"),yf(t,n),(e=new qh(t,t.h,e,void 0)).K=2,e.v=dl(ul(n)),n=!1,Lu.navigator&&Lu.navigator.sendBeacon&&(n=Lu.navigator.sendBeacon(e.v.toString(),"")),!n&&Lu.Image&&((new Image).src=e.v,n=!0),n||(e.g=Af(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Yh(e)}Cf(t)}function ff(t){t.g&&(wf(t),t.g.cancel(),t.g=null)}function pf(t){ff(t),t.u&&(Lu.clearTimeout(t.u),t.u=null),Tf(t),t.i.cancel(),t.m&&("number"==typeof t.m&&Lu.clearTimeout(t.m),t.m=null)}function df(t,e){t.l.push(new Al(t.Za++,e)),3==t.G&&vf(t)}function vf(t){Dl(t.i)||t.m||(t.m=!0,ah(t.Ha,t),t.C=0)}function gf(t,e){var n;n=e?e.m:t.V++;var r=ul(t.F);pl(r,"SID",t.J),pl(r,"RID",n),pl(r,"AID",t.U),yf(t,r),t.o&&t.s&&uf(r,t.o,t.s),n=new qh(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=mf(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),Ll(t.i,n),Hh(n,r,e)}function yf(t,e){t.j&&nl({},(function(t,n){pl(e,n,t)}))}function mf(t,e,n){n=Math.min(t.l.length,n);var r=t.j?Ku(t.j.Oa,t.j,t):null;t:for(var i=t.l,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].h,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].h,h=i[u].g;if(0>(c-=o))o=Math.max(0,i[u].h-100),s=!1;else try{ql(h,a,"req"+c+"_")}catch(l){r&&r(h)}}if(s){r=a.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function bf(t){t.g||t.u||(t.Y=1,ah(t.Ga,t),t.A=0)}function _f(t){return!(t.g||t.u||3<=t.A)&&(t.Y++,t.u=Ah(Ku(t.Ga,t),Sf(t,t.A)),t.A++,!0)}function wf(t){null!=t.B&&(Lu.clearTimeout(t.B),t.B=null)}function If(t){t.g=new qh(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=ul(t.oa);pl(e,"RID","rpc"),pl(e,"SID",t.J),pl(e,"CI",t.N?"0":"1"),pl(e,"AID",t.U),yf(t,e),pl(e,"TYPE","xmlhttp"),t.o&&t.s&&uf(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=dl(ul(e)),n.s=null,n.U=!0,zh(n,t)}function Tf(t){null!=t.v&&(Lu.clearTimeout(t.v),t.v=null)}function Ef(t,e){var n=null;if(t.g==e){Tf(t),wf(t),t.g=null;var r=2}else{if(!Ol(t.i,e))return;n=e.D,Ml(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;Xc(r=Th(),new Nh(r,n,e,i)),vf(t)}else bf(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(xl(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=Ah(Ku(t.Ha,t,e),Sf(t,t.C)),t.C++,0)))}(t,e)||2==r&&_f(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:kf(t,5);break;case 4:kf(t,10);break;case 3:kf(t,6);break;default:kf(t,2)}}function Sf(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function kf(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=Ku(t.jb,t);n||(n=new sl("//www.google.com/images/cleardot.gif"),Lu.location&&"http"==Lu.location.protocol||cl(n,"https"),dl(n)),function(t,e){var n=new bh;if(Lu.Image){var r=new Image;r.onload=Wu(Vl,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Wu(Vl,n,r,"TestLoadImage: error",!1,e),r.onabort=Wu(Vl,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Wu(Vl,n,r,"TestLoadImage: timeout",!1,e),Lu.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else Ch(2);t.G=0,t.j&&t.j.va(e),Cf(t),pf(t)}function Cf(t){t.G=0,t.I=-1,t.j&&(0==Fl(t.i).length&&0==t.l.length||(t.i.i.length=0,Xu(t.l),t.l.length=0),t.j.ua())}function Nf(t,e,n){var r=function(t){return t instanceof sl?ul(t):new sl(t,void 0)}(n);if(""!=r.i)e&&hl(r,e+"."+r.i),ll(r,r.m);else{var i=Lu.location;r=function(t,e,n,r){var i=new sl(null,void 0);return t&&cl(i,t),e&&hl(i,e),n&&ll(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&oc(t.aa,(function(t,e){pl(r,e,t)})),e=t.D,n=t.sa,e&&n&&pl(r,e,n),pl(r,"VER",t.ma),yf(t,r),r}function Af(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Ba&&!t.qa?new $l(new Bl({ib:!0})):new $l(t.qa)).L=t.H,e}function Pf(){}function Rf(){if(pc&&!(10<=Number(kc)))throw Error("Environmental error: no available transport.")}function Df(t,e){Yc.call(this),this.g=new hf(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!Ju(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ju(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&(e in(t=this.h)&&delete t[e])),this.j=new Lf(this)}function xf(t){Fh.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function Of(){Uh.call(this),this.status=1}function Lf(t){this.g=t}(Du=$l.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Lh.g(),this.C=this.u?xh(this.u):xh(Lh),this.g.onreadystatechange=Ku(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(o){return void tf(this,o)}t=n||"";var i=new rl(this.headers);r&&nl(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=Zl,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=Lu.FormData&&t instanceof Lu.FormData,!(0<=Qu(Jl,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.g.setRequestHeader(e,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{of(this),0<this.B&&((this.K=function(t){return pc&&Ec()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ku(this.pa,this)):this.A=fh(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){tf(this,o)}},Du.pa=function(){void 0!==Ou&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Xc(this,"timeout"),this.abort(8))},Du.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Xc(this,"complete"),Xc(this,"abort"),rf(this))},Du.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),rf(this,!0)),$l.Z.M.call(this)},Du.Fa=function(){this.s||(this.F||this.v||this.l?nf(this):this.cb())},Du.cb=function(){nf(this)},Du.ba=function(){try{return 2<af(this)?this.g.status:-1}catch(lc){return-1}},Du.ga=function(){try{return this.g?this.g.responseText:""}catch(lc){return""}},Du.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Ql(e)}},Du.Da=function(){return this.m},Du.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Du=hf.prototype).ma=8,Du.G=1,Du.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(e){}},Du.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new qh(this,this.h,t,void 0),n=this.s;if(this.P&&(n?uc(n=ac(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=mf(this,e,r),pl(i=ul(this.F),"RID",t),pl(i,"CVER",22),this.D&&pl(i,"X-HTTP-Session-Id",this.D),yf(this,i),this.o&&n&&uf(i,this.o,n),Ll(this.i,e),this.Ra&&pl(i,"TYPE","init"),this.ja?(pl(i,"$req",r),pl(i,"SID","null"),e.$=!0,Hh(e,i,null)):Hh(e,i,r),this.G=2}}else 3==this.G&&(t?gf(this,t):0==this.l.length||Dl(this.i)||gf(this))},Du.Ga=function(){if(this.u=null,If(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=Ah(Ku(this.bb,this),t)}},Du.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ch(10),ff(this),If(this))},Du.ab=function(){null!=this.v&&(this.v=null,ff(this),_f(this),Ch(19))},Du.jb=function(t){t?(this.h.info("Successfully pinged google.com"),Ch(2)):(this.h.info("Failed to ping google.com"),Ch(1))},(Du=Pf.prototype).xa=function(){},Du.wa=function(){},Du.va=function(){},Du.ua=function(){},Du.Oa=function(){},Rf.prototype.g=function(t,e){return new Df(t,e)},Hu(Df,Yc),Df.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),ah(Ku(t.hb,t,e))),Ch(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=Nf(t,null,t.W),vf(t)},Df.prototype.close=function(){lf(this.g)},Df.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,df(this.g,e)}else this.v?((e={}).__data__=Zc(t),df(this.g,e)):df(this.g,t)},Df.prototype.M=function(){this.g.j=null,delete this.j,lf(this.g),delete this.g,Df.Z.M.call(this)},Hu(xf,Fh),Hu(Of,Uh),Hu(Lf,Pf),Lf.prototype.xa=function(){Xc(this.g,"a")},Lf.prototype.wa=function(t){Xc(this.g,new xf(t))},Lf.prototype.va=function(t){Xc(this.g,new Of(t))},Lf.prototype.ua=function(){Xc(this.g,"b")},Rf.prototype.createWebChannel=Rf.prototype.g,Df.prototype.send=Df.prototype.u,Df.prototype.open=Df.prototype.m,Df.prototype.close=Df.prototype.close,Ph.NO_ERROR=0,Ph.TIMEOUT=8,Ph.HTTP_ERROR=6,Rh.COMPLETE="complete",Oh.EventType=Mh,Mh.OPEN="a",Mh.CLOSE="b",Mh.ERROR="c",Mh.MESSAGE="d",Yc.prototype.listen=Yc.prototype.N,$l.prototype.listenOnce=$l.prototype.O,$l.prototype.getLastError=$l.prototype.La,$l.prototype.getLastErrorCode=$l.prototype.Da,$l.prototype.getStatus=$l.prototype.ba,$l.prototype.getResponseJson=$l.prototype.Qa,$l.prototype.getResponseText=$l.prototype.ga,$l.prototype.send=$l.prototype.ea;var Mf=Ph,Ff=Rh,Uf=wh,jf=10,qf=11,Vf=Bl,Bf=Oh,Kf=$l,Wf=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Wf.o=-1;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Hf={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},zf=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return _t(e,t),e}(Error),Gf=new Ne("@firebase/firestore");function Qf(){return Gf.logLevel}function $f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Gf.logLevel<=_e.DEBUG){var r=e.map(Jf);Gf.debug.apply(Gf,kt(["Firestore (8.8.1): "+t],r))}}function Yf(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Gf.logLevel<=_e.ERROR){var r=e.map(Jf);Gf.error.apply(Gf,kt(["Firestore (8.8.1): "+t],r))}}function Xf(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Gf.logLevel<=_e.WARN){var r=e.map(Jf);Gf.warn.apply(Gf,kt(["Firestore (8.8.1): "+t],r))}}function Jf(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(n){return t}var e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zf(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.8.1) INTERNAL ASSERTION FAILED: "+t;throw Yf(e),new Error(e)}function tp(t,e){t||Zf()}function ep(t,e){return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function np(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rp=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=np(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function ip(t,e){return t<e?-1:t>e?1:0}function op(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function ap(t){return t+"\0"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sp=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new zf(Hf.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new zf(Hf.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new zf(Hf.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new zf(Hf.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?ip(this.nanoseconds,t.nanoseconds):ip(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),up=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new sp(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cp(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function hp(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function lp(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fp=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Zf(),void 0===n?n=t.length-e:n>t.length-e&&Zf(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),pp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _t(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var a=o[i];if(a.indexOf("//")>=0)throw new zf(Hf.INVALID_ARGUMENT,"Invalid segment ("+a+"). Paths must not contain // in them.");r.push.apply(r,a.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(fp),dp=/^[_a-zA-Z][_a-zA-Z0-9]*$/,vp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _t(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return dp.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new zf(Hf.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new zf(Hf.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new zf(Hf.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new zf(Hf.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(fp),gp=function(){function t(t){this.fields=t,t.sort(vp.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return op(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),yp=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return ip(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();yp.EMPTY_BYTE_STRING=new yp("");var mp=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bp(t){if(tp(!!t),"string"==typeof t){var e=0,n=mp.exec(t);if(tp(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:_p(t.seconds),nanos:_p(t.nanos)}}function _p(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function wp(t){return"string"==typeof t?yp.fromBase64String(t):yp.fromUint8Array(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ip(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Tp(t){var e=t.mapValue.fields.__previous_value__;return Ip(e)?Tp(e):e}function Ep(t){var e=bp(t.mapValue.fields.__local_write_time__.timestampValue);return new sp(e.seconds,e.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sp(t){return null==t}function kp(t){return 0===t&&1/t==-1/0}function Cp(t){return"number"==typeof t&&Number.isInteger(t)&&!kp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Np=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(pp.fromString(e))},t.fromName=function(e){return new t(pp.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===pp.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return pp.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new pp(e.slice()))},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ap(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ip(t)?4:10:Zf()}function Pp(t,e){var n,r=Ap(t);if(r!==Ap(e))return!1;switch(r){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ep(t).isEqual(Ep(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=bp(t.timestampValue),r=bp(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return n=e,wp(t.bytesValue).isEqual(wp(n.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return _p(t.geoPointValue.latitude)===_p(e.geoPointValue.latitude)&&_p(t.geoPointValue.longitude)===_p(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return _p(t.integerValue)===_p(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=_p(t.doubleValue),r=_p(e.doubleValue);return n===r?kp(n)===kp(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return op(t.arrayValue.values||[],e.arrayValue.values||[],Pp);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(cp(n)!==cp(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Pp(n[i],r[i])))return!1;return!0}(t,e);default:return Zf()}}function Rp(t,e){return void 0!==(t.values||[]).find((function(t){return Pp(t,e)}))}function Dp(t,e){var n,r,i,o,a=Ap(t),s=Ap(e);if(a!==s)return ip(a,s);switch(a){case 0:return 0;case 1:return ip(t.booleanValue,e.booleanValue);case 2:return r=e,i=_p((n=t).integerValue||n.doubleValue),o=_p(r.integerValue||r.doubleValue),i<o?-1:i>o?1:i===o?0:isNaN(i)?isNaN(o)?0:-1:1;case 3:return xp(t.timestampValue,e.timestampValue);case 4:return xp(Ep(t),Ep(e));case 5:return ip(t.stringValue,e.stringValue);case 6:return function(t,e){var n=wp(t),r=wp(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=ip(n[i],r[i]);if(0!==o)return o}return ip(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=ip(_p(t.latitude),_p(e.latitude));return 0!==n?n:ip(_p(t.longitude),_p(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Dp(n[i],r[i]);if(o)return o}return ip(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=ip(r[a],o[a]);if(0!==s)return s;var u=Dp(n[r[a]],i[o[a]]);if(0!==u)return u}return ip(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Zf()}}function xp(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return ip(t,e);var n=bp(t),r=bp(e),i=ip(n.seconds,r.seconds);return 0!==i?i:ip(n.nanos,r.nanos)}function Op(t){return Lp(t)}function Lp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(e=t.timestampValue,"time("+(n=bp(e)).seconds+","+n.nanos+")"):"stringValue"in t?t.stringValue:"bytesValue"in t?wp(t.bytesValue).toBase64():"referenceValue"in t?(i=t.referenceValue,Np.fromName(i).toString()):"geoPointValue"in t?"geo("+(r=t.geoPointValue).latitude+","+r.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Lp(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Lp(t.fields[o])}return e+"}"}(t.mapValue):Zf();var e,n,r,i}function Mp(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function Fp(t){return!!t&&"integerValue"in t}function Up(t){return!!t&&"arrayValue"in t}function jp(t){return!!t&&"nullValue"in t}function qp(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Vp(t){return!!t&&"mapValue"in t}function Bp(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return hp(t.mapValue.fields,(function(t,n){return e.mapValue.fields[t]=Bp(n)})),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Bp(t.arrayValue.values[r]);return n}return Object.assign({},t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kp=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!Vp(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Bp(e)},t.prototype.setAll=function(t){var e=this,n=vp.emptyPath(),r={},i=[];t.forEach((function(t,o){if(!n.isImmediateParentOf(o)){var a=e.getFieldsMap(n);e.applyChanges(a,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=Bp(t):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());Vp(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return Pp(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];Vp(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){hp(e,(function(e,n){return t[e]=n}));for(var r=0,i=n;r<i.length;r++){var o=i[r];delete t[o]}},t.prototype.clone=function(){return new t(Bp(this.value))},t}();function Wp(t){var e=[];return hp(t.fields,(function(t,n){var r=new vp([t]);if(Vp(n)){var i=Wp(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,a=i;o<a.length;o++){var s=a[o];e.push(r.child(s))}}else e.push(r)})),new gp(e)}var Hp=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,up.min(),Kp.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,Kp.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,Kp.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Kp.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Kp.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),zp=function(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.h=null};
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gp(t,e,n,r,i,o,a){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new zp(t,e,n,r,i,o,a)}function Qp(t){var e=ep(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return(e=t).field.canonicalString()+e.op.toString()+Op(e.value);var e})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return(e=t).field.canonicalString()+e.dir;var e})).join(","),Sp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=sd(e.startAt)),e.endAt&&(n+="|ub:",n+=sd(e.endAt)),e.h=n}return e.h}function $p(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!cd(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!Pp(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ld(t.startAt,e.startAt)&&ld(t.endAt,e.endAt)}function Yp(t){return Np.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Xp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return _t(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Jp(t,n,r):"array-contains"===n?new nd(t,r):"in"===n?new rd(t,r):"not-in"===n?new id(t,r):"array-contains-any"===n?new od(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Zp(t,n):new td(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(Dp(e,this.value)):null!==e&&Ap(this.value)===Ap(e)&&this.m(Dp(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Zf()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Jp=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Np.fromName(r.referenceValue),i}return _t(e,t),e.prototype.matches=function(t){var e=Np.comparator(t.key,this.key);return this.m(e)},e}(Xp),Zp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=ed("in",n),r}return _t(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Xp),td=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=ed("not-in",n),r}return _t(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Xp);function ed(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return Np.fromName(t.referenceValue)}))}var nd=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return _t(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return Up(e)&&Rp(e.arrayValue,this.value)},e}(Xp),rd=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return _t(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&Rp(this.value.arrayValue,e)},e}(Xp),id=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return _t(e,t),e.prototype.matches=function(t){if(Rp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!Rp(this.value.arrayValue,e)},e}(Xp),od=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return _t(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!Up(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return Rp(e.value.arrayValue,t)}))},e}(Xp),ad=function(t,e){this.position=t,this.before=e};function sd(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return Op(t)})).join(",")}var ud=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function cd(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function hd(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],a=t.position[i];if(r=o.field.isKeyField()?Np.comparator(Np.fromName(a.referenceValue),n.key):Dp(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function ld(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Pp(t.position[n],e.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fd=function(t,e,n,r,i,o,a,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.p=null,this.T=null,this.startAt,this.endAt};function pd(t,e,n,r,i,o,a,s){return new fd(t,e,n,r,i,o,a,s)}function dd(t){return new fd(t)}function vd(t){return!Sp(t.limit)&&"F"===t.limitType}function gd(t){return!Sp(t.limit)&&"L"===t.limitType}function yd(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function md(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function bd(t){return null!==t.collectionGroup}function _d(t){var e=ep(t);if(null===e.p){e.p=[];var n=md(e),r=yd(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new ud(n)),e.p.push(new ud(vp.keyField(),"asc"));else{for(var i=!1,o=0,a=e.explicitOrderBy;o<a.length;o++){var s=a[o];e.p.push(s),s.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new ud(vp.keyField(),u))}}}return e.p}function wd(t){var e=ep(t);if(!e.T)if("F"===e.limitType)e.T=Gp(e.path,e.collectionGroup,_d(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=_d(e);r<i.length;r++){var o=i[r],a="desc"===o.dir?"asc":"desc";n.push(new ud(o.field,a))}var s=e.endAt?new ad(e.endAt.position,!e.endAt.before):null,u=e.startAt?new ad(e.startAt.position,!e.startAt.before):null;e.T=Gp(e.path,e.collectionGroup,n,e.filters,e.limit,s,u)}return e.T}function Id(t,e,n){return new fd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Td(t,e){return $p(wd(t),wd(e))&&t.limitType===e.limitType}function Ed(t){return Qp(wd(t))+"|lt:"+t.limitType}function Sd(t){return"Query(target="+(e=wd(t),n=e.path.canonicalString(),null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=", filters: ["+e.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+Op(e.value);var e})).join(", ")+"]"),Sp(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=", orderBy: ["+e.orderBy.map((function(t){return(e=t).field.canonicalString()+" ("+e.dir+")";var e})).join(", ")+"]"),e.startAt&&(n+=", startAt: "+sd(e.startAt)),e.endAt&&(n+=", endAt: "+sd(e.endAt)),"Target("+n+"); limitType=")+t.limitType+")";var e,n}function kd(t,e){return e.isFoundDocument()&&(n=t,i=(r=e).key.path,null!==n.collectionGroup?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):Np.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i))&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!hd(t.startAt,_d(t),e)||t.endAt&&hd(t.endAt,_d(t),e))}(t,e);var n,r,i}function Cd(t){return function(e,n){for(var r=!1,i=0,o=_d(t);i<o.length;i++){var a=o[i],s=Nd(a,e,n);if(0!==s)return s;r=r||a.field.isKeyField()}return 0}}function Nd(t,e,n){var r,i,o,a,s=t.field.isKeyField()?Np.comparator(e.key,n.key):(r=t.field,i=n,o=e.data.field(r),a=i.data.field(r),null!==o&&null!==a?Dp(o,a):Zf());switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return Zf()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ad(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kp(e)?"-0":e}}function Pd(t){return{integerValue:""+t}}function Rd(t,e){return Cp(e)?Pd(e):Ad(t,e)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dd=function(){this._=void 0};function xd(t,e,n){return t instanceof Md?(i=e,o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:(r=n).seconds,nanos:r.nanoseconds}}}},i&&(o.fields.__previous_value__=i),{mapValue:o}):t instanceof Fd?Ud(t,e):t instanceof jd?qd(t,e):function(t,e){var n=Ld(t,e),r=Bd(n)+Bd(t.A);return Fp(n)&&Fp(t.A)?Pd(r):Ad(t.R,r)}(t,e);var r,i,o}function Od(t,e,n){return t instanceof Fd?Ud(t,e):t instanceof jd?qd(t,e):n}function Ld(t,e){return t instanceof Vd?Fp(r=e)||(n=r)&&"doubleValue"in n?e:{integerValue:0}:null;var n,r}var Md=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _t(e,t),e}(Dd),Fd=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return _t(e,t),e}(Dd);function Ud(t,e){for(var n=Kd(e),r=function(t){n.some((function(e){return Pp(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var jd=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return _t(e,t),e}(Dd);function qd(t,e){for(var n=Kd(e),r=function(t){n=n.filter((function(e){return!Pp(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Vd=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return _t(e,t),e}(Dd);function Bd(t){return _p(t.integerValue||t.doubleValue)}function Kd(t){return Up(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wd=function(t,e){this.field=t,this.transform=e},Hd=function(t,e){this.version=t,this.transformResults=e},zd=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Gd(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Qd=function(){};function $d(t,e,n){var r,i,o,a,s;t instanceof tv?(i=e,o=n,a=(r=t).value.clone(),s=rv(r.fieldTransforms,i,o.transformResults),a.setAll(s),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()):t instanceof ev?function(t,e,n){if(Gd(t.precondition,e)){var r=rv(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(nv(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Yd(t,e,n){var r;t instanceof tv?function(t,e,n){if(Gd(t.precondition,e)){var r=t.value.clone(),i=iv(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(Zd(e),r).setHasLocalMutations()}}(t,e,n):t instanceof ev?function(t,e,n){if(Gd(t.precondition,e)){var r=iv(t.fieldTransforms,n,e),i=e.data;i.setAll(nv(t)),i.setAll(r),e.convertToFoundDocument(Zd(e),i).setHasLocalMutations()}}(t,e,n):(r=e,Gd(t.precondition,r)&&r.convertToNoDocument(up.min()))}function Xd(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],a=e.data.field(o.field),s=Ld(o.transform,a||null);null!=s&&(null==n&&(n=Kp.empty()),n.set(o.field,s))}return n||null}function Jd(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(n=t.fieldTransforms,r=e.fieldTransforms,!!(void 0===n&&void 0===r||n&&r&&op(n,r,(function(t,e){return r=e,(n=t).field.isEqual(r.field)&&(i=n.transform,o=r.transform,i instanceof Fd&&o instanceof Fd||i instanceof jd&&o instanceof jd?op(i.elements,o.elements,Pp):i instanceof Vd&&o instanceof Vd?Pp(i.A,o.A):i instanceof Md&&o instanceof Md);var n,r,i,o}))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var n,r}function Zd(t){return t.isFoundDocument()?t.version:up.min()}var tv=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return _t(e,t),e}(Qd),ev=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var a=this;return(a=t.call(this)||this).key=e,a.data=n,a.fieldMask=r,a.precondition=i,a.fieldTransforms=o,a.type=1,a}return _t(e,t),e}(Qd);function nv(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function rv(t,e,n){var r=new Map;tp(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],a=o.transform,s=e.data.field(o.field);r.set(o.field,Od(a,s,n[i]))}return r}function iv(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var a=o[i],s=a.transform,u=n.data.field(a.field);r.set(a.field,xd(s,u,e))}return r}var ov,av,sv=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return _t(e,t),e}(Qd),uv=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return _t(e,t),e}(Qd),cv=function(t){this.count=t};function hv(t){switch(t){case Hf.OK:return Zf();case Hf.CANCELLED:case Hf.UNKNOWN:case Hf.DEADLINE_EXCEEDED:case Hf.RESOURCE_EXHAUSTED:case Hf.INTERNAL:case Hf.UNAVAILABLE:case Hf.UNAUTHENTICATED:return!1;case Hf.INVALID_ARGUMENT:case Hf.NOT_FOUND:case Hf.ALREADY_EXISTS:case Hf.PERMISSION_DENIED:case Hf.FAILED_PRECONDITION:case Hf.ABORTED:case Hf.OUT_OF_RANGE:case Hf.UNIMPLEMENTED:case Hf.DATA_LOSS:return!0;default:return Zf()}}function lv(t){if(void 0===t)return Yf("GRPC error has no .code"),Hf.UNKNOWN;switch(t){case ov.OK:return Hf.OK;case ov.CANCELLED:return Hf.CANCELLED;case ov.UNKNOWN:return Hf.UNKNOWN;case ov.DEADLINE_EXCEEDED:return Hf.DEADLINE_EXCEEDED;case ov.RESOURCE_EXHAUSTED:return Hf.RESOURCE_EXHAUSTED;case ov.INTERNAL:return Hf.INTERNAL;case ov.UNAVAILABLE:return Hf.UNAVAILABLE;case ov.UNAUTHENTICATED:return Hf.UNAUTHENTICATED;case ov.INVALID_ARGUMENT:return Hf.INVALID_ARGUMENT;case ov.NOT_FOUND:return Hf.NOT_FOUND;case ov.ALREADY_EXISTS:return Hf.ALREADY_EXISTS;case ov.PERMISSION_DENIED:return Hf.PERMISSION_DENIED;case ov.FAILED_PRECONDITION:return Hf.FAILED_PRECONDITION;case ov.ABORTED:return Hf.ABORTED;case ov.OUT_OF_RANGE:return Hf.OUT_OF_RANGE;case ov.UNIMPLEMENTED:return Hf.UNIMPLEMENTED;case ov.DATA_LOSS:return Hf.DATA_LOSS;default:return Zf()}}(av=ov||(ov={}))[av.OK=0]="OK",av[av.CANCELLED=1]="CANCELLED",av[av.UNKNOWN=2]="UNKNOWN",av[av.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",av[av.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",av[av.NOT_FOUND=5]="NOT_FOUND",av[av.ALREADY_EXISTS=6]="ALREADY_EXISTS",av[av.PERMISSION_DENIED=7]="PERMISSION_DENIED",av[av.UNAUTHENTICATED=16]="UNAUTHENTICATED",av[av.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",av[av.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",av[av.ABORTED=10]="ABORTED",av[av.OUT_OF_RANGE=11]="OUT_OF_RANGE",av[av.UNIMPLEMENTED=12]="UNIMPLEMENTED",av[av.INTERNAL=13]="INTERNAL",av[av.UNAVAILABLE=14]="UNAVAILABLE",av[av.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var fv=function(){function t(t,e){this.comparator=t,this.root=e||dv.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,dv.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dv.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new pv(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new pv(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new pv(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new pv(this.root,t,this.comparator,!0)},t}(),pv=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),dv=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Zf();if(this.right.isRed())throw Zf();var t=this.left.check();if(t!==this.right.check())throw Zf();return t+(this.isRed()?0:1)},t}();dv.EMPTY=null,dv.RED=!0,dv.BLACK=!1,dv.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Zf()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Zf()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Zf()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Zf()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Zf()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new dv(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var vv=function(){function t(t){this.comparator=t,this.data=new fv(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new gv(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new gv(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),gv=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),yv=new fv(Np.comparator);function mv(){return yv}var bv=new fv(Np.comparator);function _v(){return bv}var wv=new fv(Np.comparator);function Iv(){return wv}var Tv=new vv(Np.comparator);function Ev(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Tv,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Sv=new vv(ip);function kv(){return Sv}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cv=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,Nv.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(up.min(),r,kv(),mv(),Ev())},t}(),Nv=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(yp.EMPTY_BYTE_STRING,n,Ev(),Ev(),Ev())},t}(),Av=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},Pv=function(t,e){this.targetId=t,this.V=e},Rv=function(t,e,n,r){void 0===n&&(n=yp.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Dv=function(){function t(){this.S=0,this.D=Lv(),this.C=yp.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=Ev(),e=Ev(),n=Ev();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Zf()}})),new Nv(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=Lv()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),xv=function(){function t(t){this.W=t,this.G=new Map,this.H=mv(),this.J=Ov(),this.Y=new vv(ip)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:Zf()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(Yp(i))if(0===n){var o=new Np(i.path);this.tt(e,o,Hp.newNoDocument(o,up.min()))}else tp(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);if(o){if(r.current&&Yp(o.target)){var a=new Np(o.target.path);null!==e.H.get(a)||e.at(i,a)||e.tt(i,a,Hp.newNoDocument(a,t))}r.$&&(n.set(i,r.M()),r.L())}}));var r=Ev();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new Cv(t,n,this.Y,this.H,r);return this.H=mv(),this.J=Ov(),this.Y=new vv(ip),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new Dv,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new vv(ip),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||$f("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new Dv),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function Ov(){return new fv(Np.comparator)}function Lv(){return new fv(Np.comparator)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mv={asc:"ASCENDING",desc:"DESCENDING"},Fv={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Uv=function(t,e){this.databaseId=t,this.I=e};function jv(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function qv(t,e){return t.I?e.toBase64():e.toUint8Array()}function Vv(t,e){return jv(t,e.toTimestamp())}function Bv(t){return tp(!!t),up.fromTimestamp((e=bp(t),new sp(e.seconds,e.nanos)));var e}function Kv(t,e){return(n=t,new pp(["projects",n.projectId,"databases",n.database])).child("documents").child(e).canonicalString();var n}function Wv(t){var e=pp.fromString(t);return tp(dg(e)),e}function Hv(t,e){return Kv(t.databaseId,e.path)}function zv(t,e){var n=Wv(e);if(n.get(1)!==t.databaseId.projectId)throw new zf(Hf.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new zf(Hf.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Np(Yv(n))}function Gv(t,e){return Kv(t.databaseId,e)}function Qv(t){var e=Wv(t);return 4===e.length?pp.emptyPath():Yv(e)}function $v(t){return new pp(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Yv(t){return tp(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Xv(t,e,n){return{name:Hv(t,e),fields:n.value.mapValue.fields}}function Jv(t,e,n){var r=zv(t,e.name),i=Bv(e.updateTime),o=new Kp({mapValue:{fields:e.fields}}),a=Hp.newFoundDocument(r,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Zv(t,e){var n,r,i;if(e instanceof tv)n={update:Xv(t,e.key,e.value)};else if(e instanceof sv)n={delete:Hv(t,e.key)};else if(e instanceof ev)n={update:Xv(t,e.key,e.data),updateMask:pg(e.fieldMask)};else{if(!(e instanceof uv))return Zf();n={verify:Hv(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Md)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Fd)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof jd)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Vd)return{fieldPath:e.field.canonicalString(),increment:n.A};throw Zf()}(0,t)}))),e.precondition.isNone||(n.currentDocument=(r=t,void 0!==(i=e.precondition).updateTime?{updateTime:Vv(r,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:Zf())),n}function tg(t,e){var n,r=e.currentDocument?void 0!==(n=e.currentDocument).updateTime?zd.updateTime(Bv(n.updateTime)):void 0!==n.exists?zd.exists(n.exists):zd.none():zd.none(),i=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)tp("REQUEST_TIME"===e.setToServerValue),n=new Md;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new Fd(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new jd(i)}else"increment"in e?n=new Vd(t,e.increment):Zf();var o=vp.fromServerFormat(e.fieldPath);return new Wd(o,n)}(t,e)})):[];if(e.update){e.update.name;var o=zv(t,e.update.name),a=new Kp({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){var e=t.fieldPaths||[];return new gp(e.map((function(t){return vp.fromServerFormat(t)})))}(e.updateMask);return new ev(o,a,s,r,i)}return new tv(o,a,r,i)}if(e.delete){var u=zv(t,e.delete);return new sv(u,r)}if(e.verify){var c=zv(t,e.verify);return new uv(c,r)}return Zf()}function eg(t,e){return{documents:[Gv(t,e.path)]}}function ng(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Gv(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Gv(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(qp(t.value))return{unaryFilter:{field:cg(t.field),op:"IS_NAN"}};if(jp(t.value))return{unaryFilter:{field:cg(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(qp(t.value))return{unaryFilter:{field:cg(t.field),op:"IS_NOT_NAN"}};if(jp(t.value))return{unaryFilter:{field:cg(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:cg(t.field),op:ug(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return{field:cg((e=t).field),direction:sg(e.dir)};var e}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var a,s,u=(a=t,s=e.limit,a.I||Sp(s)?s:{value:s});return null!==u&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=og(e.startAt)),e.endAt&&(n.structuredQuery.endAt=og(e.endAt)),n}function rg(t){var e=Qv(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){tp(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var a=[];n.where&&(a=ig(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(t){return new ud(hg((e=t).field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction));var e})));var u,c,h=null;n.limit&&(u=n.limit,h=Sp(c="object"==typeof u?u.value:u)?null:c);var l=null;n.startAt&&(l=ag(n.startAt));var f=null;return n.endAt&&(f=ag(n.endAt)),pd(e,i,s,a,h,"F",l,f)}function ig(t){return t?void 0!==t.unaryFilter?[fg(t)]:void 0!==t.fieldFilter?[lg(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return ig(t)})).reduce((function(t,e){return t.concat(e)})):Zf():[]}function og(t){return{before:t.before,values:t.position}}function ag(t){var e=!!t.before,n=t.values||[];return new ad(n,e)}function sg(t){return Mv[t]}function ug(t){return Fv[t]}function cg(t){return{fieldPath:t.canonicalString()}}function hg(t){return vp.fromServerFormat(t.fieldPath)}function lg(t){return Xp.create(hg(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Zf()}}(t.fieldFilter.op),t.fieldFilter.value)}function fg(t){switch(t.unaryFilter.op){case"IS_NAN":var e=hg(t.unaryFilter.field);return Xp.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=hg(t.unaryFilter.field);return Xp.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=hg(t.unaryFilter.field);return Xp.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=hg(t.unaryFilter.field);return Xp.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Zf()}}function pg(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function dg(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=yg(e)),e=gg(t.get(n),e);return yg(e)}function gg(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function yg(t){return t+""}function mg(t){var e=t.length;if(tp(e>=2),2===e)return tp(""===t.charAt(0)&&""===t.charAt(1)),pp.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf("",o);switch((a<0||a>n)&&Zf(),t.charAt(a+1)){case"":var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"":i+=t.substring(o,a),i+="\0";break;case"":i+=t.substring(o,a+1);break;default:Zf()}o=a+2}return new pp(r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bg=function(t,e){this.seconds=t,this.nanoseconds=e},_g=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};_g.store="owner",_g.key="owner";var wg=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};wg.store="mutationQueues",wg.keyPath="userId";var Ig=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Ig.store="mutations",Ig.keyPath="batchId",Ig.userMutationsIndex="userMutationsIndex",Ig.userMutationsKeyPath=["userId","batchId"];var Tg=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,vg(e)]},t.key=function(t,e,n){return[t,vg(e),n]},t}();Tg.store="documentMutations",Tg.PLACEHOLDER=new Tg;var Eg=function(t,e){this.path=t,this.readTime=e},Sg=function(t,e){this.path=t,this.version=e},kg=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};kg.store="remoteDocuments",kg.readTimeIndex="readTimeIndex",kg.readTimeIndexPath="readTime",kg.collectionReadTimeIndex="collectionReadTimeIndex",kg.collectionReadTimeIndexPath=["parentPath","readTime"];var Cg=function(t){this.byteSize=t};Cg.store="remoteDocumentGlobal",Cg.key="remoteDocumentGlobalKey";var Ng=function(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};Ng.store="targets",Ng.keyPath="targetId",Ng.queryTargetsIndexName="queryTargetsIndex",Ng.queryTargetsKeyPath=["canonicalId","targetId"];var Ag=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Ag.store="targetDocuments",Ag.keyPath=["targetId","path"],Ag.documentTargetsIndex="documentTargetsIndex",Ag.documentTargetsKeyPath=["path","targetId"];var Pg=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Pg.key="targetGlobalKey",Pg.store="targetGlobal";var Rg=function(t,e){this.collectionId=t,this.parent=e};Rg.store="collectionParents",Rg.keyPath=["collectionId","parent"];var Dg=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Dg.store="clientMetadata",Dg.keyPath="clientId";var xg=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};xg.store="bundles",xg.keyPath="bundleId";var Og=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Og.store="namedQueries",Og.keyPath="name";var Lg=kt(kt([],kt(kt([],kt(kt([],kt(kt([],[wg.store,Ig.store,Tg.store,kg.store,Ng.store,_g.store,Pg.store,Ag.store]),[Dg.store])),[Cg.store])),[Rg.store])),[xg.store,Og.store]),Mg="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Fg=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),Ug=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},jg=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Zf(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(r){return t.reject(r)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),qg=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new Ug,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new Kg(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=Qg(e.target.error);n.ft.reject(new Kg(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(o){throw new Kg(n,o)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||($f("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Hg(e)},t}(),Vg=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(Ut())&&Yf("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return $f("SimpleDb","Removing database:",t),zg(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=Ut(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return It(this,void 0,void 0,(function(){var e,n=this;return Tt(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:($f("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Kg(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new zf(Hf.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new Kg(t,n))},i.onupgradeneeded=function(t){$f("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.wt.Rt(e,i.transaction,t.oldVersion,n.version).next((function(){$f("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return It(this,void 0,void 0,(function(){var i,o,a,s,u;return Tt(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,a=function(){var e,a,u,c,h;return Tt(this,(function(l){switch(l.label){case 0:++o,l.label=1;case 1:return l.trys.push([1,4,,5]),[4,s.At(t)];case 2:return s.db=l.sent(),e=qg.open(s.db,t,i?"readonly":"readwrite",n),a=r(e).catch((function(t){return e.abort(t),jg.reject(t)})).toPromise(),u={},a.catch((function(){})),[4,e.dt];case 3:return[2,(u.value=(l.sent(),a),u)];case 4:return c=l.sent(),h="FirebaseError"!==c.name&&o<3,$f("SimpleDb","Transaction failed with error:",c.message,"Retrying:",h),s.close(),h?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},s=this,c.label=1;case 1:return[5,a()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Bg=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return zg(this.Pt.delete())},t}(),Kg=function(t){function e(e,n){var r=this;return(r=t.call(this,Hf.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return _t(e,t),e}(zf);function Wg(t){return"IndexedDbTransactionError"===t.name}var Hg=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?($f("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):($f("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),zg(n)},t.prototype.add=function(t){return $f("SimpleDb","ADD",this.store.name,t,t),zg(this.store.add(t))},t.prototype.get=function(t){var e=this;return zg(this.store.get(t)).next((function(n){return void 0===n&&(n=null),$f("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return $f("SimpleDb","DELETE",this.store.name,t),zg(this.store.delete(t))},t.prototype.count=function(){return $f("SimpleDb","COUNT",this.store.name),zg(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.Ft=function(t,e){$f("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,(function(t,e,n){return n.delete()}))},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new jg((function(n,r){e.onerror=function(t){var e=Qg(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.xt=function(t,e){var n=[];return new jg((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Bg(i),a=e(i.primaryKey,i.value,o);if(a instanceof jg){var s=a.catch((function(t){return o.done(),jg.reject(t)}));n.push(s)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return jg.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function zg(t){return new jg((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=Qg(t.target.error);n(e)}}))}var Gg=!1;function Qg(t){var e=Vg._t(Ut());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new zf("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Gg||(Gg=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $g=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return _t(e,t),e}(Fg);function Yg(t,e){var n=ep(t);return Vg.It(n.Mt,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xg=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&$d(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&Yd(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&Yd(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(up.min())}))},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Ev())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&op(this.mutations,t.mutations,(function(t,e){return Jd(t,e)}))&&op(this.baseMutations,t.baseMutations,(function(t,e){return Jd(t,e)}))},t}(),Jg=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){tp(e.mutations.length===r.length);for(var i=Iv(),o=e.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new t(e,n,r,i)},t}(),Zg=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=up.min()),void 0===o&&(o=up.min()),void 0===a&&(a=yp.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),ty=function(t){this.Lt=t};function ey(t,e){if(e.document)return Jv(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Np.fromSegments(e.noDocument.path),r=ay(e.noDocument.readTime),i=Hp.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=Np.fromSegments(e.unknownDocument.path);return r=ay(e.unknownDocument.version),Hp.newUnknownDocument(o,r)}return Zf()}function ny(t,e,n){var r,i,o=ry(n),a=e.key.path.popLast().toArray();if(e.isFoundDocument()){var s={name:Hv(r=t.Lt,(i=e).key),fields:i.data.value.mapValue.fields,updateTime:jv(r,i.version.toTimestamp())},u=e.hasCommittedMutations;return new kg(null,null,s,u,o,a)}if(e.isNoDocument()){var c=e.key.path.toArray(),h=oy(e.version);return u=e.hasCommittedMutations,new kg(null,new Eg(c,h),null,u,o,a)}if(e.isUnknownDocument()){var l=e.key.path.toArray(),f=oy(e.version);return new kg(new Sg(l,f),null,null,!0,o,a)}return Zf()}function ry(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function iy(t){var e=new sp(t[0],t[1]);return up.fromTimestamp(e)}function oy(t){var e=t.toTimestamp();return new bg(e.seconds,e.nanoseconds)}function ay(t){var e=new sp(t.seconds,t.nanoseconds);return up.fromTimestamp(e)}function sy(t,e){for(var n=(e.baseMutations||[]).map((function(e){return tg(t.Lt,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var a=e.mutations.map((function(e){return tg(t.Lt,e)})),s=sp.fromMillis(e.localWriteTimeMs);return new Xg(e.batchId,s,n,a)}function uy(t){var e,n,r=ay(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?ay(t.lastLimboFreeSnapshotVersion):up.min();return void 0!==t.query.documents?(tp(1===(n=t.query).documents.length),e=wd(dd(Qv(n.documents[0])))):e=wd(rg(t.query)),new Zg(e,t.targetId,0,t.lastListenSequenceNumber,r,i,yp.fromBase64String(t.resumeToken))}function cy(t,e){var n,r=oy(e.snapshotVersion),i=oy(e.lastLimboFreeSnapshotVersion);n=Yp(e.target)?eg(t.Lt,e.target):ng(t.Lt,e.target);var o=e.resumeToken.toBase64();return new Ng(e.targetId,Qp(e.target),r,o,e.sequenceNumber,i,n)}function hy(t){var e=rg({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Id(e,e.limit,"L"):e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ly=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return fy(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:ay(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return fy(t).put({bundleId:(n=e).id,createTime:oy(Bv(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return py(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:hy(e.bundledQuery),readTime:ay(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return py(t).put({name:(n=e).name,readTime:oy(Bv(n.readTime)),bundledQuery:n.bundledQuery});var n},t}();function fy(t){return Yg(t,xg.store)}function py(t){return Yg(t,Og.store)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dy=function(){function t(){this.Bt=new vy}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),jg.resolve()},t.prototype.getCollectionParents=function(t,e){return jg.resolve(this.Bt.getEntries(e))},t}(),vy=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new vv(pp.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new vv(pp.comparator)).toArray()},t}(),gy=function(){function t(){this.qt=new vy}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.qt.add(e)}));var o={collectionId:r,parent:vg(i)};return yy(t).put(o)}return jg.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[ap(e),""],!1,!0);return yy(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(mg(o.parent))}return n}))},t}();function yy(t){return Yg(t,Rg.store)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var my={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},by=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _y(t,e,n){var r=t.store(Ig.store),i=t.store(Tg.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.$t({range:a},(function(t,e,n){return s++,n.delete()}));o.push(u.next((function(){tp(1===s)})));for(var c=[],h=0,l=n.mutations;h<l.length;h++){var f=l[h],p=Tg.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return jg.waitFor(o).next((function(){return c}))}function wy(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Zf();e=t.noDocument}return JSON.stringify(e).length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */by.DEFAULT_COLLECTION_PERCENTILE=10,by.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,by.DEFAULT=new by(41943040,by.DEFAULT_COLLECTION_PERCENTILE,by.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),by.DISABLED=new by(-1,0,0);var Iy=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return tp(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ey(t).$t({index:Ig.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=Sy(t),a=Ey(t);return a.add({}).next((function(s){tp("number"==typeof s);for(var u=new Xg(s,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return Zv(t.Lt,e)})),i=n.mutations.map((function(e){return Zv(t.Lt,e)}));return new Ig(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),h=[],l=new vv((function(t,e){return ip(t.canonicalString(),e.canonicalString())})),f=0,p=r;f<p.length;f++){var d=p[f],v=Tg.key(i.userId,d.key.path,s);l=l.add(d.key.path.popLast()),h.push(a.put(c)),h.push(o.put(v,Tg.PLACEHOLDER))}return l.forEach((function(e){h.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Kt[s]=u.keys()})),jg.waitFor(h).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Ey(t).get(e).next((function(t){return t?(tp(t.userId===n.userId),sy(n.R,t)):null}))},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?jg.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Ey(t).$t({index:Ig.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(tp(e.batchId>=r),o=sy(n.R,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Ey(t).$t({index:Ig.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ey(t).Nt(Ig.userMutationsIndex,n).next((function(t){return t.map((function(t){return sy(e.R,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Tg.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Sy(t).$t({range:i},(function(r,i,a){var s=r[0],u=r[1],c=r[2],h=mg(u);if(s===n.userId&&e.path.isEqual(h))return Ey(t).get(c).next((function(t){if(!t)throw Zf();tp(t.userId===n.userId),o.push(sy(n.R,t))}));a.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new vv(ip),i=[];return e.forEach((function(e){var o=Tg.prefixForPath(n.userId,e.path),a=IDBKeyRange.lowerBound(o),s=Sy(t).$t({range:a},(function(t,i,o){var a=t[0],s=t[1],u=t[2],c=mg(s);a===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(s)})),jg.waitFor(i).next((function(){return n.Wt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=Tg.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new vv(ip);return Sy(t).$t({range:a},(function(t,e,o){var a=t[0],u=t[1],c=t[2],h=mg(u);a===n.userId&&r.isPrefixOf(h)?h.length===i&&(s=s.add(c)):o.done()})).next((function(){return n.Wt(t,s)}))},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Ey(t).get(e).next((function(t){if(null===t)throw Zf();tp(t.userId===n.userId),r.push(sy(n.R,t))})))})),jg.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return _y(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),jg.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return jg.resolve();var r=IDBKeyRange.lowerBound(Tg.prefixForUser(e.userId)),i=[];return Sy(t).$t({range:r},(function(t,n,r){if(t[0]===e.userId){var o=mg(t[1]);i.push(o)}else r.done()})).next((function(){tp(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return Ty(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return ky(t).get(this.userId).next((function(t){return t||new wg(e.userId,-1,"")}))},t}();function Ty(t,e,n){var r=Tg.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return Sy(t).$t({range:o,kt:!0},(function(t,n,r){var o=t[0],s=t[1];t[2],o===e&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function Ey(t){return Yg(t,Ig.store)}function Sy(t){return Yg(t,Tg.store)}function ky(t){return Yg(t,wg.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cy=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),Ny=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new Cy(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return up.fromTimestamp(new sp(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return Ay(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return tp(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return Ay(t).$t((function(a,s){var u=uy(s);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return jg.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return Ay(t).$t((function(t,n){var r=uy(n);e(r)}))},t.prototype.Xt=function(t){return Py(t).get(Pg.key).next((function(t){return tp(null!==t),t}))},t.prototype.Zt=function(t,e){return Py(t).put(Pg.key,e)},t.prototype.te=function(t,e){return Ay(t).put(cy(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=Qp(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Ay(t).$t({range:r,index:Ng.queryTargetsIndexName},(function(t,n,r){var o=uy(n);$p(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Ry(t);return e.forEach((function(e){var a=vg(e.path);i.push(o.put(new Ag(n,a))),i.push(r.referenceDelegate.addReference(t,n,e))})),jg.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Ry(t);return jg.forEach(e,(function(e){var o=vg(e.path);return jg.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Ry(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Ry(t),i=Ev();return r.$t({range:n,kt:!0},(function(t,e,n){var r=mg(t[1]),o=new Np(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=vg(e.path),r=IDBKeyRange.bound([n],[ap(n)],!1,!0),i=0;return Ry(t).$t({index:Ag.documentTargetsIndex,kt:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.lt=function(t,e){return Ay(t).get(e).next((function(t){return t?uy(t):null}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ay(t){return Yg(t,Ng.store)}function Py(t){return Yg(t,Pg.store)}function Ry(t){return Yg(t,Ag.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dy(t){return It(this,void 0,void 0,(function(){return Tt(this,(function(e){if(t.code!==Hf.FAILED_PRECONDITION||t.message!==Mg)throw t;return $f("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xy(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=ip(n,i);return 0===a?ip(r,o):a}var Oy=function(){function t(t){this.ne=t,this.buffer=new vv(xy),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();xy(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Ly=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;$f("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return It(e,void 0,void 0,(function(){var e;return Tt(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Wg(e=n.sent())?($f("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Dy(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),My=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return jg.resolve(Wf.o);var r=new Oy(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?($f("LruGarbageCollector","Garbage collection skipped; disabled"),jg.resolve(my)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?($f("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),my):n.fe(t,e)}))},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,a,s,u,c=this,h=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>c.params.maximumSequenceNumbersToCollect?($f("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)})).next((function(r){return n=r,a=Date.now(),c.removeTargets(t,n,e)})).next((function(e){return i=e,s=Date.now(),c.removeOrphanedDocuments(t,n)})).next((function(t){return u=Date.now(),Qf()<=_e.DEBUG&&$f("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(s-a)+"ms\n\tRemoved "+t+" documents in "+(u-s)+"ms\nTotal Duration: "+(u-h)+"ms"),jg.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},t}(),Fy=function(){function t(t,e){this.db=t,this.garbageCollector=new My(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return Uy(t,n)},t.prototype.removeReference=function(t,e,n){return Uy(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return Uy(t,e)},t.prototype._e=function(t,e){return r=e,i=!1,ky(n=t).Ot((function(t){return Ty(n,t,r).next((function(t){return t&&(i=!0),jg.resolve(!t)}))})).next((function(){return i}));var n,r,i},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(a,s){if(s<=e){var u=n._e(t,a).next((function(e){if(!e)return o++,r.getEntry(t,a).next((function(){return r.removeEntry(a),Ry(t).delete([0,vg(a.path)])}))}));i.push(u)}})).next((function(){return jg.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Uy(t,e)},t.prototype.we=function(t,e){var n,r=Ry(t),i=Wf.o;return r.$t({index:Ag.documentTargetsIndex},(function(t,r){var o=t[0];t[1];var a=r.path,s=r.sequenceNumber;0===o?(i!==Wf.o&&e(new Np(mg(n)),i),i=s,n=a):i=Wf.o})).next((function(){i!==Wf.o&&e(new Np(mg(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Uy(t,e){return Ry(t).put((n=e,r=t.currentSequenceNumber,new Ag(0,vg(n.path),r)));var n,r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jy=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(this.equalsFn(a,t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){hp(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];t(a,s)}}))},t.prototype.isEmpty=function(){return lp(this.inner)},t}(),qy=function(){function t(){this.changes=new jy((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:up.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:Hp.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?jg.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Vy=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return Wy(t).put(Hy(e),n)},t.prototype.removeEntry=function(t,e){var n=Wy(t),r=Hy(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return Wy(t).get(Hy(e)).next((function(t){return n.ye(e,t)}))},t.prototype.ge=function(t,e){var n=this;return Wy(t).get(Hy(e)).next((function(t){return{document:n.ye(e,t),size:wy(t)}}))},t.prototype.getEntries=function(t,e){var n=this,r=mv();return this.pe(t,e,(function(t,e){var i=n.ye(t,e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.Ee=function(t,e){var n=this,r=mv(),i=new fv(Np.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,wy(e))})).next((function(){return{documents:r,Te:i}}))},t.prototype.pe=function(t,e,n){if(e.isEmpty())return jg.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Wy(t).$t({range:r},(function(t,e,r){for(var a=Np.fromSegments(t);o&&Np.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=mv(),o=e.path.length+1,a={};if(n.isEqual(up.min())){var s=e.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=e.path.toArray(),c=ry(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=kg.collectionReadTimeIndex}return Wy(t).$t(a,(function(t,n,a){if(t.length===o){var s=ey(r.R,n);e.path.isPrefixOf(s.key.path)?kd(e,s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new By(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Ky(t).get(Cg.key).next((function(t){return tp(!!t),t}))},t.prototype.me=function(t,e){return Ky(t).put(Cg.key,e)},t.prototype.ye=function(t,e){if(e){var n=ey(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(up.min()))return n}return Hp.newInvalidDocument(t)},t}(),By=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new jy((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return _t(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new vv((function(t,e){return ip(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,a){var s=e.Ae.get(o);if(a.document.isValidDocument()){var u=ny(e.Ie.R,a.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=wy(u);r+=c-s,n.push(e.Ie.addEntry(t,o,u))}else if(r-=s,e.trackRemovals){var h=ny(e.Ie.R,Hp.newNoDocument(o,up.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,h))}else n.push(e.Ie.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),jg.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},e}(qy);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ky(t){return Yg(t,Cg.store)}function Wy(t){return Yg(t,kg.store)}function Hy(t){return t.path.toArray()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zy=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;tp(n<r&&n>=0&&r<=11);var o=new qg("createOrUpgrade",e);n<1&&r>=1&&(t.createObjectStore(_g.store),function(t){t.createObjectStore(wg.store,{keyPath:wg.keyPath}),t.createObjectStore(Ig.store,{keyPath:Ig.keyPath,autoIncrement:!0}).createIndex(Ig.userMutationsIndex,Ig.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Tg.store)}(t),Gy(t),function(t){t.createObjectStore(kg.store)}(t));var a=jg.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Ag.store),t.deleteObjectStore(Ng.store),t.deleteObjectStore(Pg.store)}(t),Gy(t)),a=a.next((function(){return function(t){var e=t.store(Pg.store),n=new Pg(0,0,up.min().toTimestamp(),0);return e.put(Pg.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(t,e){return e.store(Ig.store).Nt().next((function(n){t.deleteObjectStore(Ig.store),t.createObjectStore(Ig.store,{keyPath:Ig.keyPath,autoIncrement:!0}).createIndex(Ig.userMutationsIndex,Ig.userMutationsKeyPath,{unique:!0});var r=e.store(Ig.store),i=n.map((function(t){return r.put(t)}));return jg.waitFor(i)}))}(t,o)}))),a=a.next((function(){!function(t){t.createObjectStore(Dg.store,{keyPath:Dg.keyPath})}(t)}))),n<5&&r>=5&&(a=a.next((function(){return i.Re(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(t){t.createObjectStore(Cg.store)}(t),i.be(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ve(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.Pe(t,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(kg.store);e.createIndex(kg.readTimeIndex,kg.readTimeIndexPath,{unique:!1}),e.createIndex(kg.collectionReadTimeIndex,kg.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(a=a.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(a=a.next((function(){!function(t){t.createObjectStore(xg.store,{keyPath:xg.keyPath})}(t),function(t){t.createObjectStore(Og.store,{keyPath:Og.keyPath})}(t)}))),a},t.prototype.be=function(t){var e=0;return t.store(kg.store).$t((function(t,n){e+=wy(n)})).next((function(){var n=new Cg(e);return t.store(Cg.store).put(Cg.key,n)}))},t.prototype.Re=function(t){var e=this,n=t.store(wg.store),r=t.store(Ig.store);return n.Nt().next((function(n){return jg.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(Ig.userMutationsIndex,i).next((function(r){return jg.forEach(r,(function(r){tp(r.userId===n.userId);var i=sy(e.R,r);return _y(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ve=function(t){var e=t.store(Ag.store),n=t.store(kg.store);return t.store(Pg.store).get(Pg.key).next((function(t){var r=[];return n.$t((function(n,i){var o=new pp(n),a=[0,vg(o)];r.push(e.get(a).next((function(n){return n?jg.resolve():(r=o,e.put(new Ag(0,vg(r),t.highestListenSequenceNumber)));var r})))})).next((function(){return jg.waitFor(r)}))}))},t.prototype.Pe=function(t,e){t.createObjectStore(Rg.store,{keyPath:Rg.keyPath});var n=e.store(Rg.store),r=new vy,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:vg(i)})}};return e.store(kg.store).$t({kt:!0},(function(t,e){var n=new pp(t);return i(n.popLast())})).next((function(){return e.store(Tg.store).$t({kt:!0},(function(t,e){t[0];var n=t[1];t[2];var r=mg(n);return i(r.popLast())}))}))},t.prototype.Ve=function(t){var e=this,n=t.store(Ng.store);return n.$t((function(t,r){var i=uy(r),o=cy(e.R,i);return n.put(o)}))},t}();function Gy(t){t.createObjectStore(Ag.store,{keyPath:Ag.keyPath}).createIndex(Ag.documentTargetsIndex,Ag.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Ng.store,{keyPath:Ng.keyPath}).createIndex(Ng.queryTargetsIndexName,Ng.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Pg.store)}var Qy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",$y=function(){function t(e,n,r,i,o,a,s,u,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=a,this.document=s,this.De=c,this.Ce=h,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new zf(Hf.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");var l,f;this.referenceDelegate=new Fy(this,i),this.Le=n+"main",this.R=new ty(u),this.Be=new Vg(this.Le,11,new zy(this.R)),this.qe=new Ny(this.referenceDelegate,this.R),this.Ut=new gy,this.Ue=(l=this.R,f=this.Ut,new Vy(l,f)),this.Ke=new ly,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===h&&Yf("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new zf(Hf.FAILED_PRECONDITION,Qy);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new Wf(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},t.prototype.He=function(t){var e=this;return this.Me=function(n){return It(e,void 0,void 0,(function(){return Tt(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return It(e,void 0,void 0,(function(){return Tt(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return It(e,void 0,void 0,(function(){return Tt(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return Xy(e).put(new Dg(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(Wg(e))return $f("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return $f("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},t.prototype.Je=function(t){var e=this;return Yy(t).get(_g.key).next((function(t){return jg.resolve(e.tn(t))}))},t.prototype.en=function(t){return Xy(t).delete(this.clientId)},t.prototype.nn=function(){return It(this,void 0,void 0,(function(){var t,e,n,r,i=this;return Tt(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=Yg(t,Dg.store);return e.Nt().next((function(t){var n=i.rn(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return jg.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)r=n[e],this.Qe.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?jg.resolve(!0):Yy(t).get(_g.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new zf(Hf.FAILED_PRECONDITION,Qy);return!1}}return!(!e.networkEnabled||!e.inForeground)||Xy(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&$f("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return It(this,void 0,void 0,(function(){var t=this;return Tt(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[_g.store,Dg.store],(function(e){var n=new $g(e,Wf.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},t.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return Xy(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return Iy.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;$f("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Be.runTransaction(t,o,Lg,(function(o){return i=new $g(o,r.Ne?r.Ne.next():Wf.o),"readwrite-primary"===e?r.Je(i).next((function(t){return!!t||r.Ye(i)})).next((function(e){if(!e)throw Yf("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new zf(Hf.FAILED_PRECONDITION,Mg);return n(i)})).next((function(t){return r.Ze(i).next((function(){return t}))})):r.dn(i).next((function(){return n(i)}))})).then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.dn=function(t){var e=this;return Yy(t).get(_g.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new zf(Hf.FAILED_PRECONDITION,Qy)}))},t.prototype.Ze=function(t){var e=new _g(this.clientId,this.allowTabSynchronization,Date.now());return Yy(t).put(_g.key,e)},t.yt=function(){return Vg.yt()},t.prototype.Xe=function(t){var e=this,n=Yy(t);return n.get(_g.key).next((function(t){return e.tn(t)?($f("IndexedDbPersistence","Releasing primary lease."),n.delete(_g.key)):jg.resolve()}))},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Yf("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),!qt()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match("Version/14")&&e.Se.enterRestrictedMode(!0),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("pagehide",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return $f("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(r){return Yf("IndexedDbPersistence","Failed to get zombied client id.",r),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Yf("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Yy(t){return Yg(t,_g.store)}function Xy(t){return Yg(t,Dg.store)}function Jy(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Zy=function(t,e){this.progress=t,this.wn=e},tm=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},t.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return r=e,Np.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.Tn(t,e.path):bd(e)?this.In(t,e,n):this.An(t,e,n);var r},t.prototype.Tn=function(t,e){return this.mn(t,new Np(e)).next((function(t){var e=_v();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=_v();return this.Ut.getCollectionParents(t,i).next((function(a){return jg.forEach(a,(function(a){var s,u,c=(s=e,u=a.child(i),new fd(u,null,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt));return r.An(t,c,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.Rn(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,h=r.get(c);null==h&&(h=Hp.newInvalidDocument(c),r=r.insert(c,h)),Yd(u,h,o.localWriteTime),h.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){kd(e,n)||(r=r.remove(t))})),r}))},t.prototype.Rn=function(t,e,n){for(var r=Ev(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof ev&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},t}(),em=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=Ev(),i=Ev(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),nm=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i,o=this;return 0===(i=e).filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())||n.isEqual(up.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(i){var a=o.Cn(e,i);return(vd(e)||gd(e))&&o.Nn(e.limitType,a,r,n)?o.Dn(t,e):(Qf()<=_e.DEBUG&&$f("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Sd(e)),o.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return a.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.Cn=function(t,e){var n=new vv(Cd(t));return e.forEach((function(e,r){kd(t,r)&&(n=n.add(r))})),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return Qf()<=_e.DEBUG&&$f("QueryEngine","Using full collection scan to execute query:",Sd(e)),this.Sn.getDocumentsMatchingQuery(t,e,up.min())},t}(),rm=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new fv(ip),this.kn=new jy((function(t){return Qp(t)}),$p),this.$n=up.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new tm(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.Fn)}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function im(t,e,n,r){return new rm(t,e,n,r)}function om(t,e){return It(this,void 0,void 0,(function(){var n,r,i,o;return Tt(this,(function(a){switch(a.label){case 0:return n=ep(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n._n.getAllMutationBatches(t).next((function(a){return o=a,r=n.persistence.getMutationQueue(e),i=new tm(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],a=Ev(),s=0,u=o;s<u.length;s++){var c=u[s];n.push(c.batchId);for(var h=0,l=c.mutations;h<l.length;h++){var f=l[h];a=a.add(f.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var g=0,y=v.mutations;g<y.length;g++){var m=y[g];a=a.add(m.key)}}return i.pn(t,a).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=a.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function am(t,e){var n=ep(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r,i,o,a,s,u,c,h=e.batch.keys(),l=n.On.newChangeBuffer({trackRemovals:!0});return(r=n,i=t,o=e,a=l,s=o.batch,u=s.keys(),c=jg.resolve(),u.forEach((function(t){c=c.next((function(){return a.getEntry(i,t)})).next((function(e){var n=o.docVersions.get(t);tp(null!==n),e.version.compareTo(n)<0&&(s.applyToRemoteDocument(e,o),e.isValidDocument()&&a.addEntry(e,o.commitVersion))}))})),c.next((function(){return r._n.removeMutationBatch(i,s)}))).next((function(){return l.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,h)}))}))}function sm(t){var e=ep(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function um(t,e){var n=ep(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var a=[];e.targetChanges.forEach((function(e,o){var s,u,c,h=i.get(o);if(h){a.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)})));var l=e.resumeToken;if(l.approximateByteSize()>0){var f=h.withResumeToken(l,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,f),s=h,c=e,tp((u=f).resumeToken.approximateByteSize()>0),(0===s.resumeToken.approximateByteSize()||u.snapshotVersion.toMicroseconds()-s.snapshotVersion.toMicroseconds()>=3e8||c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size>0)&&a.push(n.qe.updateTargetData(t,f))}}}));var s=mv();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),a.push(cm(t,o,e.documentUpdates,r,void 0).next((function(t){s=t}))),!r.isEqual(up.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)}));a.push(u)}return jg.waitFor(a).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,s)})).next((function(){return s}))})).then((function(t){return n.Fn=i,t}))}function cm(t,e,n,r,i){var o=Ev();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=mv();return n.forEach((function(n,a){var s=t.get(n),u=(null==i?void 0:i.get(n))||r;a.isNoDocument()&&a.version.isEqual(up.min())?(e.removeEntry(n,u),o=o.insert(n,a)):!s.isValidDocument()||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(e.addEntry(a,u),o=o.insert(n,a)):$f("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)})),o}))}function hm(t,e){var n=ep(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)}))}function lm(t,e){var n=ep(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?(r=i,jg.resolve(r)):n.qe.allocateTargetId(t).next((function(i){return r=new Zg(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t}))}function fm(t,e,n){return It(this,void 0,void 0,(function(){var r,i,o,a;return Tt(this,(function(s){switch(s.label){case 0:r=ep(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",s.label=1;case 1:return s.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.referenceDelegate.removeTarget(t,i)}))];case 2:s.sent(),s.label=3;case 3:return[3,5];case 4:if(!Wg(a=s.sent()))throw a;return $f("LocalStore","Failed to update sequence numbers for target "+e+": "+a),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}}))}))}function pm(t,e,n){var r=ep(t),i=up.min(),o=Ev();return r.persistence.runTransaction("Execute query","readonly",(function(t){return(a=r,s=t,u=wd(e),c=ep(a),h=c.kn.get(u),void 0!==h?jg.resolve(c.Fn.get(h)):c.qe.getTargetData(s,u)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:up.min(),n?o:Ev())})).next((function(t){return{documents:t,Bn:o}}));var a,s,u,c,h}))}function dm(t,e){var n=ep(t),r=ep(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function vm(t){var e=ep(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return n=e.On,r=t,i=e.$n,o=ep(n),a=mv(),s=ry(i),u=Wy(r),c=IDBKeyRange.lowerBound(s,!0),u.$t({index:kg.readTimeIndex,range:c},(function(t,e){var n=ey(o.R,e);a=a.insert(n.key,n),s=e.readTime})).next((function(){return{wn:a,readTime:iy(s)}}));var n,r,i,o,a,s,u,c})).then((function(t){var n=t.wn,r=t.readTime;return e.$n=r,n}))}function gm(t){return It(this,void 0,void 0,(function(){var e;return Tt(this,(function(n){return[2,(e=ep(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return e=Wy(t),n=up.min(),e.$t({index:kg.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=iy(e.readTime)),r.done()})).next((function(){return n}));var e,n})).then((function(t){e.$n=t}))]}))}))}function ym(t,e,n,r){return It(this,void 0,void 0,(function(){var i,o,a,s,u,c,h,l,f,p;return Tt(this,(function(d){switch(d.label){case 0:for(i=ep(t),o=Ev(),a=mv(),s=Iv(),u=0,c=n;u<c.length;u++)h=c[u],l=e.qn(h.metadata.name),h.document&&(o=o.add(l)),a=a.insert(l,e.Un(h)),s=s.insert(l,e.Kn(h.metadata.readTime));return f=i.On.newChangeBuffer({trackRemovals:!0}),[4,lm(i,(v=r,wd(dd(pp.fromString("__bundle__/docs/"+v)))))];case 1:return p=d.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return cm(t,f,a,up.min(),s).next((function(e){return f.apply(t),e})).next((function(e){return i.qe.removeMatchingKeysForTargetId(t,p.targetId).next((function(){return i.qe.addMatchingKeys(t,o,p.targetId)})).next((function(){return i.Mn.En(t,e)})).next((function(){return e}))}))}))]}var v}))}))}function mm(t,e,n){return void 0===n&&(n=Ev()),It(this,void 0,void 0,(function(){var r,i;return Tt(this,(function(o){switch(o.label){case 0:return[4,lm(t,wd(hy(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=ep(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var o=Bv(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ke.saveNamedQuery(t,e);var a=r.withResumeToken(yp.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(a.targetId,a),i.qe.updateTargetData(t,a).next((function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)})).next((function(){return i.qe.addMatchingKeys(t,n,r.targetId)})).next((function(){return i.Ke.saveNamedQuery(t,e)}))}))]}}))}))
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var bm=function(){function t(t){this.R=t,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return jg.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Qn.set(e.id,{id:(n=e).id,version:n.version,createTime:Bv(n.createTime)}),jg.resolve()},t.prototype.getNamedQuery=function(t,e){return jg.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,{name:(n=e).name,query:hy(n.bundledQuery),readTime:Bv(n.readTime)}),jg.resolve();var n},t}(),_m=function(){function t(){this.Wn=new vv(wm.Gn),this.zn=new vv(wm.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new wm(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.Yn(new wm(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.Zn=function(t){var e=this,n=new Np(new pp([])),r=new wm(n,t),i=new wm(n,t+1),o=[];return this.zn.forEachInRange([r,i],(function(t){e.Yn(t),o.push(t.key)})),o},t.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new Np(new pp([])),n=new wm(e,t),r=new wm(e,t+1),i=Ev();return this.zn.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new wm(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),wm=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return Np.comparator(t.key,e.key)||ip(t.ns,e.ns)},t.Hn=function(t,e){return ip(t.ns,e.ns)||Np.comparator(t.key,e.key)},t}(),Im=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new vv(wm.Gn)}return t.prototype.checkEmpty=function(t){return jg.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new Xg(i,e,n,r);this._n.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.rs=this.rs.add(new wm(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return jg.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return jg.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.cs(n),i=r<0?0:r;return jg.resolve(this._n.length>i?this._n[i]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return jg.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return jg.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new wm(e,0),i=new wm(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(t){var e=n.os(t.ns);o.push(e)})),jg.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new vv(ip);return e.forEach((function(t){var e=new wm(t,0),i=new wm(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],(function(t){r=r.add(t.ns)}))})),jg.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;Np.isDocumentKey(i)||(i=i.child(""));var o=new wm(new Np(i),0),a=new vv(ip);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(a=a.add(t.ns)),!0)}),o),jg.resolve(this.us(a))},t.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.os(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;tp(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return jg.forEach(e.mutations,(function(i){var o=new wm(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new wm(e,0),r=this.rs.firstAfterOrEqual(n);return jg.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return this._n.length,jg.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),Tm=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new fv(Np.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,a=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:a,readTime:n}),this.size+=a-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return jg.resolve(n?n.document.clone():Hp.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=mv();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():Hp.newInvalidDocument(t))})),jg.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=mv(),i=new Np(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,c=u.document,h=u.readTime;if(!e.path.isPrefixOf(s.path))break;h.compareTo(n)<=0||kd(e,c)&&(r=r.insert(c.key,c.clone()))}return jg.resolve(r)},t.prototype.fs=function(t,e){return jg.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new Em(this)},t.prototype.getSize=function(t){return jg.resolve(this.size)},t}(),Em=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return _t(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),jg.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(qy),Sm=function(){function t(t){this.persistence=t,this.ds=new jy((function(t){return Qp(t)}),$p),this.lastRemoteSnapshotVersion=up.min(),this.highestTargetId=0,this.ws=0,this._s=new _m,this.targetCount=0,this.ys=Cy.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),jg.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return jg.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return jg.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),jg.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),jg.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new Cy(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,jg.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),jg.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,jg.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(a,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.ds.delete(a),o.push(r.removeMatchingKeysForTargetId(t,s.targetId)),i++)})),jg.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return jg.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return jg.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),jg.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),jg.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),jg.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return jg.resolve(n)},t.prototype.containsKey=function(t,e){return jg.resolve(this._s.containsKey(e))},t}(),km=function(){function t(t,e){var n,r=this;this.gs={},this.Ne=new Wf(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new Sm(this),this.Ut=new dy,this.Ue=(n=this.Ut,new Tm(n,(function(t){return r.referenceDelegate.ps(t)}))),this.R=new ty(e),this.Ke=new bm(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new Im(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;$f("MemoryPersistence","Starting transaction:",t);var i=new Cm(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Is=function(t,e){return jg.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),Cm=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return _t(e,t),e}(Fg),Nm=function(){function t(t){this.persistence=t,this.As=new _m,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Zf()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),jg.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),jg.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),jg.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return jg.forEach(this.vs,(function(r){var i=Np.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return jg.or([function(){return jg.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),Am=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pm(t,e){return"firestore_clients_"+t+"_"+e}function Rm(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function Dm(t,e){return"firestore_targets_"+t+"_"+e}Am.UNAUTHENTICATED=new Am(null),Am.GOOGLE_CREDENTIALS=new Am("google-credentials-uid"),Am.FIRST_PARTY=new Am("first-party-uid");var xm=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),a="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return a&&o.error&&(a="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new zf(o.error.code,o.error.message)),a?new t(e,n,o.state,i):(Yf("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Om=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new zf(i.error.code,i.error.message)),o?new t(e,i.state,r):(Yf("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Lm=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=kv(),a=0;i&&a<r.activeTargetIds.length;++a)i=Cp(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(Yf("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Mm=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Yf("SharedClientState","Failed to parse online state: "+e),null)},t}(),Fm=function(){function t(){this.activeTargetIds=kv()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Um=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new fv(ip),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=Pm(this.persistenceKey,this.Ns),this.Ms="firestore_sequence_number_"+this.persistenceKey,this.ks=this.ks.insert(this.Ns,new Fm),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ks=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return It(this,void 0,void 0,(function(){var t,e,n,r,i,o,a,s,u,c,h,l=this;return Tt(this,(function(f){switch(f.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=f.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(Pm(this.persistenceKey,r)))&&(o=Lm.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Qs(),(a=this.storage.getItem(this.Us))&&(s=this.js(a))&&this.Ws(s),u=0,c=this.$s;u<c.length;u++)h=c[u],this.Fs(h);return this.$s=[],this.window.addEventListener("pagehide",(function(){return l.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(Dm(this.persistenceKey,t));if(n){var r=Om.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(Dm(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return $f("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){$f("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){$f("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if($f("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void Yf("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return It(e,void 0,void 0,(function(){var t,e,r,i,o,a;return Tt(this,(function(s){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(a=function(t){var e=Wf.o;if(null!=t)try{var n=JSON.parse(t);tp("number"==typeof n),e=n}catch(r){Yf("SharedClientState","Failed to read sequence number from WebStorage",r)}return e}(n.newValue))!==Wf.o&&this.sequenceNumberHandler(a);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new xm(this.currentUser,t,e,n),i=Rm(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=Rm(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){var e={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(e))},t.prototype.Ys=function(t,e,n){var r=Dm(this.persistenceKey,t),i=new Om(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return Lm.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return xm.Vs(new Am(i),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return Om.Vs(r,e)},t.prototype.js=function(t){return Mm.Vs(t)},t.prototype.ii=function(t){return It(this,void 0,void 0,(function(){return Tt(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:($f("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),a=[],s=[];return o.forEach((function(t){i.has(t)||a.push(t)})),i.forEach((function(t){o.has(t)||s.push(t)})),this.syncEngine.hi(a,s).then((function(){n.ks=r}))},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=kv();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),jm=function(){function t(){this.li=new Fm,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new Fm,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),qm=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),Vm=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){$f("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){$f("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Bm={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Km=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),Wm=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return _t(e,t),e.prototype.ki=function(t,e,n,r){return new Promise((function(i,o){var a=new Kf;a.listenOnce(Ff.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case Mf.NO_ERROR:var e=a.getResponseJson();$f("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Mf.TIMEOUT:$f("Connection",'RPC "'+t+'" timed out'),o(new zf(Hf.DEADLINE_EXCEEDED,"Request time out"));break;case Mf.HTTP_ERROR:var n=a.getStatus();if($f("Connection",'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var s=(u=r.status,c=u.toLowerCase().replace(/_/g,"-"),Object.values(Hf).indexOf(c)>=0?c:Hf.UNKNOWN);o(new zf(s,r.message))}else o(new zf(Hf.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new zf(Hf.UNAVAILABLE,"Connection failed."));break;default:Zf()}}finally{$f("Connection",'RPC "'+t+'" completed.')}var u,c}));var s=JSON.stringify(r);a.send(e,"POST",s,n,15)}))},e.prototype.Oi=function(t,e){var n,r=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=new Rf,o=Th(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new Vf({})),this.Fi(a.initMessageHeaders,e),jt()||Bt()||Ut().indexOf("Electron/")>=0||((n=Ut()).indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0)||Ut().indexOf("MSAppHost/")>=0||Vt()||(a.httpHeadersOverwriteParam="$httpHeaders");var s=r.join("");$f("Connection","Creating WebChannel: "+s,a);var u=i.createWebChannel(s,a),c=!1,h=!1,l=new Km({Ei:function(t){h?$f("Connection","Not sending because WebChannel is closed:",t):(c||($f("Connection","Opening WebChannel transport."),u.open(),c=!0),$f("Connection","WebChannel sending:",t),u.send(t))},Ti:function(){return u.close()}}),f=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(e){setTimeout((function(){throw e}),0)}}))};return f(u,Bf.EventType.OPEN,(function(){h||$f("Connection","WebChannel transport opened.")})),f(u,Bf.EventType.CLOSE,(function(){h||(h=!0,$f("Connection","WebChannel transport closed"),l.Vi())})),f(u,Bf.EventType.ERROR,(function(t){h||(h=!0,Xf("Connection","WebChannel transport errored:",t),l.Vi(new zf(Hf.UNAVAILABLE,"The operation could not be completed")))})),f(u,Bf.EventType.MESSAGE,(function(t){var e;if(!h){var n=t.data[0];tp(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){$f("Connection","WebChannel received error:",i);var o=i.status,a=function(t){var e=ov[t];if(void 0!==e)return lv(e)}(o),s=i.message;void 0===a&&(a=Hf.INTERNAL,s="Unknown error status: "+o+" with message "+i.message),h=!0,l.Vi(new zf(a,s)),u.close()}else $f("Connection","WebChannel received:",n),l.Si(n)}})),f(o,Uf.STAT_EVENT,(function(t){t.stat===jf?$f("Connection","Detected buffering proxy"):t.stat===qf&&$f("Connection","Detected no buffering proxy")})),setTimeout((function(){l.Pi()}),0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);$f("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then((function(t){return $f("RestConnection","Received: ",t),t}),(function(e){throw Xf("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.8.1",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){var n=Bm[t];return this.Di+"/v1/"+e+":"+n},t}());
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hm(){return"undefined"!=typeof window?window:null}function zm(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gm(t){return new Uv(t,!0)}var Qm=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&$f("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Ki=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),$m=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Qm(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return It(this,void 0,void 0,(function(){return Tt(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return It(this,void 0,void 0,(function(){return Tt(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return It(this,void 0,void 0,(function(){return Tt(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===Hf.RESOURCE_EXHAUSTED?(Yf(e.toString()),Yf("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===Hf.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new zf(Hf.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return It(t,void 0,void 0,(function(){return Tt(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.dr=function(t){return $f("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():($f("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Ym=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,a}return _t(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n,r;if("targetChange"in e){e.targetChange;var i="NO_CHANGE"===(r=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===r?1:"REMOVE"===r?2:"CURRENT"===r?3:"RESET"===r?4:Zf(),o=e.targetChange.targetIds||[],a=function(t,e){return t.I?(tp(void 0===e||"string"==typeof e),yp.fromBase64String(e||"")):(tp(void 0===e||e instanceof Uint8Array),yp.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(u=e.targetChange.cause)&&function(t){var e=void 0===t.code?Hf.UNKNOWN:lv(t.code);return new zf(e,t.message||"")}(u);n=new Rv(i,o,a,s||null)}else if("documentChange"in e){e.documentChange,(i=e.documentChange).document,i.document.name,i.document.updateTime,o=zv(t,i.document.name),a=Bv(i.document.updateTime);var u=new Kp({mapValue:{fields:i.document.fields}}),c=(s=Hp.newFoundDocument(o,a,u),i.targetIds||[]),h=i.removedTargetIds||[];n=new Av(c,h,s.key,s)}else if("documentDelete"in e)e.documentDelete,(i=e.documentDelete).document,o=zv(t,i.document),a=i.readTime?Bv(i.readTime):up.min(),u=Hp.newNoDocument(o,a),s=i.removedTargetIds||[],n=new Av([],s,u.key,u);else if("documentRemove"in e)e.documentRemove,(i=e.documentRemove).document,o=zv(t,i.document),a=i.removedTargetIds||[],n=new Av([],a,o,null);else{if(!("filter"in e))return Zf();e.filter;var l=e.filter;l.targetId,i=l.count||0,o=new cv(i),a=l.targetId,n=new Pv(a,o)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return up.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?up.min():e.readTime?Bv(e.readTime):up.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e,n,r,i,o={};o.database=$v(this.R),o.addTarget=(e=this.R,i=(n=t).target,(r=Yp(i)?{documents:eg(e,i)}:{query:ng(e,i)}).targetId=n.targetId,n.resumeToken.approximateByteSize()>0?r.resumeToken=qv(e,n.resumeToken):n.snapshotVersion.compareTo(up.min())>0&&(r.readTime=jv(e,n.snapshotVersion.toTimestamp())),r);var a=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Zf()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,t);a&&(o.labels=a),this.cr(o)},e.prototype.yr=function(t){var e={};e.database=$v(this.R),e.removeTarget=t,this.cr(e)},e}($m),Xm=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,a.gr=!1,a}return _t(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(tp(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=(r=t.writeResults,i=t.commitTime,r&&r.length>0?(tp(void 0!==i),r.map((function(t){return n=i,(r=(e=t).updateTime?Bv(e.updateTime):Bv(n)).isEqual(up.min())&&(r=Bv(n)),new Hd(r,e.transformResults||[]);var e,n,r}))):[]),n=Bv(t.commitTime);return this.listener.Tr(n,e)}var r,i;return tp(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=$v(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Zv(e.R,t)}))};this.cr(n)},e}($m),Jm=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return _t(e,t),e.prototype.br=function(){if(this.Rr)throw new zf(Hf.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===Hf.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new zf(Hf.UNKNOWN,t.toString())}))},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===Hf.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new zf(Hf.UNKNOWN,t.toString())}))},e.prototype.terminate=function(){this.Rr=!0},e}((function(){})),Zm=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Yf(e),this.Vr=!1):$f("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),tb=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(t){n.enqueueAndForget((function(){return It(o,void 0,void 0,(function(){return Tt(this,(function(t){switch(t.label){case 0:return cb(this)?($f("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return It(this,void 0,void 0,(function(){var e;return Tt(this,(function(n){switch(n.label){case 0:return(e=ep(t)).Or.add(4),[4,nb(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,eb(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new Zm(n,r)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eb(t){return It(this,void 0,void 0,(function(){var e,n;return Tt(this,(function(r){switch(r.label){case 0:if(!cb(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function nb(t){return It(this,void 0,void 0,(function(){var e,n;return Tt(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function rb(t,e){var n=ep(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),ub(n)?sb(n):Eb(n).er()&&ob(n,e))}function ib(t,e){var n=ep(t),r=Eb(n);n.$r.delete(e),r.er()&&ab(n,e),0===n.$r.size&&(r.er()?r.ir():cb(n)&&n.Br.set("Unknown"))}function ob(t,e){t.qr.U(e.targetId),Eb(t).mr(e)}function ab(t,e){t.qr.U(e),Eb(t).yr(e)}function sb(t){t.qr=new xv({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),Eb(t).start(),t.Br.Sr()}function ub(t){return cb(t)&&!Eb(t).tr()&&t.$r.size>0}function cb(t){return 0===ep(t).Or.size}function hb(t){t.qr=void 0}function lb(t){return It(this,void 0,void 0,(function(){return Tt(this,(function(e){return t.$r.forEach((function(e,n){ob(t,e)})),[2]}))}))}function fb(t,e){return It(this,void 0,void 0,(function(){return Tt(this,(function(n){return hb(t),ub(t)?(t.Br.Nr(e),sb(t)):t.Br.set("Unknown"),[2]}))}))}function pb(t,e,n){return It(this,void 0,void 0,(function(){var r,i,o;return Tt(this,(function(a){switch(a.label){case 0:if(t.Br.set("Online"),!(e instanceof Rv&&2===e.state&&e.cause))return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,function(t,e){return It(this,void 0,void 0,(function(){var n,r,i,o;return Tt(this,(function(a){switch(a.label){case 0:n=e.cause,r=0,i=e.targetIds,a.label=1;case 1:return r<i.length?(o=i[r],t.$r.has(o)?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:a.sent(),t.$r.delete(o),t.qr.removeTarget(o),a.label=3;case 3:a.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return a.sent(),[3,5];case 3:return r=a.sent(),$f("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,db(t,r)];case 4:return a.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Av?t.qr.X(e):e instanceof Pv?t.qr.rt(e):t.qr.et(e),n.isEqual(up.min()))return[3,13];a.label=7;case 7:return a.trys.push([7,11,,13]),[4,sm(t.localStore)];case 8:return i=a.sent(),n.compareTo(i)>=0?[4,(s=t,u=n,c=s.qr.ut(u),c.targetChanges.forEach((function(t,e){if(t.resumeToken.approximateByteSize()>0){var n=s.$r.get(e);n&&s.$r.set(e,n.withResumeToken(t.resumeToken,u))}})),c.targetMismatches.forEach((function(t){var e=s.$r.get(t);if(e){s.$r.set(t,e.withResumeToken(yp.EMPTY_BYTE_STRING,e.snapshotVersion)),ab(s,t);var n=new Zg(e.target,t,1,e.sequenceNumber);ob(s,n)}})),s.remoteSyncer.applyRemoteEvent(c))]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,13];case 11:return $f("RemoteStore","Failed to raise snapshot:",o=a.sent()),[4,db(t,o)];case 12:return a.sent(),[3,13];case 13:return[2]}var s,u,c}))}))}function db(t,e,n){return It(this,void 0,void 0,(function(){var r=this;return Tt(this,(function(i){switch(i.label){case 0:if(!Wg(e))throw e;return t.Or.add(1),[4,nb(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return sm(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return It(r,void 0,void 0,(function(){return Tt(this,(function(e){switch(e.label){case 0:return $f("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,eb(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function vb(t,e){return e().catch((function(n){return db(t,n,e)}))}function gb(t){return It(this,void 0,void 0,(function(){var e,n,r,i,o;return Tt(this,(function(a){switch(a.label){case 0:e=ep(t),n=Sb(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,a.label=1;case 1:if(!(cb(s=e)&&s.kr.length<10))return[3,7];a.label=2;case 2:return a.trys.push([2,4,,6]),[4,hm(e.localStore,r)];case 3:return null===(i=a.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=Sb(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=a.sent(),[4,db(e,o)];case 5:return a.sent(),[3,6];case 6:return[3,1];case 7:return yb(e)&&mb(e),[2]}var s}))}))}function yb(t){return cb(t)&&!Sb(t).tr()&&t.kr.length>0}function mb(t){Sb(t).start()}function bb(t){return It(this,void 0,void 0,(function(){return Tt(this,(function(e){return Sb(t).Ar(),[2]}))}))}function _b(t){return It(this,void 0,void 0,(function(){var e,n,r,i;return Tt(this,(function(o){for(e=Sb(t),n=0,r=t.kr;n<r.length;n++)i=r[n],e.Er(i.mutations);return[2]}))}))}function wb(t,e,n){return It(this,void 0,void 0,(function(){var r,i;return Tt(this,(function(o){switch(o.label){case 0:return r=t.kr.shift(),i=Jg.from(r,e,n),[4,vb(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,gb(t)];case 2:return o.sent(),[2]}}))}))}function Ib(t,e){return It(this,void 0,void 0,(function(){return Tt(this,(function(n){switch(n.label){case 0:return e&&Sb(t).pr?[4,function(t,e){return It(this,void 0,void 0,(function(){var n,r;return Tt(this,(function(i){switch(i.label){case 0:return hv(r=e.code)&&r!==Hf.ABORTED?(n=t.kr.shift(),Sb(t).sr(),[4,vb(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,gb(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return yb(t)&&mb(t),[2]}}))}))}function Tb(t,e){return It(this,void 0,void 0,(function(){var n;return Tt(this,(function(r){switch(r.label){case 0:return n=ep(t),e?(n.Or.delete(2),[4,eb(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,nb(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function Eb(t){var e,n,r,i,o=this;return t.Ur||(t.Ur=(e=t.datastore,n=t.asyncQueue,r={Ii:lb.bind(null,t),Ri:fb.bind(null,t),_r:pb.bind(null,t)},(i=ep(e)).br(),new Ym(n,i.Hi,i.credentials,i.R,r)),t.Mr.push((function(e){return It(o,void 0,void 0,(function(){return Tt(this,(function(n){switch(n.label){case 0:return e?(t.Ur.sr(),ub(t)?sb(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:n.sent(),hb(t),n.label=3;case 3:return[2]}}))}))}))),t.Ur}function Sb(t){var e,n,r,i,o=this;return t.Kr||(t.Kr=(e=t.datastore,n=t.asyncQueue,r={Ii:bb.bind(null,t),Ri:Ib.bind(null,t),Ir:_b.bind(null,t),Tr:wb.bind(null,t)},(i=ep(e)).br(),new Xm(n,i.Hi,i.credentials,i.R,r)),t.Mr.push((function(e){return It(o,void 0,void 0,(function(){return Tt(this,(function(n){switch(n.label){case 0:return e?(t.Kr.sr(),[4,gb(t)]):[3,2];case 1:return n.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:n.sent(),t.kr.length>0&&($f("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),n.label=4;case 4:return[2]}}))}))}))),t.Kr}var kb=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Ug,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new zf(Hf.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function Cb(t,e){if(Yf("AsyncQueue",e+": "+t),Wg(t))return new zf(Hf.UNAVAILABLE,e+": "+t);throw t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nb=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||Np.comparator(e.key,n.key)}:function(t,e){return Np.comparator(t.key,e.key)},this.keyedMap=_v(),this.sortedSet=new fv(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),Ab=function(){function t(){this.Qr=new fv(Np.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):Zf():this.Qr=this.Qr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),Pb=function(){function t(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,Nb.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Td(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Rb=function(){this.Wr=void 0,this.listeners=[]},Db=function(){this.queries=new jy((function(t){return Ed(t)}),Td),this.onlineState="Unknown",this.Gr=new Set};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xb(t,e){return It(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return Tt(this,(function(c){switch(c.label){case 0:if(n=ep(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new Rb),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),a=o,[4,n.onListen(r)];case 2:return a.Wr=c.sent(),[3,4];case 3:return s=c.sent(),u=Cb(s,"Initialization of query '"+Sd(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&Fb(n),[2]}}))}))}function Ob(t,e){return It(this,void 0,void 0,(function(){var n,r,i,o,a;return Tt(this,(function(s){return n=ep(t),r=e.query,i=!1,(o=n.queries.get(r))&&(a=o.listeners.indexOf(e))>=0&&(o.listeners.splice(a,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function Lb(t,e){for(var n=ep(t),r=!1,i=0,o=e;i<o.length;i++){var a=o[i],s=a.query,u=n.queries.get(s);if(u){for(var c=0,h=u.listeners;c<h.length;c++)h[c].Hr(a)&&(r=!0);u.Wr=a}}r&&Fb(n)}function Mb(t,e,n){var r=ep(t),i=r.queries.get(e);if(i)for(var o=0,a=i.listeners;o<a.length;o++)a[o].onError(n);r.queries.delete(e)}function Fb(t){t.Gr.forEach((function(t){t.next()}))}var Ub=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Pb(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.so&&n||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=Pb.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),jb=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),qb=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return zv(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?Jv(this.R,t.document,!1):Hp.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},t.prototype.Kn=function(t){return Bv(t)},t}(),Vb=function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=Bb(t)}return t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new qb(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var a=n.qn(o.metadata.name),s=0,u=o.metadata.queries;s<u.length;s++){var c=u[s],h=(e.get(c)||Ev()).add(a);e.set(c,h)}}return e},t.prototype.complete=function(){return It(this,void 0,void 0,(function(){var t,e,n,r,i;return Tt(this,(function(o){switch(o.label){case 0:return[4,ym(this.localStore,new qb(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?(i=r[n],[4,mm(this.localStore,i,e.get(i.name))]):[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Zy(Object.assign({},this.progress),t))]}}))}))},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bb(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kb=function(t){this.key=t},Wb=function(t){this.key=t},Hb=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=Ev(),this.mutatedKeys=Ev(),this.lo=Cd(t),this.fo=new Nb(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new Ab,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=vd(this.query)&&i.size===this.query.limit?i.last():null,c=gd(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var h=i.get(t),l=kd(n.query,e)?e:null,f=!!h&&n.mutatedKeys.has(h.key),p=!!l&&(l.hasLocalMutations||n.mutatedKeys.has(l.key)&&l.hasCommittedMutations),d=!1;h&&l?h.data.isEqual(l.data)?f!==p&&(r.track({type:3,doc:l}),d=!0):n.yo(h,l)||(r.track({type:2,doc:l}),d=!0,(u&&n.lo(l,u)>0||c&&n.lo(l,c)<0)&&(s=!0)):!h&&l?(r.track({type:0,doc:l}),d=!0):h&&!l&&(r.track({type:1,doc:h}),d=!0,(u||c)&&(s=!0)),d&&(l?(a=a.add(l),o=p?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))})),vd(this.query)||gd(this.query))for(;a.size>this.query.limit;){var h=vd(this.query)?a.last():a.first();a=a.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{fo:a,mo:r,Nn:s,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return n=t.type,i=e.type,(o=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Zf()}})(n)-o(i)||r.lo(t.doc,e.doc);var n,i,o})),this.po(n);var a=e?this.Eo():[],s=0===this.ho.size&&this.current?1:0,u=s!==this.ao;return this.ao=s,0!==o.length||u?{snapshot:new Pb(this.query,t.fo,i,o,t.mutatedKeys,0===s,u,!1),To:a}:{To:a}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Ab,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.uo=e.uo.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.uo=e.uo.delete(t)})),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=Ev(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new Wb(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new Kb(t))})),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=Ev();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return Pb.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),zb=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Gb=function(t){this.key=t,this.bo=!1},Qb=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new jy((function(t){return Ed(t)}),Td),this.Vo=new Map,this.So=new Set,this.Do=new fv(Np.comparator),this.Co=new Map,this.No=new _m,this.xo={},this.Fo=new Map,this.ko=Cy.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function $b(t,e){return It(this,void 0,void 0,(function(){var n,r,i,o,a,s;return Tt(this,(function(u){switch(u.label){case 0:return n=E_(t),(o=n.Po.get(e))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,lm(n.localStore,wd(e))];case 2:return a=u.sent(),s=n.sharedClientState.addLocalQueryTarget(a.targetId),r=a.targetId,[4,Yb(n,e,r,"current"===s)];case 3:i=u.sent(),n.isPrimaryClient&&rb(n.remoteStore,a),u.label=4;case 4:return[2,i]}}))}))}function Yb(t,e,n,r){return It(this,void 0,void 0,(function(){var i,o,a,s,u,c;return Tt(this,(function(h){switch(h.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return It(this,void 0,void 0,(function(){var i,o,a;return Tt(this,(function(s){switch(s.label){case 0:return(i=e.view._o(n)).Nn?[4,pm(t.localStore,e.query,!1).then((function(t){var n=t.documents;return e.view._o(n,i)}))]:[3,2];case 1:i=s.sent(),s.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),a=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(c_(t,e.targetId,a.To),a.snapshot)]}}))}))}(t,e,n,r)},[4,pm(t.localStore,e,!0)];case 1:return i=h.sent(),o=new Hb(e,i.Bn),a=o._o(i.documents),s=Nv.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(a,t.isPrimaryClient,s),c_(t,n,u.To),c=new zb(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}}))}))}function Xb(t,e){return It(this,void 0,void 0,(function(){var n,r,i;return Tt(this,(function(o){switch(o.label){case 0:return n=ep(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(t){return!Td(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,fm(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),ib(n.remoteStore,r.targetId),s_(n,r.targetId)})).catch(Dy)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return s_(n,r.targetId),[4,fm(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function Jb(t,e,n){return It(this,void 0,void 0,(function(){var r,i,o,a;return Tt(this,(function(s){switch(s.label){case 0:r=S_(t),s.label=1;case 1:return s.trys.push([1,5,,6]),[4,(u=r.localStore,c=e,l=ep(u),f=sp.now(),p=c.reduce((function(t,e){return t.add(e.key)}),Ev()),l.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return l.Mn.pn(t,p).next((function(e){h=e;for(var n=[],r=0,i=c;r<i.length;r++){var o=i[r],a=Xd(o,h.get(o.key));null!=a&&n.push(new ev(o.key,a,Wp(a.value.mapValue),zd.exists(!0)))}return l._n.addMutationBatch(t,f,n,c)}))})).then((function(t){return t.applyToLocalDocumentSet(h),{batchId:t.batchId,changes:h}})))];case 2:return i=s.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new fv(ip)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,f_(r,i.changes)];case 3:return s.sent(),[4,gb(r.remoteStore)];case 4:return s.sent(),[3,6];case 5:return o=s.sent(),a=Cb(o,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}var u,c,h,l,f,p}))}))}function Zb(t,e){return It(this,void 0,void 0,(function(){var n,r;return Tt(this,(function(i){switch(i.label){case 0:n=ep(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,um(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){var r=n.Co.get(e);r&&(tp(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?tp(r.bo):t.removedDocuments.size>0&&(tp(r.bo),r.bo=!1))})),[4,f_(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Dy(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function t_(t,e,n){var r=ep(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=ep(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)})),r&&Fb(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function e_(t,e,n){return It(this,void 0,void 0,(function(){var r,i,o,a,s,u;return Tt(this,(function(c){switch(c.label){case 0:return(r=ep(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(a=(a=new fv(Np.comparator)).insert(o,Hp.newNoDocument(o,up.min())),s=Ev().add(o),u=new Cv(up.min(),new Map,new vv(ip),a,s),[4,Zb(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),l_(r),[3,4];case 2:return[4,fm(r.localStore,e,!1).then((function(){return s_(r,e,n)})).catch(Dy)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function n_(t,e){return It(this,void 0,void 0,(function(){var n,r,i;return Tt(this,(function(o){switch(o.label){case 0:n=ep(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,am(n.localStore,e)];case 2:return i=o.sent(),a_(n,r,null),o_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,f_(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Dy(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function r_(t,e,n){return It(this,void 0,void 0,(function(){var r,i;return Tt(this,(function(o){switch(o.label){case 0:r=ep(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,(a=r.localStore,s=e,u=ep(a),u.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var e;return u._n.lookupMutationBatch(t,s).next((function(n){return tp(null!==n),e=n.keys(),u._n.removeMutationBatch(t,n)})).next((function(){return u._n.performConsistencyCheck(t)})).next((function(){return u.Mn.pn(t,e)}))})))];case 2:return i=o.sent(),a_(r,e,n),o_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,f_(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Dy(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}var a,s,u}))}))}function i_(t,e){return It(this,void 0,void 0,(function(){var n,r,i,o,a;return Tt(this,(function(s){switch(s.label){case 0:cb((n=ep(t)).remoteStore)||$f("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,(u=n.localStore,c=ep(u),c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return c._n.getHighestUnacknowledgedBatchId(t)})))];case 2:return-1===(r=s.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=s.sent(),a=Cb(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(a),[3,4];case 4:return[2]}var u,c}))}))}function o_(t,e){(t.Fo.get(e)||[]).forEach((function(t){t.resolve()})),t.Fo.delete(e)}function a_(t,e,n){var r=ep(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function s_(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||u_(t,e)}))}function u_(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(ib(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),l_(t))}function c_(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Kb?(t.No.addReference(o.key,e),h_(t,o)):o instanceof Wb?($f("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||u_(t,o.key)):Zf()}}function h_(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||($f("SyncEngine","New document in limbo: "+n),t.So.add(r),l_(t))}function l_(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new Np(pp.fromString(e)),r=t.ko.next();t.Co.set(r,new Gb(n)),t.Do=t.Do.insert(n,r),rb(t.remoteStore,new Zg(wd(dd(n.path)),r,2,Wf.o))}}function f_(t,e,n){return It(this,void 0,void 0,(function(){var r,i,o,a;return Tt(this,(function(s){switch(s.label){case 0:return r=ep(t),i=[],o=[],a=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(t,s){a.push(r.Oo(s,e,n).then((function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(s.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=em.Pn(s.targetId,t);o.push(e)}})))})),[4,Promise.all(a)]);case 1:return s.sent(),r.vo._r(i),[4,function(t,e){return It(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,h;return Tt(this,(function(l){switch(l.label){case 0:n=ep(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return jg.forEach(e,(function(e){return jg.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return jg.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return l.sent(),[3,4];case 3:if(!Wg(r=l.sent()))throw r;return $f("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=o[i],s=a.targetId,a.fromCache||(u=n.Fn.get(s),c=u.snapshotVersion,h=u.withLastLimboFreeSnapshotVersion(c),n.Fn=n.Fn.insert(s,h));return[2]}}))}))}(r.localStore,o)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))}function p_(t,e){return It(this,void 0,void 0,(function(){var n,r;return Tt(this,(function(i){switch(i.label){case 0:return(n=ep(t)).currentUser.isEqual(e)?[3,3]:($f("SyncEngine","User change. New user:",e.toKey()),[4,om(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,(o=n).Fo.forEach((function(t){t.forEach((function(t){t.reject(new zf(Hf.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),o.Fo.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,f_(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}var o}))}))}function d_(t,e){var n=ep(t),r=n.Co.get(e);if(r&&r.bo)return Ev().add(r.key);var i=Ev(),o=n.Vo.get(e);if(!o)return i;for(var a=0,s=o;a<s.length;a++){var u=s[a],c=n.Po.get(u);i=i.unionWith(c.view.wo)}return i}function v_(t,e){return It(this,void 0,void 0,(function(){var n,r,i;return Tt(this,(function(o){switch(o.label){case 0:return[4,pm((n=ep(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&c_(n,e.targetId,i.To),i)]}}))}))}function g_(t){return It(this,void 0,void 0,(function(){var e;return Tt(this,(function(n){return[2,vm((e=ep(t)).localStore).then((function(t){return f_(e,t)}))]}))}))}function y_(t,e,n,r){return It(this,void 0,void 0,(function(){var i,o;return Tt(this,(function(a){switch(a.label){case 0:return[4,(s=(i=ep(t)).localStore,u=e,c=ep(s),h=ep(c._n),c.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return h.jt(t,u).next((function(e){return e?c.Mn.pn(t,e):jg.resolve(null)}))})))];case 1:return null===(o=a.sent())?[3,6]:"pending"!==n?[3,3]:[4,gb(i.remoteStore)];case 2:return a.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(a_(i,e,r||null),o_(i,e),function(t,e){ep(ep(t)._n).Gt(e)}(i.localStore,e)):Zf(),a.label=4;case 4:return[4,f_(i,o)];case 5:return a.sent(),[3,7];case 6:$f("SyncEngine","Cannot apply mutation batch with id: "+e),a.label=7;case 7:return[2]}var s,u,c,h}))}))}function m_(t,e){return It(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c;return Tt(this,(function(h){switch(h.label){case 0:return E_(n=ep(t)),S_(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,b_(n,r.toArray())]);case 1:return i=h.sent(),n.$o=!0,[4,Tb(n.remoteStore,!0)];case 2:for(h.sent(),o=0,a=i;o<a.length;o++)s=a[o],rb(n.remoteStore,s);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(u=[],c=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?u.push(e):c=c.then((function(){return s_(n,e),fm(n.localStore,e,!0)})),ib(n.remoteStore,e)})),[4,c]);case 4:return h.sent(),[4,b_(n,u)];case 5:return h.sent(),(l=ep(n)).Co.forEach((function(t,e){ib(l.remoteStore,e)})),l.No.ts(),l.Co=new Map,l.Do=new fv(Np.comparator),n.$o=!1,[4,Tb(n.remoteStore,!1)];case 6:h.sent(),h.label=7;case 7:return[2]}var l}))}))}function b_(t,e,n){return It(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,h,l,f,p,d,v;return Tt(this,(function(g){switch(g.label){case 0:n=ep(t),r=[],i=[],o=0,a=e,g.label=1;case 1:return o<a.length?(s=a[o],u=void 0,(c=n.Vo.get(s))&&0!==c.length?[4,lm(n.localStore,wd(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),h=0,l=c,g.label=3;case 3:return h<l.length?(f=l[h],p=n.Po.get(f),[4,v_(n,p)]):[3,6];case 4:(d=g.sent()).snapshot&&i.push(d.snapshot),g.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,dm(n.localStore,s)];case 8:return v=g.sent(),[4,lm(n.localStore,v)];case 9:return u=g.sent(),[4,Yb(n,__(v),s,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function __(t){return pd(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function w_(t){var e=ep(t);return ep(ep(e.localStore).persistence).fn()}function I_(t,e,n,r){return It(this,void 0,void 0,(function(){var i,o,a;return Tt(this,(function(s){switch(s.label){case 0:return(i=ep(t)).$o?($f("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,vm(i.localStore)];case 3:return o=s.sent(),a=Cv.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,f_(i,o,a)];case 4:return s.sent(),[3,8];case 5:return[4,fm(i.localStore,e,!0)];case 6:return s.sent(),s_(i,e,r),[3,8];case 7:Zf(),s.label=8;case 8:return[2]}}))}))}function T_(t,e,n){return It(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,h,l,f;return Tt(this,(function(p){switch(p.label){case 0:if(!(r=E_(t)).$o)return[3,10];i=0,o=e,p.label=1;case 1:return i<o.length?(a=o[i],r.Vo.has(a)?($f("SyncEngine","Adding an already active target "+a),[3,5]):[4,dm(r.localStore,a)]):[3,6];case 2:return s=p.sent(),[4,lm(r.localStore,s)];case 3:return u=p.sent(),[4,Yb(r,__(s),u.targetId,!1)];case 4:p.sent(),rb(r.remoteStore,u),p.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Tt(this,(function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,fm(r.localStore,t,!1).then((function(){ib(r.remoteStore,t),s_(r,t)})).catch(Dy)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},h=0,l=n,p.label=7;case 7:return h<l.length?(f=l[h],[5,c(f)]):[3,10];case 8:p.sent(),p.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function E_(t){var e=ep(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Zb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=d_.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=e_.bind(null,e),e.vo._r=Lb.bind(null,e.eventManager),e.vo.Mo=Mb.bind(null,e.eventManager),e}function S_(t){var e=ep(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=n_.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=r_.bind(null,e),e}function k_(t,e,n){var r=ep(t);(function(t,e,n){return It(this,void 0,void 0,(function(){var r,i,o,a,s,u;return Tt(this,(function(c){switch(c.label){case 0:return c.trys.push([0,14,,15]),[4,e.getMetadata()];case 1:return r=c.sent(),[4,(h=t.localStore,l=r,f=ep(h),p=Bv(l.createTime),f.persistence.runTransaction("hasNewerBundle","readonly",(function(t){return f.Ke.getBundleMetadata(t,l.id)})).then((function(t){return!!t&&t.createTime.compareTo(p)>=0})))];case 2:return c.sent()?[4,e.close()]:[3,4];case 3:return[2,(c.sent(),void n._completeWith(function(t){return{taskState:"Success",documentsLoaded:t.totalDocuments,bytesLoaded:t.totalBytes,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(r)))];case 4:return n._updateProgress(Bb(r)),i=new Vb(r,t.localStore,e.R),[4,e.Lo()];case 5:o=c.sent(),c.label=6;case 6:return o?[4,i.oo(o)]:[3,10];case 7:return(a=c.sent())&&n._updateProgress(a),[4,e.Lo()];case 8:o=c.sent(),c.label=9;case 9:return[3,6];case 10:return[4,i.complete()];case 11:return s=c.sent(),[4,f_(t,s.wn,void 0)];case 12:return c.sent(),[4,function(t,e){var n=ep(t);return n.persistence.runTransaction("Save bundle","readwrite",(function(t){return n.Ke.saveBundleMetadata(t,e)}))}(t.localStore,r)];case 13:return c.sent(),n._completeWith(s.progress),[3,15];case 14:return Xf("SyncEngine","Loading bundle failed with "+(u=c.sent())),n._failWith(u),[3,15];case 15:return[2]}var h,l,f,p}))}))})(r,e,n).then((function(){r.sharedClientState.notifyBundleLoaded()}))}var C_=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return It(this,void 0,void 0,(function(){return Tt(this,(function(e){switch(e.label){case 0:return this.R=Gm(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}}))}))},t.prototype.Uo=function(t){return null},t.prototype.Ko=function(t){return im(this.persistence,new nm,t.initialUser,this.R)},t.prototype.qo=function(t){return new km(Nm.bs,this.R)},t.prototype.Bo=function(t){return new jm},t.prototype.terminate=function(){return It(this,void 0,void 0,(function(){return Tt(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),N_=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return _t(e,t),e.prototype.initialize=function(e){return It(this,void 0,void 0,(function(){return Tt(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,gm(this.localStore)];case 2:return n.sent(),[4,this.Qo.initialize(this,e)];case 3:return n.sent(),[4,S_(this.Qo.syncEngine)];case 4:return n.sent(),[4,gb(this.Qo.remoteStore)];case 5:return n.sent(),[2]}}))}))},e.prototype.Ko=function(t){return im(this.persistence,new nm,t.initialUser,this.R)},e.prototype.Uo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new Ly(e,t.asyncQueue)},e.prototype.qo=function(t){var e=Jy(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?by.withCacheSize(this.cacheSizeBytes):by.DEFAULT;return new $y(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Hm(),zm(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new jm},e}(C_),A_=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Qo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return _t(e,t),e.prototype.initialize=function(e){return It(this,void 0,void 0,(function(){var n,r=this;return Tt(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof Um?(this.sharedClientState.syncEngine={ui:y_.bind(null,n),ai:I_.bind(null,n),hi:T_.bind(null,n),fn:w_.bind(null,n),ci:g_.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(t){return It(r,void 0,void 0,(function(){return Tt(this,(function(e){switch(e.label){case 0:return[4,m_(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Bo=function(t){var e=Hm();if(!Um.yt(e))throw new zf(Hf.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Jy(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Um(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(N_),P_=function(){function t(){}return t.prototype.initialize=function(t,e){return It(this,void 0,void 0,(function(){var n=this;return Tt(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return t_(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=p_.bind(null,this.syncEngine),[4,Tb(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new Db},t.prototype.createDatastore=function(t){var e,n,r=Gm(t.databaseInfo.databaseId),i=(e=t.databaseInfo,new Wm(e));return n=t.credentials,new Jm(n,i,r)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,a=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return t_(a.syncEngine,t,0)},o=Vm.yt()?new Vm:new qm,new tb(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return n=this.localStore,r=this.remoteStore,i=this.eventManager,o=this.sharedClientState,a=t.initialUser,s=t.maxConcurrentLimboResolutions,u=e,c=new Qb(n,r,i,o,a,s),u&&(c.$o=!0),c;var n,r,i,o,a,s,u,c},t.prototype.terminate=function(){return function(t){return It(this,void 0,void 0,(function(){var e;return Tt(this,(function(n){switch(n.label){case 0:return e=ep(t),$f("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,nb(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R_(t,e){void 0===e&&(e=10240);var n=0;return{read:function(){return It(this,void 0,void 0,(function(){var r;return Tt(this,(function(i){return n<t.byteLength?(r={value:t.slice(n,n+e),done:!1},[2,(n+=e,r)]):[2,{done:!0}]}))}))},cancel:function(){return It(this,void 0,void 0,(function(){return Tt(this,(function(t){return[2]}))}))},releaseLock:function(){},closed:Promise.reject("unimplemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var D_=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),x_=function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new Ug,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}return t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return It(this,void 0,void 0,(function(){return Tt(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Lo=function(){return It(this,void 0,void 0,(function(){return Tt(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}}))}))},t.prototype.Ho=function(){return It(this,void 0,void 0,(function(){var t,e,n,r;return Tt(this,(function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new jb(JSON.parse(r),t.length+n)]}}))}))},t.prototype.Zo=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.Jo=function(){return It(this,void 0,void 0,(function(){var t,e;return Tt(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.Xo=function(t){return It(this,void 0,void 0,(function(){var e;return Tt(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return It(this,void 0,void 0,(function(){var t,e;return Tt(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))},t}(),O_=function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return It(this,void 0,void 0,(function(){var e,n=this;return Tt(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new zf(Hf.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return It(this,void 0,void 0,(function(){var n,r,i,o,a,s;return Tt(this,(function(u){switch(u.label){case 0:return n=ep(t),r=$v(n.R)+"/documents",i={documents:e.map((function(t){return Hv(n.R,t)}))},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=u.sent(),a=new Map,o.forEach((function(t){var e,r,i=(e=n.R,"found"in(r=t)?function(t,e){tp(!!e.found),e.found.name,e.found.updateTime;var n=zv(t,e.found.name),r=Bv(e.found.updateTime),i=new Kp({mapValue:{fields:e.found.fields}});return Hp.newFoundDocument(n,r,i)}(e,r):"missing"in r?function(t,e){tp(!!e.missing),tp(!!e.readTime);var n=zv(t,e.missing),r=Bv(e.readTime);return Hp.newNoDocument(n,r)}(e,r):Zf());a.set(i.key.toString(),i)})),s=[],[2,(e.forEach((function(t){var e=a.get(t.toString());tp(!!e),s.push(e)})),s)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(n){this.lastWriteError=n}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new sv(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return It(this,void 0,void 0,(function(){var t,e=this;return Tt(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=Np.fromPath(n);e.mutations.push(new uv(r,e.precondition(r)))})),[4,function(t,e){return It(this,void 0,void 0,(function(){var n,r,i;return Tt(this,(function(o){switch(o.label){case 0:return n=ep(t),r=$v(n.R)+"/documents",i={writes:e.map((function(t){return Zv(n.R,t)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Zf();e=up.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new zf(Hf.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?zd.updateTime(e):zd.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(up.min()))throw new zf(Hf.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return zd.updateTime(e)}return zd.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}(),L_=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Qm(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji((function(){return It(t,void 0,void 0,(function(){var t,e,n=this;return Tt(this,(function(r){return t=new O_(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!Sp(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!hv(e)}return!1},t}(),M_=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=Am.UNAUTHENTICATED,this.clientId=rp.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,(function(t){return It(r,void 0,void 0,(function(){return Tt(this,(function(e){switch(e.label){case 0:return $f("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}}))}))}))}return t.prototype.getConfiguration=function(){return It(this,void 0,void 0,(function(){return Tt(this,(function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new zf(Hf.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new Ug;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return It(t,void 0,void 0,(function(){var t,n;return Tt(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Cb(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F_(t,e){return It(this,void 0,void 0,(function(){var n,r,i=this;return Tt(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),$f("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener((function(t){return It(i,void 0,void 0,(function(){return Tt(this,(function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,om(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}}))}))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function U_(t,e){return It(this,void 0,void 0,(function(){var n,r;return Tt(this,(function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,j_(t)];case 1:return n=i.sent(),$f("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener((function(t){return function(t,e){return It(this,void 0,void 0,(function(){var n,r;return Tt(this,(function(i){switch(i.label){case 0:return(n=ep(t)).asyncQueue.verifyOperationInProgress(),$f("RemoteStore","RemoteStore received new credentials"),r=cb(n),n.Or.add(3),[4,nb(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,eb(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,t)})),t.onlineComponents=e,[2]}}))}))}function j_(t){return It(this,void 0,void 0,(function(){return Tt(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:($f("FirestoreClient","Using default OfflineComponentProvider"),[4,F_(t,new C_)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function q_(t){return It(this,void 0,void 0,(function(){return Tt(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:($f("FirestoreClient","Using default OnlineComponentProvider"),[4,U_(t,new P_)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function V_(t){return j_(t).then((function(t){return t.persistence}))}function B_(t){return j_(t).then((function(t){return t.localStore}))}function K_(t){return q_(t).then((function(t){return t.remoteStore}))}function W_(t){return q_(t).then((function(t){return t.syncEngine}))}function H_(t){return It(this,void 0,void 0,(function(){var e,n;return Tt(this,(function(r){switch(r.label){case 0:return[4,q_(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=$b.bind(null,e.syncEngine),n.onUnlisten=Xb.bind(null,e.syncEngine),n)]}}))}))}function z_(t,e,n){var r=this;void 0===n&&(n={});var i=new Ug;return t.asyncQueue.enqueueAndForget((function(){return It(r,void 0,void 0,(function(){var r;return Tt(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new D_({next:function(o){e.enqueueAndForget((function(){return Ob(t,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new zf(Hf.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new zf(Hf.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),a=new Ub(dd(n.path),o,{includeMetadataChanges:!0,so:!0});return xb(t,a)},[4,H_(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function G_(t,e,n){var r=this;void 0===n&&(n={});var i=new Ug;return t.asyncQueue.enqueueAndForget((function(){return It(r,void 0,void 0,(function(){var r;return Tt(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new D_({next:function(n){e.enqueueAndForget((function(){return Ob(t,a)})),n.fromCache&&"server"===r.source?i.reject(new zf(Hf.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),a=new Ub(n,o,{includeMetadataChanges:!0,so:!0});return xb(t,a)},[4,H_(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}var Q_=function(t,e,n,r,i,o,a,s){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=s},$_=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Y_=new Map,X_=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},J_=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable((function(){return e(Am.UNAUTHENTICATED)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Z_=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable((function(){return e(n.token.user)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),tw=function(){function t(t){var e=this;this.currentUser=Am.UNAUTHENTICATED,this.oc=new Ug,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)}))};var n=function(t){$f("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit((function(t){return n(t)})),setTimeout((function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):($f("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}}),0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?($f("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(tp("string"==typeof n.accessToken),new X_(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable((function(){return It(n,void 0,void 0,(function(){return Tt(this,(function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}}))}))}))},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return tp(null===t||"string"==typeof t),new Am(t)},t}(),ew=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=Am.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),nw=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new ew(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable((function(){return e(Am.FIRST_PARTY)}))},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rw(t,e,n){if(!n)throw new zf(Hf.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function iw(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new zf(Hf.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function ow(t,e,n,r){if(!0===e&&!0===r)throw new zf(Hf.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function aw(t){if(!Np.isDocumentKey(t))throw new zf(Hf.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function sw(t){if(Np.isDocumentKey(t))throw new zf(Hf.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function uw(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Zf()}function cw(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new zf(Hf.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=uw(t);throw new zf(Hf.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function hw(t,e){if(e<=0)throw new zf(Hf.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lw=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new zf(Hf.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new zf(Hf.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,ow("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),fw=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lw({}),this._settingsFrozen=!1,t instanceof $_?(this._databaseId=t,this._credentials=new J_):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new zf(Hf.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $_(t.options.projectId)}(t),this._credentials=new tw(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new zf(Hf.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new zf(Hf.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lw(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new J_;switch(t.type){case"gapi":var e=t.client;return tp(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new nw(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new zf(Hf.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return this,(t=Y_.get(this))&&($f("ComponentProvider","Removing Datastore"),Y_.delete(this),t.terminate()),Promise.resolve();var t},t}(),pw=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new vw(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),dw=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),vw=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,dd(r))||this)._path=r,i.type="collection",i}return _t(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new pw(this.firestore,null,new Np(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(dw);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gw(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=de(t),rw("collection","path",e),t instanceof fw)return sw(n=pp.fromString.apply(pp,kt([e],r))),new vw(t,null,n);if(!(t instanceof pw||t instanceof vw))throw new zf(Hf.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return sw(n=pp.fromString.apply(pp,kt([t.path],r)).child(pp.fromString(e))),new vw(t.firestore,null,n)}function yw(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=de(t),1===arguments.length&&(e=rp.u()),rw("doc","path",e),t instanceof fw)return aw(n=pp.fromString.apply(pp,kt([e],r))),new pw(t,null,new Np(n));if(!(t instanceof pw||t instanceof vw))throw new zf(Hf.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return aw(n=t._path.child(pp.fromString.apply(pp,kt([e],r)))),new pw(t.firestore,t instanceof vw?t.converter:null,new Np(n))}function mw(t,e){return t=de(t),e=de(e),(t instanceof pw||t instanceof vw)&&(e instanceof pw||e instanceof vw)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function bw(t,e){return t=de(t),e=de(e),t instanceof dw&&e instanceof dw&&t.firestore===e.firestore&&Td(t._query,e._query)&&t.converter===e.converter}var _w=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new Qm(this,"async_queue_retry"),this.Ic=function(){var e=zm();e&&$f("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=zm();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},t.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var e=zm();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ic)}},t.prototype.enqueue=function(t){var e=this;if(this.Ac(),this._c)return new Promise((function(){}));var n=new Ug;return this.Rc((function(){return e._c&&e.Ec?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.wc.push(t),e.bc()}))},t.prototype.bc=function(){return It(this,void 0,void 0,(function(){var t,e=this;return Tt(this,(function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!Wg(t=n.sent()))throw t;return $f("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji((function(){return e.bc()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Rc=function(t){var e=this,n=this.dc.then((function(){return e.gc=!0,t().catch((function(t){throw e.yc=t,e.gc=!1,Yf("INTERNAL UNHANDLED ERROR: ",(r=(n=t).message||"",n.stack&&(r=n.stack.includes(n.message)?n.stack:n.message+"\n"+n.stack),r)),t;var n,r})).then((function(t){return e.gc=!1,t}))}));return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ac(),this.Tc.indexOf(t)>-1&&(e=0);var i=kb.createAndSchedule(this,t,e,n,(function(t){return r.vc(t)}));return this.mc.push(i),i},t.prototype.Ac=function(){this.yc&&Zf()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Pc=function(){return It(this,void 0,void 0,(function(){var t;return Tt(this,(function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Vc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Sc=function(t){var e=this;return this.Pc().then((function(){e.mc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Pc()}))},t.prototype.Dc=function(t){this.Tc.push(t)},t.prototype.vc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function ww(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Iw=function(){function t(){this._progressObserver={},this._taskCompletionResolver=new Ug,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)},t}(),Tw=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new _w,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return _t(e,t),e.prototype._terminate=function(){return this._firestoreClient||Sw(this),this._firestoreClient.terminate()},e}(fw);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ew(t){return t._firestoreClient||Sw(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Sw(t){var e,n,r,i,o,a=t._freezeSettings(),s=(n=t._databaseId,r=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",i=t._persistenceKey,new Q_(n,r,i,(o=a).host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,o.useFetchStreams));t._firestoreClient=new M_(t._credentials,t._queue,s)}function kw(t,e,n){var r=this,i=new Ug;return t.asyncQueue.enqueue((function(){return It(r,void 0,void 0,(function(){var r;return Tt(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,F_(t,n)];case 1:return o.sent(),[4,U_(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!("FirebaseError"===(a=r=o.sent()).name?a.code===Hf.FAILED_PRECONDITION||a.code===Hf.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}var a}))}))})).then((function(){return i.promise}))}function Cw(t){if(t._initialized||t._terminated)throw new zf(Hf.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nw=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new zf(Hf.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vp(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),Aw=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(yp.fromBase64String(e))}catch(n){throw new zf(Hf.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}},t.fromUint8Array=function(e){return new t(yp.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),Pw=function(t){this._methodName=t},Rw=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new zf(Hf.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new zf(Hf.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return ip(this._lat,t._lat)||ip(this._long,t._long)},t}(),Dw=/^__.*__$/,xw=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new ev(t,this.data,this.fieldMask,e,this.fieldTransforms):new tv(t,this.data,e,this.fieldTransforms)},t}(),Ow=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new ev(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Zf()}}var Mw=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),t.prototype.xc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.Fc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,kc:!1});return r.$c(t),r},t.prototype.Oc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,kc:!1});return r.Cc(),r},t.prototype.Mc=function(t){return this.xc({path:void 0,kc:!0})},t.prototype.Lc=function(t){return nI(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},t.prototype.$c=function(t){if(0===t.length)throw this.Lc("Document fields must not be empty");if(Lw(this.Nc)&&Dw.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},t}(),Fw=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||Gm(t)}return t.prototype.Uc=function(t,e,n,r){return void 0===r&&(r=!1),new Mw({Nc:t,methodName:e,qc:n,path:vp.emptyPath(),kc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function Uw(t){var e=t._freezeSettings(),n=Gm(t._databaseId);return new Fw(t._databaseId,!!e.ignoreUndefinedProperties,n)}function jw(t,e,n,r,i,o){void 0===o&&(o={});var a=t.Uc(o.merge||o.mergeFields?2:0,e,n,i);Jw("Data must be an object, but it was:",a,r);var s,u,c=Yw(r,a);if(o.merge)s=new gp(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){for(var h=[],l=0,f=o.mergeFields;l<f.length;l++){var p=Zw(e,f[l],n);if(!a.contains(p))throw new zf(Hf.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");rI(h,p)||h.push(p)}s=new gp(h),u=a.fieldTransforms.filter((function(t){return s.covers(t.field)}))}else s=null,u=a.fieldTransforms;return new xw(new Kp(c),s,u)}var qw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _t(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Nc)throw 1===t.Nc?t.Lc(this._methodName+"() can only appear at the top level of your update data"):t.Lc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Pw);function Vw(t,e,n){return new Mw({Nc:3,qc:e.settings.qc,methodName:t._methodName,kc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var Bw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _t(e,t),e.prototype._toFieldTransform=function(t){return new Wd(t.path,new Md)},e.prototype.isEqual=function(t){return t instanceof e},e}(Pw),Kw=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return _t(e,t),e.prototype._toFieldTransform=function(t){var e=Vw(this,t,!0),n=this.Kc.map((function(t){return $w(t,e)})),r=new Fd(n);return new Wd(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Pw),Ww=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return _t(e,t),e.prototype._toFieldTransform=function(t){var e=Vw(this,t,!0),n=this.Kc.map((function(t){return $w(t,e)})),r=new jd(n);return new Wd(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Pw),Hw=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Qc=n,r}return _t(e,t),e.prototype._toFieldTransform=function(t){var e=new Vd(t.R,Rd(t.R,this.Qc));return new Wd(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Pw);function zw(t,e,n,r){var i=t.Uc(1,e,n);Jw("Data must be an object, but it was:",i,r);var o=[],a=Kp.empty();hp(r,(function(t,r){var s=eI(e,t,n);r=de(r);var u=i.Oc(s);if(r instanceof qw)o.push(s);else{var c=$w(r,u);null!=c&&(o.push(s),a.set(s,c))}}));var s=new gp(o);return new Ow(a,s,i.fieldTransforms)}function Gw(t,e,n,r,i,o){var a=t.Uc(1,e,n),s=[Zw(e,r,n)],u=[i];if(o.length%2!=0)throw new zf(Hf.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)s.push(Zw(e,o[c])),u.push(o[c+1]);for(var h=[],l=Kp.empty(),f=s.length-1;f>=0;--f)if(!rI(h,s[f])){var p=s[f],d=u[f];d=de(d);var v=a.Oc(p);if(d instanceof qw)h.push(p);else{var g=$w(d,v);null!=g&&(h.push(p),l.set(p,g))}}var y=new gp(h);return new Ow(l,y,a.fieldTransforms)}function Qw(t,e,n,r){return void 0===r&&(r=!1),$w(n,t.Uc(r?4:3,e))}function $w(t,e){if(Xw(t=de(t)))return Jw("Unsupported field value:",e,t),Yw(t,e);if(t instanceof Pw)return function(t,e){if(!Lw(e.Nc))throw e.Lc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Lc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.kc&&4!==e.Nc)throw e.Lc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=$w(o[i],e.Mc(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=de(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Rd(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=sp.fromDate(t);return{timestampValue:jv(e.R,n)}}if(t instanceof sp)return n=new sp(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:jv(e.R,n)};if(t instanceof Rw)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Aw)return{bytesValue:qv(e.R,t._byteString)};if(t instanceof pw){n=e.databaseId;var r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Lc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Kv(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Lc("Unsupported field value: "+uw(t))}(t,e)}function Yw(t,e){var n={};return lp(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):hp(t,(function(t,r){var i=$w(r,e.Fc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Xw(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof sp||t instanceof Rw||t instanceof Aw||t instanceof pw||t instanceof Pw)}function Jw(t,e,n){if(!Xw(n)||("object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i))){var r=uw(n);throw"an object"===r?e.Lc(t+" a custom object"):e.Lc(t+" "+r)}var i}function Zw(t,e,n){if((e=de(e))instanceof Nw)return e._internalPath;if("string"==typeof e)return eI(t,e);throw nI("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var tI=new RegExp("[~\\*/\\[\\]]");function eI(t,e,n){if(e.search(tI)>=0)throw nI("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Nw.bind.apply(Nw,kt([void 0],e.split(".")))))._internalPath}catch(aT){throw nI("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function nI(t,e,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,s="Function "+e+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var u="";return(o||a)&&(u+=" (found",o&&(u+=" in field "+r),a&&(u+=" in document "+i),u+=")"),new zf(Hf.INVALID_ARGUMENT,(s+=". ")+t+u)}function rI(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var iI=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new pw(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new oI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(aI("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),oI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _t(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(iI);function aI(t,e){return"string"==typeof e?eI(t,e):e instanceof Nw?e._internalPath:e._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sI=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),uI=function(t){function e(e,n,r,i,o,a){var s=this;return(s=t.call(this,e,n,r,i,a)||this)._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return _t(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new cI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(aI("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(iI),cI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _t(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(uI),hI=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new sI(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new cI(n._firestore,n._userDataWriter,r.key,r,new sI(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new zf(Hf.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){return{type:"added",doc:new cI(t._firestore,t._userDataWriter,e.doc.key,e.doc,new sI(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new cI(t._firestore,t._userDataWriter,e.doc.key,e.doc,new sI(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:lI(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function lI(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Zf()}}function fI(t,e){return t instanceof uI&&e instanceof uI?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof hI&&e instanceof hI&&t._firestore===e._firestore&&bw(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pI(t){if(gd(t)&&0===t.explicitOrderBy.length)throw new zf(Hf.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var dI=function(){};function vI(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var gI=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).jc=e,i.Wc=n,i.Gc=r,i.type="where",i}return _t(e,t),e.prototype._apply=function(t){var e,n,r,i=Uw(t.firestore),o=function(t,e,n,r,i,o,a){var s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new zf(Hf.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){TI(a,o);for(var u=[],c=0,h=a;c<h.length;c++){var l=h[c];u.push(II(r,t,l))}s={arrayValue:{values:u}}}else s=II(r,t,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||TI(a,o),s=Qw(n,"where",a,"in"===o||"not-in"===o);var f=Xp.create(i,o,s);return function(t,e){if(e.g()){var n=md(t);if(null!==n&&!n.isEqual(e.field))throw new zf(Hf.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=yd(t);null!==r&&EI(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new zf(Hf.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new zf(Hf.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(t._query,0,i,t.firestore._databaseId,this.jc,this.Wc,this.Gc);return new dw(t.firestore,t.converter,(e=t._query,n=o,r=e.filters.concat([n]),new fd(e.path,e.collectionGroup,e.explicitOrderBy.slice(),r,e.limit,e.limitType,e.startAt,e.endAt)))},e}(dI),yI=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jc=e,r.zc=n,r.type="orderBy",r}return _t(e,t),e.prototype._apply=function(t){var e,n,r,i=function(t,e,n){if(null!==t.startAt)throw new zf(Hf.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new zf(Hf.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new ud(e,n);return function(t,e){if(null===yd(t)){var n=md(t);null!==n&&EI(t,n,e.field)}}(t,r),r}(t._query,this.jc,this.zc);return new dw(t.firestore,t.converter,(e=t._query,n=i,r=e.explicitOrderBy.concat([n]),new fd(e.path,e.collectionGroup,r,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)))},e}(dI),mI=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return _t(e,t),e.prototype._apply=function(t){return new dw(t.firestore,t.converter,Id(t._query,this.Hc,this.Jc))},e}(dI),bI=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return _t(e,t),e.prototype._apply=function(t){var e,n,r=wI(t,this.type,this.Yc,this.Xc);return new dw(t.firestore,t.converter,(e=t._query,n=r,new fd(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,n,e.endAt)))},e}(dI),_I=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return _t(e,t),e.prototype._apply=function(t){var e,n,r=wI(t,this.type,this.Yc,this.Xc);return new dw(t.firestore,t.converter,(e=t._query,n=r,new fd(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,n)))},e}(dI);function wI(t,e,n,r){if(n[0]=de(n[0]),n[0]instanceof iI)return function(t,e,n,r,i){if(!r)throw new zf(Hf.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],a=0,s=_d(t);a<s.length;a++){var u=s[a];if(u.field.isKeyField())o.push(Mp(e,r.key));else{var c=r.data.field(u.field);if(Ip(c))throw new zf(Hf.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=u.field.canonicalString();throw new zf(Hf.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new ad(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=Uw(t.firestore);return function(t,e,n,r,i,o){var a=t.explicitOrderBy;if(i.length>a.length)throw new zf(Hf.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],u=0;u<i.length;u++){var c=i[u];if(a[u].field.isKeyField()){if("string"!=typeof c)throw new zf(Hf.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!bd(t)&&-1!==c.indexOf("/"))throw new zf(Hf.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(pp.fromString(c));if(!Np.isDocumentKey(h))throw new zf(Hf.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var l=new Np(h);s.push(Mp(e,l))}else{var f=Qw(n,r,c);s.push(f)}}return new ad(s,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function II(t,e,n){if("string"==typeof(n=de(n))){if(""===n)throw new zf(Hf.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!bd(e)&&-1!==n.indexOf("/"))throw new zf(Hf.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(pp.fromString(n));if(!Np.isDocumentKey(r))throw new zf(Hf.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Mp(t,new Np(r))}if(n instanceof pw)return Mp(t,n._key);throw new zf(Hf.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+uw(n)+".")}function TI(t,e){if(!Array.isArray(t)||0===t.length)throw new zf(Hf.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new zf(Hf.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function EI(t,e,n){if(!n.isEqual(e))throw new zf(Hf.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var SI=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),Ap(t)){case 0:return null;case 1:return t.booleanValue;case 2:return _p(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(wp(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Zf()}},t.prototype.convertObject=function(t,e){var n=this,r={};return hp(t.fields,(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new Rw(_p(t.latitude),_p(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=Tp(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Ep(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=bp(t);return new sp(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=pp.fromString(t);tp(dg(n));var r=new $_(n.get(1),n.get(3)),i=new Np(n.popFirst(5));return r.isEqual(e)||Yf("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kI(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var CI=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return _t(e,t),e.prototype.convertBytes=function(t){return new Aw(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new pw(this.firestore,null,e)},e}(SI),NI=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Uw(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=AI(t,this._firestore),i=kI(r.converter,e,n),o=jw(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,zd.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,a=AI(t,this._firestore);return o="string"==typeof(e=de(e))||e instanceof Nw?Gw(this._dataReader,"WriteBatch.update",a._key,e,n,r):zw(this._dataReader,"WriteBatch.update",a._key,e),this._mutations.push(o.toMutation(a._key,zd.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=AI(t,this._firestore);return this._mutations=this._mutations.concat(new sv(e._key,zd.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new zf(Hf.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AI(t,e){if((t=de(t)).firestore!==e)throw new zf(Hf.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var PI=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return _t(e,t),e.prototype.convertBytes=function(t){return new Aw(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new pw(this.firestore,null,e)},e}(SI);function RI(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=cw(t,pw);var o=cw(t.firestore,Tw),a=Uw(o);return xI(o,[("string"==typeof(e=de(e))||e instanceof Nw?Gw(a,"updateDoc",t._key,e,n,r):zw(a,"updateDoc",t._key,e)).toMutation(t._key,zd.exists(!0))])}function DI(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=de(t);var a={includeMetadataChanges:!1},s=0;"object"!=typeof i[s]||ww(i[s])||(a=i[s],s++);var u,c,h,l={includeMetadataChanges:a.includeMetadataChanges};if(ww(i[s])){var f=i[s];i[s]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[s+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[s+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof pw)c=cw(t.firestore,Tw),h=dd(t._key.path),u={next:function(e){i[s]&&i[s](OI(c,t,e))},error:i[s+1],complete:i[s+2]};else{var p=cw(t,dw);c=cw(p.firestore,Tw),h=p._query;var d=new PI(c);u={next:function(t){i[s]&&i[s](new hI(c,d,p,t))},error:i[s+1],complete:i[s+2]},pI(t._query)}return function(t,e,n,r){var i=this,o=new D_(r),a=new Ub(e,o,n);return t.asyncQueue.enqueueAndForget((function(){return It(i,void 0,void 0,(function(){var e;return Tt(this,(function(n){switch(n.label){case 0:return e=xb,[4,H_(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))})),function(){o.Wo(),t.asyncQueue.enqueueAndForget((function(){return It(i,void 0,void 0,(function(){var e;return Tt(this,(function(n){switch(n.label){case 0:return e=Ob,[4,H_(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))}))}}(Ew(c),h,l,u)}function xI(t,e){return function(t,e){var n=this,r=new Ug;return t.asyncQueue.enqueueAndForget((function(){return It(n,void 0,void 0,(function(){var n;return Tt(this,(function(i){switch(i.label){case 0:return n=Jb,[4,W_(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(Ew(t),e)}function OI(t,e,n){var r=n.docs.get(e._key),i=new PI(t);return new uI(t,i,e._key,r,new sI(n.hasPendingWrites,n.fromCache),e.converter)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LI=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return _t(e,t),e.prototype.get=function(e){var n=this,r=AI(e,this._firestore),i=new PI(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new uI(n._firestore,i,r._key,t._document,new sI(!1,!1),r.converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=Uw(t)}return t.prototype.get=function(t){var e=this,n=AI(t,this._firestore),r=new CI(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return Zf();var i=t[0];if(i.isFoundDocument())return new iI(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new iI(e._firestore,r,n._key,null,n.converter);throw Zf()}))},t.prototype.set=function(t,e,n){var r=AI(t,this._firestore),i=kI(r.converter,e,n),o=jw(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,a=AI(t,this._firestore);return o="string"==typeof(e=de(e))||e instanceof Nw?Gw(this._dataReader,"Transaction.update",a._key,e,n,r):zw(this._dataReader,"Transaction.update",a._key,e),this._transaction.update(a._key,o),this},t.prototype.delete=function(t){var e=AI(t,this._firestore);return this._transaction.delete(e._key),this},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MI(){if("undefined"==typeof Uint8Array)throw new zf(Hf.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function FI(){if("undefined"==typeof atob)throw new zf(Hf.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var UI=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return FI(),new t(Aw.fromBase64String(e))},t.fromUint8Array=function(e){return MI(),new t(Aw.fromUint8Array(e))},t.prototype.toBase64=function(){return FI(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return MI(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),jI=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Cw(t=cw(t,Tw));var n=Ew(t),r=t._freezeSettings(),i=new P_;return kw(n,i,new N_(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Cw(t=cw(t,Tw));var e=Ew(t),n=t._freezeSettings(),r=new P_;return kw(e,r,new A_(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new zf(Hf.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Ug;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return It(e,void 0,void 0,(function(){var e;return Tt(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return It(this,void 0,void 0,(function(){var e;return Tt(this,(function(n){switch(n.label){case 0:return Vg.yt()?(e=t+"main",[4,Vg.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(Jy(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),qI=function(){function t(t,e,n){var r=this;this._delegate=e,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof $_||(this.tu=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||Xf("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=cw(t,fw))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&Xf("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var o=Ft(r.mockUserToken),a=r.mockUserToken.sub||r.mockUserToken.user_id;if(!a)throw new zf(Hf.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new Z_(new X_(o,new Am(a)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return It(e,void 0,void 0,(function(){var e,n;return Tt(this,(function(r){switch(r.label){case 0:return[4,V_(t)];case 1:return e=r.sent(),[4,K_(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),i=n,o=ep(i),o.Or.delete(0),eb(o))]}var i,o}))}))}))}(Ew(cw(this._delegate,Tw)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return It(e,void 0,void 0,(function(){var e,n;return Tt(this,(function(r){switch(r.label){case 0:return[4,V_(t)];case 1:return e=r.sent(),[4,K_(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return It(this,void 0,void 0,(function(){var e;return Tt(this,(function(n){switch(n.label){case 0:return(e=ep(t)).Or.add(0),[4,nb(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(Ew(cw(this._delegate,Tw)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&ow("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Ug;return t.asyncQueue.enqueueAndForget((function(){return It(e,void 0,void 0,(function(){var e;return Tt(this,(function(r){switch(r.label){case 0:return e=i_,[4,W_(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(Ew(cw(this._delegate,Tw)))},t.prototype.onSnapshotsInSync=function(t){return e=this._delegate,n=t,function(t,e){var n=this,r=new D_(e);return t.asyncQueue.enqueueAndForget((function(){return It(n,void 0,void 0,(function(){var e;return Tt(this,(function(n){switch(n.label){case 0:return e=function(t,e){ep(t).Gr.add(e),e.next()},[4,H_(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),t.asyncQueue.enqueueAndForget((function(){return It(n,void 0,void 0,(function(){var e;return Tt(this,(function(n){switch(n.label){case 0:return e=function(t,e){ep(t).Gr.delete(e)},[4,H_(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(Ew(e=cw(e,Tw)),ww(n)?n:{next:n});var e,n},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.tu)throw new zf(Hf.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new tT(this,gw(this._delegate,t))}catch(e){throw zI(e,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new HI(this,yw(this._delegate,t))}catch(e){throw zI(e,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new XI(this,function(t,e){if(t=cw(t,fw),rw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new zf(Hf.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new dw(t,null,(n=e,new fd(pp.emptyPath(),n)));var n}(this._delegate,t))}catch(e){throw zI(e,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e,n=this;return function(t,e){var n=this,r=new Ug;return t.asyncQueue.enqueueAndForget((function(){return It(n,void 0,void 0,(function(){var n;return Tt(this,(function(i){switch(i.label){case 0:return[4,(o=t,q_(o).then((function(t){return t.datastore})))];case 1:return n=i.sent(),new L_(t.asyncQueue,n,e,r).run(),[2]}var o}))}))})),r.promise}(Ew(e=this._delegate),(function(r){return function(e){return t(new BI(n,e))}(new LI(e,r))}))},t.prototype.batch=function(){var t=this;return Ew(this._delegate),new KI(new NI(this._delegate,(function(e){return xI(t._delegate,e)})))},t.prototype.loadBundle=function(t){throw new zf(Hf.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new zf(Hf.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),VI=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return _t(e,t),e.prototype.convertBytes=function(t){return new UI(new Aw(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return HI.eu(e,this.firestore,null)},e}(SI);var BI=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new VI(t)}return t.prototype.get=function(t){var e=this,n=eT(t);return this._delegate.get(n).then((function(t){return new $I(e._firestore,new uI(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))}))},t.prototype.set=function(t,e,n){var r=eT(t);return n?(iw("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=eT(t);return 2===arguments.length?this._delegate.update(a,e):(r=this._delegate).update.apply(r,kt([a,e,n],i)),this},t.prototype.delete=function(t){var e=eT(t);return this._delegate.delete(e),this},t}(),KI=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=eT(t);return n?(iw("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=eT(t);return 2===arguments.length?this._delegate.update(a,e):(r=this._delegate).update.apply(r,kt([a,e,n],i)),this},t.prototype.delete=function(t){var e=eT(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),WI=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new cI(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new YI(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.nu=function(e,n){var r=t.su,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new VI(e),n),i.set(n,o)),o},t}();WI.su=new WeakMap;var HI=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new VI(t)}return t.iu=function(e,n,r){if(e.length%2!=0)throw new zf(Hf.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new pw(n._delegate,r,new Np(e)))},t.eu=function(e,n,r){return new t(n,new pw(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new tT(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new tT(this.firestore,gw(this._delegate,t))}catch(e){throw zI(e,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=de(t))instanceof pw&&mw(this._delegate,t)},t.prototype.set=function(t,e){e=iw("DocumentReference.set",e);try{return function(t,e,n){t=cw(t,pw);var r=cw(t.firestore,Tw),i=kI(t.converter,e,n);return xI(r,[jw(Uw(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,zd.none())])}(this._delegate,t,e)}catch(n){throw zI(n,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?RI(this._delegate,t):RI.apply(void 0,kt([this._delegate,t,e],n))}catch(i){throw zI(i,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return xI(cw((t=this._delegate).firestore,Tw),[new sv(t._key,zd.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=GI(e),i=QI(e,(function(e){return new $I(t.firestore,new uI(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}));return DI(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=cw(t,pw);var e=cw(t.firestore,Tw),n=Ew(e),r=new PI(e);return function(t,e){var n=this,r=new Ug;return t.asyncQueue.enqueueAndForget((function(){return It(n,void 0,void 0,(function(){var n;return Tt(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return It(this,void 0,void 0,(function(){var r,i;return Tt(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,(a=t,s=e,u=ep(a),u.persistence.runTransaction("read document","readonly",(function(t){return u.Mn.mn(t,s)})))];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new zf(Hf.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Cb(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}var a,s,u}))}))},[4,B_(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new uI(e,r,t._key,n,new sI(null!==n&&n.hasLocalMutations,!0),t.converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=cw(t,pw);var e=cw(t.firestore,Tw);return z_(Ew(e),t._key,{source:"server"}).then((function(n){return OI(e,t,n)}))}(this._delegate):function(t){t=cw(t,pw);var e=cw(t.firestore,Tw);return z_(Ew(e),t._key).then((function(n){return OI(e,t,n)}))}(this._delegate)).then((function(t){return new $I(e.firestore,new uI(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(WI.nu(this.firestore,e)):this._delegate.withConverter(null))},t}();function zI(t,e,n){return t.message=t.message.replace(e,n),t}function GI(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!ww(r))return r}return{}}function QI(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=ww(t[0])?t[0]:ww(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var $I=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new HI(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return fI(this._delegate,t._delegate)},t}(),YI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _t(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}($I),XI=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new VI(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,vI(this._delegate,(o=r,a=i=n,s=aI("where",e),new gI(s,a,o))))}catch(i){throw zI(i,/(orderBy|where)\(\)/,"Query.$1()")}var i,o,a,s},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,vI(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=aI("orderBy",t);return new yI(r,n)}(e,n)))}catch(r){throw zI(r,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,vI(this._delegate,(hw("limit",n=e),new mI("limit",n,"F"))))}catch(r){throw zI(r,"limit()","Query.limit()")}var n},t.prototype.limitToLast=function(e){try{return new t(this.firestore,vI(this._delegate,(hw("limitToLast",n=e),new mI("limitToLast",n,"L"))))}catch(r){throw zI(r,"limitToLast()","Query.limitToLast()")}var n},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,vI(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new bI("startAt",t,!0)}.apply(void 0,e)))}catch(r){throw zI(r,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,vI(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new bI("startAfter",t,!1)}.apply(void 0,e)))}catch(r){throw zI(r,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,vI(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new _I("endBefore",t,!0)}.apply(void 0,e)))}catch(r){throw zI(r,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,vI(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new _I("endAt",t,!1)}.apply(void 0,e)))}catch(r){throw zI(r,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return bw(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=cw(t,dw);var e=cw(t.firestore,Tw),n=Ew(e),r=new PI(e);return function(t,e){var n=this,r=new Ug;return t.asyncQueue.enqueueAndForget((function(){return It(n,void 0,void 0,(function(){var n;return Tt(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return It(this,void 0,void 0,(function(){var r,i,o,a,s;return Tt(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,pm(t,e,!0)];case 1:return s=u.sent(),r=new Hb(e,s.Bn),i=r._o(s.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return a=u.sent(),s=Cb(a,"Failed to execute query '"+e+" against cache"),n.reject(s),[3,3];case 3:return[2]}}))}))},[4,B_(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new hI(e,r,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=cw(t,dw);var e=cw(t.firestore,Tw),n=Ew(e),r=new PI(e);return G_(n,t._query,{source:"server"}).then((function(n){return new hI(e,r,t,n)}))}(this._delegate):function(t){t=cw(t,dw);var e=cw(t.firestore,Tw),n=Ew(e),r=new PI(e);return pI(t._query),G_(n,t._query).then((function(n){return new hI(e,r,t,n)}))}(this._delegate)).then((function(t){return new ZI(e.firestore,new hI(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=GI(e),i=QI(e,(function(e){return new ZI(t.firestore,new hI(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return DI(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(WI.nu(this.firestore,e)):this._delegate.withConverter(null))},t}(),JI=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new YI(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),ZI=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new XI(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new YI(t._firestore,e)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new JI(e._firestore,t)}))},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new YI(n._firestore,r))}))},t.prototype.isEqual=function(t){return fI(this._delegate,t._delegate)},t}(),tT=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return _t(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new HI(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new HI(this.firestore,void 0===t?yw(this._delegate):yw(this._delegate,t))}catch(e){throw zI(e,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e,n,r,i,o,a=this;return(e=this._delegate,n=t,r=cw(e.firestore,Tw),i=yw(e),o=kI(e.converter,n),xI(r,[jw(Uw(e.firestore),"addDoc",i._key,o,null!==e.converter,{}).toMutation(i._key,zd.exists(!1))]).then((function(){return i}))).then((function(t){return new HI(a.firestore,t)}))},e.prototype.isEqual=function(t){return mw(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(WI.nu(this.firestore,t)):this._delegate.withConverter(null))},e}(XI);function eT(t){return cw(t,pw)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nT=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(Nw.bind.apply(Nw,kt([void 0],t)))}return t.documentId=function(){return new t(vp.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=de(t))instanceof Nw&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),rT=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new Bw("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new qw("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Kw("arrayUnion",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Ww("arrayRemove",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=new Hw("increment",e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iT(t){return e=this._delegate,n=t,r=Ew(e=cw(e,Tw)),i=new Iw,function(t,e,n,r){var i,o,a,s=this,u=(i=n,o=Gm(e),a=function(t,e){if(t instanceof Uint8Array)return R_(t,e);if(t instanceof ArrayBuffer)return R_(new Uint8Array(t),e);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof i?(new TextEncoder).encode(i):i),new x_(a,o));t.asyncQueue.enqueueAndForget((function(){return It(s,void 0,void 0,(function(){var e;return Tt(this,(function(n){switch(n.label){case 0:return e=k_,[4,W_(t)];case 1:return e.apply(void 0,[n.sent(),u,r]),[2]}}))}))}))}(r,e._databaseId,n,i),i;var e,n,r,i}function oT(t){var e,n,r=this;return(e=this._delegate,n=t,function(t,e){var n=this;return t.asyncQueue.enqueue((function(){return It(n,void 0,void 0,(function(){var n;return Tt(this,(function(r){switch(r.label){case 0:return n=function(t,e){var n=ep(t);return n.persistence.runTransaction("Get named query","readonly",(function(t){return n.Ke.getNamedQuery(t,e)}))},[4,B_(t)];case 1:return[2,n.apply(void 0,[r.sent(),e])]}}))}))}))}(Ew(e=cw(e,Tw)),n).then((function(t){return t?new dw(e,null,t.query):null}))).then((function(t){return t?new XI(r,t):null}))}var aT,sT,uT={Firestore:qI,GeoPoint:Rw,Timestamp:sp,Blob:UI,Transaction:BI,WriteBatch:KI,DocumentReference:HI,DocumentSnapshot:$I,Query:XI,QueryDocumentSnapshot:YI,QuerySnapshot:ZI,CollectionReference:tT,FieldPath:nT,FieldValue:rT,setLogLevel:function(t){var e;e=t,Gf.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(aT=Ke).INTERNAL.registerComponent(new ve("firestore",(function(t){return function(t,e){return new qI(t,new Tw(t,e),new jI)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},uT))),aT.registerVersion("@firebase/firestore","2.3.10"),(sT=qI).prototype.loadBundle=iT,sT.prototype.namedQuery=oT;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var cT={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},hT=function(t){function e(n,r,i){var o=t.call(this,r)||this;return Object.setPrototypeOf(o,e.prototype),o.code=n,o.details=i,o}return _t(e,t),e}(Error);var lT=function(){function t(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then((function(t){return n.auth=t}),(function(){})),this.messaging||e.get().then((function(t){return n.messaging=t}),(function(){}))}return t.prototype.getAuthToken=function(){return It(this,void 0,void 0,(function(){var t;return Tt(this,(function(e){switch(e.label){case 0:if(!this.auth)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(t=e.sent())?[2,t.accessToken]:[2,void 0];case 3:return e.sent(),[2,void 0];case 4:return[2]}}))}))},t.prototype.getInstanceIdToken=function(){return It(this,void 0,void 0,(function(){return Tt(this,(function(t){switch(t.label){case 0:if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.messaging.getToken()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,void 0];case 4:return[2]}}))}))},t.prototype.getContext=function(){return It(this,void 0,void 0,(function(){var t,e;return Tt(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[4,this.getInstanceIdToken()];case 2:return e=n.sent(),[2,{authToken:t,instanceIdToken:e}]}}))}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var pT=function(){function t(){}return t.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map((function(t){return e.encode(t)}));if("function"==typeof t||"object"==typeof t)return fT(t,(function(t){return e.encode(t)}));throw new Error("Data cannot be encoded in JSON: "+t)},t.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map((function(t){return e.decode(t)})):"function"==typeof t||"object"==typeof t?fT(t,(function(t){return e.decode(t)})):t},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dT=function(){function t(t,e,n,r,i,o){var a=this;void 0===i&&(i="us-central1"),this.app_=t,this.appCheckProvider=r,this.fetchImpl=o,this.serializer=new pT,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(a.deleteService())}},this.contextProvider=new lT(e,n),this.cancelAllRequests=new Promise((function(t){a.deleteService=function(){return t()}}));try{var s=new URL(i);this.customDomain=s.origin,this.region="us-central1"}catch(aT){this.customDomain=null,this.region=i}}return Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),t.prototype._url=function(t){var e=this.app_.options.projectId;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+e+"/"+this.region+"/"+t:null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t},t.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},t.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},t.prototype.httpsCallable=function(t,e){var n=this;return function(r){return n.call(t,r,e||{})}},t.prototype.postJSON=function(t,e,n){return It(this,void 0,void 0,(function(){var r,i,o;return Tt(this,(function(a){switch(a.label){case 0:return n["Content-Type"]="application/json",[4,this.getAppCheckToken()];case 1:null!==(r=a.sent())&&(n["X-Firebase-AppCheck"]=r),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,this.fetchImpl(t,{method:"POST",body:JSON.stringify(e),headers:n})];case 3:return i=a.sent(),[3,5];case 4:return a.sent(),[2,{status:0,json:null}];case 5:o=null,a.label=6;case 6:return a.trys.push([6,8,,9]),[4,i.json()];case 7:return o=a.sent(),[3,9];case 8:return a.sent(),[3,9];case 9:return[2,{status:i.status,json:o}]}}))}))},t.prototype.getAppCheckToken=function(){return It(this,void 0,void 0,(function(){var t;return Tt(this,(function(e){switch(e.label){case 0:return(t=this.appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}}))}))},t.prototype.call=function(t,e,n){return It(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,h,l,f,p;return Tt(this,(function(d){switch(d.label){case 0:return r=this._url(t),e=this.serializer.encode(e),i={data:e},o={},[4,this.contextProvider.getContext()];case 1:return(a=d.sent()).authToken&&(o.Authorization="Bearer "+a.authToken),a.instanceIdToken&&(o["Firebase-Instance-ID-Token"]=a.instanceIdToken),s=n.timeout||7e4,u=function(t){var e,n=new Promise((function(n,r){e=setTimeout((function(){r(new hT("deadline-exceeded","deadline-exceeded"))}),t)}));return{timer:e,promise:n}}(s),c=u.timer,h=u.promise,[4,Promise.race([vT(c,this.postJSON(r,i,o)),h,vT(c,this.cancelAllRequests)])];case 2:if(!(l=d.sent()))throw new hT("cancelled","Firebase Functions instance was deleted.");if(f=function(t,e,n){var r=function(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,o=void 0;try{var a=e&&e.error;if(a){var s=a.status;if("string"==typeof s){if(!cT[s])return new hT("internal","internal");r=cT[s],i=s}var u=a.message;"string"==typeof u&&(i=u),void 0!==(o=a.details)&&(o=n.decode(o))}}catch(aT){}return"ok"===r?null:new hT(r,i,o)}(l.status,l.json,this.serializer))throw f;if(!l.json)throw new hT("internal","Response is not valid JSON object.");if(void 0===(p=l.json.data)&&(p=l.json.result),void 0===p)throw new hT("internal","Response is missing data field.");return[2,{data:this.serializer.decode(p)}]}}))}))},t}();function vT(t,e){return It(this,void 0,void 0,(function(){var n;return Tt(this,(function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),clearTimeout(t),[2,n]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(t){return Array.prototype.slice.call(t)}function yT(t){return new Promise((function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function mT(t,e,n){var r,i=new Promise((function(i,o){yT(r=t[e].apply(t,n)).then(i,o)}));return i.request=r,i}function bT(t,e,n){var r=mT(t,e,n);return r.then((function(t){if(t)return new ST(t,r.request)}))}function _T(t,e,n){n.forEach((function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})}))}function wT(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return mT(this[e],r,arguments)})}))}function IT(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})}))}function TT(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return bT(this[e],r,arguments)})}))}function ET(t){this._index=t}function ST(t,e){this._cursor=t,this._request=e}function kT(t){this._store=t}function CT(t){this._tx=t,this.complete=new Promise((function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}}))}function NT(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new CT(n)}function AT(t){this._db=t}function PT(t,e,n){var r=mT(indexedDB,"open",[t,e]),i=r.request;return i&&(i.onupgradeneeded=function(t){n&&n(new NT(i.result,t.oldVersion,i.transaction))}),r.then((function(t){return new AT(t)}))}function RT(t){return mT(indexedDB,"deleteDatabase",[t])}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
!function(t,e){var n={Functions:dT};t.INTERNAL.registerComponent(new ve("functions",(function(t,n){var r=n.instanceIdentifier,i=t.getProvider("app").getImmediate(),o=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal"),s=t.getProvider("messaging");return new dT(i,o,s,a,r,e)}),"PUBLIC").setServiceProps(n).setMultipleInstances(!0))}(Ke,fetch.bind(self)),Ke.registerVersion("@firebase/functions","0.6.14"),_T(ET,"_index",["name","keyPath","multiEntry","unique"]),wT(ET,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),TT(ET,"_index",IDBIndex,["openCursor","openKeyCursor"]),_T(ST,"_cursor",["direction","key","primaryKey","value"]),wT(ST,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(t){t in IDBCursor.prototype&&(ST.prototype[t]=function(){var e=this,n=arguments;return Promise.resolve().then((function(){return e._cursor[t].apply(e._cursor,n),yT(e._request).then((function(t){if(t)return new ST(t,e._request)}))}))})})),kT.prototype.createIndex=function(){return new ET(this._store.createIndex.apply(this._store,arguments))},kT.prototype.index=function(){return new ET(this._store.index.apply(this._store,arguments))},_T(kT,"_store",["name","keyPath","indexNames","autoIncrement"]),wT(kT,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),TT(kT,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),IT(kT,"_store",IDBObjectStore,["deleteIndex"]),CT.prototype.objectStore=function(){return new kT(this._tx.objectStore.apply(this._tx,arguments))},_T(CT,"_tx",["objectStoreNames","mode"]),IT(CT,"_tx",IDBTransaction,["abort"]),NT.prototype.createObjectStore=function(){return new kT(this._db.createObjectStore.apply(this._db,arguments))},_T(NT,"_db",["name","version","objectStoreNames"]),IT(NT,"_db",IDBDatabase,["deleteObjectStore","close"]),AT.prototype.transaction=function(){return new CT(this._db.transaction.apply(this._db,arguments))},_T(AT,"_db",["name","version","objectStoreNames"]),IT(AT,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(t){[kT,ET].forEach((function(e){t in e.prototype&&(e.prototype[t.replace("open","iterate")]=function(){var e=gT(arguments),n=e[e.length-1],r=this._store||this._index,i=r[t].apply(r,e.slice(0,-1));i.onsuccess=function(){n(i.result)}})}))})),[ET,kT].forEach((function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise((function(i){n.iterateCursor(t,(function(t){t?(r.push(t.value),void 0===e||r.length!=e?t.continue():i(r)):i(r)}))}))})}));var DT,xT=((DT={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',DT["not-registered"]="Firebase Installation is not registered.",DT["installation-not-found"]="Firebase Installation not found.",DT["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',DT["app-offline"]="Could not process request. Application offline.",DT["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",DT),OT=new Qt("installations","Installations",xT);function LT(t){return t instanceof Gt&&t.code.includes("request-failed")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MT(t){return"https://firebaseinstallations.googleapis.com/v1/projects/"+t.projectId+"/installations"}function FT(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}function UT(t,e){return It(this,void 0,void 0,(function(){var n,r;return Tt(this,(function(i){switch(i.label){case 0:return[4,e.json()];case 1:return n=i.sent(),r=n.error,[2,OT.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}}))}))}function jT(t){var e=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function qT(t,e){var n=e.refreshToken,r=jT(t);return r.append("Authorization",function(t){return"FIS_v2 "+t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n)),r}function VT(t){return It(this,void 0,void 0,(function(){var e;return Tt(this,(function(n){switch(n.label){case 0:return[4,t()];case 1:return(e=n.sent()).status>=500&&e.status<600?[2,t()]:[2,e]}}))}))}function BT(t,e){var n=e.fid;return It(this,void 0,void 0,(function(){var e,r,i,o,a,s;return Tt(this,(function(u){switch(u.label){case 0:return e=MT(t),r=jT(t),i={fid:n,authVersion:"FIS_v2",appId:t.appId,sdkVersion:"w:0.4.31"},o={method:"POST",headers:r,body:JSON.stringify(i)},[4,VT((function(){return fetch(e,o)}))];case 1:return(a=u.sent()).ok?[4,a.json()]:[3,3];case 2:return s=u.sent(),[2,{fid:s.fid||n,registrationStatus:2,refreshToken:s.refreshToken,authToken:FT(s.authToken)}];case 3:return[4,UT("Create Installation",a)];case 4:throw u.sent()}}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KT(t){return new Promise((function(e){setTimeout(e,t)}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var WT=/^[cdef][\w-]{21}$/;function HT(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){return(e=t,btoa(String.fromCharCode.apply(String,kt([],St(e)))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t);return WT.test(e)?e:""}catch(n){return""}}function zT(t){return t.appName+"!"+t.appId}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var GT=new Map;function QT(t,e){var n=zT(t);$T(n,e),function(t,e){var n=XT();n&&n.postMessage({key:t,fid:e});JT()}(n,e)}function $T(t,e){var n,r,i=GT.get(t);if(i)try{for(var o=Et(i),a=o.next();!a.done;a=o.next()){(0,a.value)(e)}}catch(s){n={error:s}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var YT=null;function XT(){return!YT&&"BroadcastChannel"in self&&((YT=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){$T(t.data.key,t.data.fid)}),YT}function JT(){0===GT.size&&YT&&(YT.close(),YT=null)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ZT,tE="firebase-installations-store",eE=null;function nE(){return eE||(eE=PT("firebase-installations-database",1,(function(t){switch(t.oldVersion){case 0:t.createObjectStore(tE)}}))),eE}function rE(t,e){return It(this,void 0,void 0,(function(){var n,r,i,o,a;return Tt(this,(function(s){switch(s.label){case 0:return n=zT(t),[4,nE()];case 1:return r=s.sent(),i=r.transaction(tE,"readwrite"),[4,(o=i.objectStore(tE)).get(n)];case 2:return a=s.sent(),[4,o.put(e,n)];case 3:return s.sent(),[4,i.complete];case 4:return s.sent(),a&&a.fid===e.fid||QT(t,e.fid),[2,e]}}))}))}function iE(t){return It(this,void 0,void 0,(function(){var e,n,r;return Tt(this,(function(i){switch(i.label){case 0:return e=zT(t),[4,nE()];case 1:return n=i.sent(),[4,(r=n.transaction(tE,"readwrite")).objectStore(tE).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function oE(t,e){return It(this,void 0,void 0,(function(){var n,r,i,o,a,s;return Tt(this,(function(u){switch(u.label){case 0:return n=zT(t),[4,nE()];case 1:return r=u.sent(),i=r.transaction(tE,"readwrite"),[4,(o=i.objectStore(tE)).get(n)];case 2:return a=u.sent(),void 0!==(s=e(a))?[3,4]:[4,o.delete(n)];case 3:return u.sent(),[3,6];case 4:return[4,o.put(s,n)];case 5:u.sent(),u.label=6;case 6:return[4,i.complete];case 7:return u.sent(),!s||a&&a.fid===s.fid||QT(t,s.fid),[2,s]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aE(t){return It(this,void 0,void 0,(function(){var e,n,r;return Tt(this,(function(i){switch(i.label){case 0:return[4,oE(t,(function(n){var r=function(t){return cE(t||{fid:HT(),registrationStatus:0})}(n),i=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(OT.create("app-offline"))};var n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(t,e){return It(this,void 0,void 0,(function(){var n,r;return Tt(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,BT(t,e)];case 1:return n=i.sent(),[2,rE(t,n)];case 2:return LT(r=i.sent())&&409===r.customData.serverCode?[4,iE(t)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,rE(t,{fid:e.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}}))}))}(t,n)}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:sE(t)}:{installationEntry:e}}(t,r);return e=i.registrationPromise,i.installationEntry}))];case 1:return""!==(n=i.sent()).fid?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}}))}))}function sE(t){return It(this,void 0,void 0,(function(){var e,n,r,i;return Tt(this,(function(o){switch(o.label){case 0:return[4,uE(t)];case 1:e=o.sent(),o.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,KT(100)];case 3:return o.sent(),[4,uE(t)];case 4:return e=o.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,aE(t)];case 6:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,e]}}))}))}function uE(t){return oE(t,(function(t){if(!t)throw OT.create("installation-not-found");return cE(t)}))}function cE(t){return 1===(e=t).registrationStatus&&e.registrationTime+1e4<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}function hE(t,e){var n=t.appConfig,r=t.platformLoggerProvider;return It(this,void 0,void 0,(function(){var t,i,o,a,s,u,c;return Tt(this,(function(h){switch(h.label){case 0:return t=function(t,e){var n=e.fid;return MT(t)+"/"+n+"/authTokens:generate"}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n,e),i=qT(n,e),(o=r.getImmediate({optional:!0}))&&i.append("x-firebase-client",o.getPlatformInfoString()),a={installation:{sdkVersion:"w:0.4.31"}},s={method:"POST",headers:i,body:JSON.stringify(a)},[4,VT((function(){return fetch(t,s)}))];case 1:return(u=h.sent()).ok?[4,u.json()]:[3,3];case 2:return c=h.sent(),[2,FT(c)];case 3:return[4,UT("Generate Auth Token",u)];case 4:throw h.sent()}}))}))}function lE(t,e){return void 0===e&&(e=!1),It(this,void 0,void 0,(function(){var n,r,i;return Tt(this,(function(o){switch(o.label){case 0:return[4,oE(t.appConfig,(function(r){if(!pE(r))throw OT.create("not-registered");var i=r.authToken;if(!e&&function(t){return 2===t.requestStatus&&!function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+36e5}(t)}(i))return r;if(1===i.requestStatus)return n=function(t,e){return It(this,void 0,void 0,(function(){var n,r;return Tt(this,(function(i){switch(i.label){case 0:return[4,fE(t.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,KT(100)];case 3:return i.sent(),[4,fE(t.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,lE(t,e)]:[2,r]}}))}))}(t,e),r;if(!navigator.onLine)throw OT.create("app-offline");var o=function(t){var e={requestStatus:1,requestTime:Date.now()};return wt(wt({},t),{authToken:e})}(r);return n=function(t,e){return It(this,void 0,void 0,(function(){var n,r,i;return Tt(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,hE(t,e)];case 1:return n=o.sent(),i=wt(wt({},e),{authToken:n}),[4,rE(t.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return!LT(r=o.sent())||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,iE(t.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=wt(wt({},e),{authToken:{requestStatus:0}}),[4,rE(t.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}}))}))}(t,o),o}))];case 1:return r=o.sent(),n?[4,n]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r.authToken,o.label=4;case 4:return[2,i]}}))}))}function fE(t){return oE(t,(function(t){if(!pE(t))throw OT.create("not-registered");var e,n=t.authToken;return 1===(e=n).requestStatus&&e.requestTime+1e4<Date.now()?wt(wt({},t),{authToken:{requestStatus:0}}):t}))}function pE(t){return void 0!==t&&2===t.registrationStatus}function dE(t){return It(this,void 0,void 0,(function(){var e;return Tt(this,(function(n){switch(n.label){case 0:return[4,aE(t)];case 1:return(e=n.sent().registrationPromise)?[4,e]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vE(t,e){return It(this,void 0,void 0,(function(){var n,r,i,o;return Tt(this,(function(a){switch(a.label){case 0:return n=function(t,e){var n=e.fid;return MT(t)+"/"+n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e),r=qT(t,e),i={method:"DELETE",headers:r},[4,VT((function(){return fetch(n,i)}))];case 1:return(o=a.sent()).ok?[3,3]:[4,UT("Delete Installation",o)];case 2:throw a.sent();case 3:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function gE(t,e){var n=t.appConfig;return function(t,e){XT();var n=zT(t),r=GT.get(n);r||(r=new Set,GT.set(n,r)),r.add(e)}(n,e),function(){!function(t,e){var n=zT(t),r=GT.get(n);r&&(r.delete(e),0===r.size&&GT.delete(n),JT())}(n,e)}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yE(t){return OT.create("missing-app-config-values",{valueName:t})}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(t){t.INTERNAL.registerComponent(new ve("installations",(function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw yE("App Configuration");if(!t.name)throw yE("App Name");try{for(var r=Et(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw yE(o)}}catch(a){e={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
return function(t){return It(this,void 0,void 0,(function(){var e,n,r;return Tt(this,(function(i){switch(i.label){case 0:return[4,aE(t.appConfig)];case 1:return e=i.sent(),n=e.installationEntry,(r=e.registrationPromise)?r.catch(console.error):lE(t).catch(console.error),[2,n.fid]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n)},getToken:function(t){return function(t,e){return void 0===e&&(e=!1),It(this,void 0,void 0,(function(){return Tt(this,(function(n){switch(n.label){case 0:return[4,dE(t.appConfig)];case 1:return n.sent(),[4,lE(t,e)];case 2:return[2,n.sent().token]}}))}))}(n,t)},delete:function(){return function(t){return It(this,void 0,void 0,(function(){var e,n;return Tt(this,(function(r){switch(r.label){case 0:return[4,oE(e=t.appConfig,(function(t){if(!t||0!==t.registrationStatus)return t}))];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw OT.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw OT.create("app-offline");case 3:return[4,vE(e,n)];case 4:return r.sent(),[4,iE(e)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}(n)},onIdChange:function(t){return gE(n,t)}}}),"PUBLIC")),t.registerVersion("@firebase/installations","0.4.31")}(Ke);var mE,bE,_E=((ZT={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',ZT["only-available-in-window"]="This method is available in a Window context.",ZT["only-available-in-sw"]="This method is available in a service worker context.",ZT["permission-default"]="The notification permission was not granted and dismissed instead.",ZT["permission-blocked"]="The notification permission was not granted and blocked instead.",ZT["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",ZT["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",ZT["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",ZT["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",ZT["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",ZT["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",ZT["token-update-no-token"]="FCM returned no token when updating the user to push.",ZT["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",ZT["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",ZT["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",ZT["invalid-vapid-key"]="The public VAPID key must be a string.",ZT["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",ZT),wE=new Qt("messaging","Messaging",_E),IE="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function TE(t){var e=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,kt([],St(e)))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function EE(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(e),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(bE=mE||(mE={})).PUSH_RECEIVED="push-received",bE.NOTIFICATION_CLICKED="notification-clicked";function SE(t){return It(this,void 0,void 0,(function(){var e,n,r=this;return Tt(this,(function(i){switch(i.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(e=i.sent(),!e.map((function(t){return t.name})).includes("fcm_token_details_db"))return[2,null];i.label=2;case 2:return n=null,[4,PT("fcm_token_details_db",5,(function(e){return It(r,void 0,void 0,(function(){var r,i,o,a;return Tt(this,(function(s){switch(s.label){case 0:return e.oldVersion<2?[2]:e.objectStoreNames.contains("fcm_token_object_Store")?[4,(r=e.transaction.objectStore("fcm_token_object_Store")).index("fcmSenderId").get(t)]:[2];case 1:return i=s.sent(),[4,r.clear()];case 2:if(s.sent(),!i)return[2];if(2===e.oldVersion){if(!(o=i).auth||!o.p256dh||!o.endpoint)return[2];n={token:o.fcmToken,createTime:null!==(a=o.createTime)&&void 0!==a?a:Date.now(),subscriptionOptions:{auth:o.auth,p256dh:o.p256dh,endpoint:o.endpoint,swScope:o.swScope,vapidKey:"string"==typeof o.vapidKey?o.vapidKey:TE(o.vapidKey)}}}else(3===e.oldVersion||4===e.oldVersion)&&(n={token:(o=i).fcmToken,createTime:o.createTime,subscriptionOptions:{auth:TE(o.auth),p256dh:TE(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:TE(o.vapidKey)}});return[2]}}))}))}))];case 3:return i.sent().close(),[4,RT("fcm_token_details_db")];case 4:return i.sent(),[4,RT("fcm_vapid_details_db")];case 5:return i.sent(),[4,RT("undefined")];case 6:return i.sent(),[2,kE(n)?n:null]}}))}))}function kE(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var CE="firebase-messaging-store",NE=null;function AE(){return NE||(NE=PT("firebase-messaging-database",1,(function(t){switch(t.oldVersion){case 0:t.createObjectStore(CE)}}))),NE}function PE(t){return It(this,void 0,void 0,(function(){var e,n,r;return Tt(this,(function(i){switch(i.label){case 0:return e=xE(t),[4,AE()];case 1:return[4,i.sent().transaction(CE).objectStore(CE).get(e)];case 2:return(n=i.sent())?[2,n]:[3,3];case 3:return[4,SE(t.appConfig.senderId)];case 4:return(r=i.sent())?[4,RE(t,r)]:[3,6];case 5:return i.sent(),[2,r];case 6:return[2]}}))}))}function RE(t,e){return It(this,void 0,void 0,(function(){var n,r,i;return Tt(this,(function(o){switch(o.label){case 0:return n=xE(t),[4,AE()];case 1:return r=o.sent(),[4,(i=r.transaction(CE,"readwrite")).objectStore(CE).put(e,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,e]}}))}))}function DE(t){return It(this,void 0,void 0,(function(){var e,n,r;return Tt(this,(function(i){switch(i.label){case 0:return e=xE(t),[4,AE()];case 1:return n=i.sent(),[4,(r=n.transaction(CE,"readwrite")).objectStore(CE).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function xE(t){return t.appConfig.appId}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OE(t,e){return It(this,void 0,void 0,(function(){var n,r,i,o,a,s;return Tt(this,(function(u){switch(u.label){case 0:return[4,UE(t)];case 1:n=u.sent(),r=jE(e),i={method:"POST",headers:n,body:JSON.stringify(r)},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch(FE(t.appConfig),i)];case 3:return[4,u.sent().json()];case 4:return o=u.sent(),[3,6];case 5:throw a=u.sent(),wE.create("token-subscribe-failed",{errorInfo:a});case 6:if(o.error)throw s=o.error.message,wE.create("token-subscribe-failed",{errorInfo:s});if(!o.token)throw wE.create("token-subscribe-no-token");return[2,o.token]}}))}))}function LE(t,e){return It(this,void 0,void 0,(function(){var n,r,i,o,a,s;return Tt(this,(function(u){switch(u.label){case 0:return[4,UE(t)];case 1:n=u.sent(),r=jE(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch(FE(t.appConfig)+"/"+e.token,i)];case 3:return[4,u.sent().json()];case 4:return o=u.sent(),[3,6];case 5:throw a=u.sent(),wE.create("token-update-failed",{errorInfo:a});case 6:if(o.error)throw s=o.error.message,wE.create("token-update-failed",{errorInfo:s});if(!o.token)throw wE.create("token-update-no-token");return[2,o.token]}}))}))}function ME(t,e){return It(this,void 0,void 0,(function(){var n,r,i,o,a;return Tt(this,(function(s){switch(s.label){case 0:return[4,UE(t)];case 1:n=s.sent(),r={method:"DELETE",headers:n},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(FE(t.appConfig)+"/"+e,r)];case 3:return[4,s.sent().json()];case 4:if((i=s.sent()).error)throw o=i.error.message,wE.create("token-unsubscribe-failed",{errorInfo:o});return[3,6];case 5:throw a=s.sent(),wE.create("token-unsubscribe-failed",{errorInfo:a});case 6:return[2]}}))}))}function FE(t){return"https://fcmregistrations.googleapis.com/v1/projects/"+t.projectId+"/registrations"}function UE(t){var e=t.appConfig,n=t.installations;return It(this,void 0,void 0,(function(){var t;return Tt(this,(function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return t=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":"FIS "+t})]}}))}))}function jE(t){var e=t.p256dh,n=t.auth,r=t.endpoint,i=t.vapidKey,o={web:{endpoint:r,auth:n,p256dh:e}};return i!==IE&&(o.web.applicationPubKey=i),o}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qE(t,e,n){return It(this,void 0,void 0,(function(){var r,i,o,a;return Tt(this,(function(s){switch(s.label){case 0:if("granted"!==Notification.permission)throw wE.create("permission-blocked");return[4,WE(e,n)];case 1:return r=s.sent(),[4,PE(t)];case 2:return i=s.sent(),o={vapidKey:n,swScope:e.scope,endpoint:r.endpoint,auth:TE(r.getKey("auth")),p256dh:TE(r.getKey("p256dh"))},i?[3,3]:[2,KE(t,o)];case 3:if(u=i.subscriptionOptions,h=(c=o).vapidKey===u.vapidKey,l=c.endpoint===u.endpoint,f=c.auth===u.auth,p=c.p256dh===u.p256dh,h&&l&&f&&p)return[3,8];s.label=4;case 4:return s.trys.push([4,6,,7]),[4,ME(t,i.token)];case 5:return s.sent(),[3,7];case 6:return a=s.sent(),console.warn(a),[3,7];case 7:return[2,KE(t,o)];case 8:return Date.now()>=i.createTime+6048e5?[2,BE({token:i.token,createTime:Date.now(),subscriptionOptions:o},t,e)]:[2,i.token];case 9:return[2]}var u,c,h,l,f,p;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}))}))}function VE(t,e){return It(this,void 0,void 0,(function(){var n,r;return Tt(this,(function(i){switch(i.label){case 0:return[4,PE(t)];case 1:return(n=i.sent())?[4,ME(t,n.token)]:[3,4];case 2:return i.sent(),[4,DE(t)];case 3:i.sent(),i.label=4;case 4:return[4,e.pushManager.getSubscription()];case 5:return(r=i.sent())?[2,r.unsubscribe()]:[2,!0]}}))}))}function BE(t,e,n){return It(this,void 0,void 0,(function(){var r,i,o;return Tt(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,5]),[4,LE(e,t)];case 1:return r=a.sent(),i=wt(wt({},t),{token:r,createTime:Date.now()}),[4,RE(e,i)];case 2:return a.sent(),[2,r];case 3:return o=a.sent(),[4,VE(e,n)];case 4:throw a.sent(),o;case 5:return[2]}}))}))}function KE(t,e){return It(this,void 0,void 0,(function(){var n,r;return Tt(this,(function(i){switch(i.label){case 0:return[4,OE(t,e)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:e},[4,RE(t,r)];case 2:return i.sent(),[2,r.token]}}))}))}function WE(t,e){return It(this,void 0,void 0,(function(){var n;return Tt(this,(function(r){switch(r.label){case 0:return[4,t.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:EE(e)})]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function HE(t){return"object"==typeof t&&!!t&&"google.c.a.c_id"in t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zE(t){return new Promise((function(e){setTimeout(e,t)}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var GE=function(){function t(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",(function(t){t.waitUntil(e.onPush(t))})),self.addEventListener("pushsubscriptionchange",(function(t){t.waitUntil(e.onSubChange(t))})),self.addEventListener("notificationclick",(function(t){t.waitUntil(e.onNotificationClick(t))}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!=typeof t)throw wE.create("invalid-bg-handler");this.bgMessageHandler=t},t.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},t.prototype.getToken=function(){var t,e;return It(this,void 0,void 0,(function(){var n;return Tt(this,(function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,PE(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(e=null===(t=null==n?void 0:n.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==e?e:IE,r.label=2;case 2:return[2,qE(this.firebaseDependencies,self.registration,this.vapidKey)]}}))}))},t.prototype.deleteToken=function(){return VE(this.firebaseDependencies,self.registration)},t.prototype.requestPermission=function(){throw wE.create("only-available-in-window")},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw wE.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw wE.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(){throw wE.create("only-available-in-window")},t.prototype.onMessage=function(){throw wE.create("only-available-in-window")},t.prototype.onTokenRefresh=function(){throw wE.create("only-available-in-window")},t.prototype.onPush=function(t){return It(this,void 0,void 0,(function(){var e,n,r,i;return Tt(this,(function(o){switch(o.label){case 0:return(e=function(t){var e=t.data;if(!e)return null;try{return e.json()}catch(n){return null}}(t))?[4,XE()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return function(t){return t.some((function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")}))}(n=o.sent())?[2,YE(n,e)]:(r=!1,e.notification?[4,JE(QE(e))]:[3,3]);case 2:o.sent(),r=!0,o.label=3;case 3:return!0===r&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(i=function(t){var e={from:t.from,collapseKey:t.collapse_key};return function(t,e){if(e.notification){t.notification={};var n=e.notification.title;n&&(t.notification.title=n);var r=e.notification.body;r&&(t.notification.body=r);var i=e.notification.image;i&&(t.notification.image=i)}}(e,t),function(t,e){e.data&&(t.data=e.data)}(e,t),function(t,e){if(e.fcmOptions){t.fcmOptions={};var n=e.fcmOptions.link;n&&(t.fcmOptions.link=n);var r=e.fcmOptions.analytics_label;r&&(t.fcmOptions.analyticsLabel=r)}}(e,t),e}(e),"function"==typeof this.bgMessageHandler?this.bgMessageHandler(i):this.bgMessageHandler.next(i)),[4,zE(1e3)]);case 4:return o.sent(),[2]}}))}))},t.prototype.onSubChange=function(t){var e,n;return It(this,void 0,void 0,(function(){var r;return Tt(this,(function(i){switch(i.label){case 0:return t.newSubscription?[3,2]:[4,VE(this.firebaseDependencies,self.registration)];case 1:return i.sent(),[2];case 2:return[4,PE(this.firebaseDependencies)];case 3:return r=i.sent(),[4,VE(this.firebaseDependencies,self.registration)];case 4:return i.sent(),[4,qE(this.firebaseDependencies,self.registration,null!==(n=null===(e=null==r?void 0:r.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==n?n:IE)];case 5:return i.sent(),[2]}}))}))},t.prototype.onNotificationClick=function(t){var e,n;return It(this,void 0,void 0,(function(){var r,i,o,a,s;return Tt(this,(function(u){switch(u.label){case 0:return(r=null===(n=null===(e=t.notification)||void 0===e?void 0:e.data)||void 0===n?void 0:n.FCM_MSG)?t.action?[2]:(t.stopImmediatePropagation(),t.notification.close(),(i=function(t){var e,n,r,i=null!==(n=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==n?n:null===(r=t.notification)||void 0===r?void 0:r.click_action;if(i)return i;return HE(t.data)?self.location.origin:null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(r))?(o=new URL(i,self.location.href),a=new URL(self.location.origin),o.host!==a.host?[2]:[4,$E(o)]):[2]):[2];case 1:return(s=u.sent())?[3,4]:[4,self.clients.openWindow(i)];case 2:return s=u.sent(),[4,zE(3e3)];case 3:return u.sent(),[3,6];case 4:return[4,s.focus()];case 5:s=u.sent(),u.label=6;case 6:return s?(r.messageType=mE.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,s.postMessage(r)]):[2]}}))}))},t}();function QE(t){var e,n=wt({},t.notification);return n.data=((e={}).FCM_MSG=t,e),n}function $E(t){return It(this,void 0,void 0,(function(){var e,n,r,i,o,a,s;return Tt(this,(function(u){switch(u.label){case 0:return[4,XE()];case 1:e=u.sent();try{for(n=Et(e),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),t.host===o.host)return[2,i]}catch(c){a={error:c}}finally{try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(a)throw a.error}}return[2,null]}}))}))}function YE(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=mE.PUSH_RECEIVED;try{for(var i=Et(t),o=i.next();!o.done;o=i.next()){o.value.postMessage(e)}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function XE(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function JE(t){var e,n=t.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(e=t.title)&&void 0!==e?e:"",t)}var ZE=function(){function t(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",(function(t){return e.messageEventListener(t)}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.messageEventListener=function(t){return It(this,void 0,void 0,(function(){var e,n;return Tt(this,(function(r){switch(r.label){case 0:return(e=t.data).isFirebaseMessaging?(this.onMessageCallback&&e.messageType===mE.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback(function(t){return delete t.messageType,delete t.isFirebaseMessaging,t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(Object.assign({},e))):this.onMessageCallback.next(Object.assign({},e))),HE(n=e.data)&&"1"===n["google.c.a.e"]?[4,this.logEvent(e.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.getVapidKey=function(){return this.vapidKey},t.prototype.getSwReg=function(){return this.swRegistration},t.prototype.getToken=function(t){return It(this,void 0,void 0,(function(){return Tt(this,(function(e){switch(e.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:e.sent(),e.label=2;case 2:if("granted"!==Notification.permission)throw wE.create("permission-blocked");return[4,this.updateVapidKey(null==t?void 0:t.vapidKey)];case 3:return e.sent(),[4,this.updateSwReg(null==t?void 0:t.serviceWorkerRegistration)];case 4:return e.sent(),[2,qE(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}}))}))},t.prototype.updateVapidKey=function(t){return It(this,void 0,void 0,(function(){return Tt(this,(function(e){return t?this.vapidKey=t:this.vapidKey||(this.vapidKey=IE),[2]}))}))},t.prototype.updateSwReg=function(t){return It(this,void 0,void 0,(function(){return Tt(this,(function(e){switch(e.label){case 0:return t||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:if(!t&&this.swRegistration)return[2];if(!(t instanceof ServiceWorkerRegistration))throw wE.create("invalid-sw-registration");return this.swRegistration=t,[2]}}))}))},t.prototype.registerDefaultSw=function(){return It(this,void 0,void 0,(function(){var t,e;return Tt(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return t.swRegistration=n.sent(),this.swRegistration.update().catch((function(){})),[3,3];case 2:throw e=n.sent(),wE.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 3:return[2]}}))}))},t.prototype.deleteToken=function(){return It(this,void 0,void 0,(function(){return Tt(this,(function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,VE(this.firebaseDependencies,this.swRegistration)]}}))}))},t.prototype.requestPermission=function(){return It(this,void 0,void 0,(function(){var t;return Tt(this,(function(e){switch(e.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(t=e.sent()))return[2];throw"denied"===t?wE.create("permission-blocked"):wE.create("permission-default")}}))}))},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw wE.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw wE.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw wE.create("invalid-sw-registration");if(this.swRegistration)throw wE.create("use-sw-after-get-token");this.swRegistration=t},t.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},t.prototype.setBackgroundMessageHandler=function(){throw wE.create("only-available-in-sw")},t.prototype.onBackgroundMessage=function(){throw wE.create("only-available-in-sw")},t.prototype.onTokenRefresh=function(){return function(){}},t.prototype.logEvent=function(t,e){return It(this,void 0,void 0,(function(){var n;return Tt(this,(function(r){switch(r.label){case 0:return n=function(t){switch(t){case mE.NOTIFICATION_CLICKED:return"notification_open";case mE.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r.sent().logEvent(n,{message_id:e["google.c.a.c_id"],message_name:e["google.c.a.c_l"],message_time:e["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}}))}))},t}();function tS(t){return wE.create("missing-app-config-values",{valueName:t})}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eS={isSupported:nS};function nS(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}Ke.INTERNAL.registerComponent(new ve("messaging",(function(t){var e=t.getProvider("app").getImmediate(),n={app:e,appConfig:function(t){var e,n;if(!t||!t.options)throw tS("App Configuration Object");if(!t.name)throw tS("App Name");var r=t.options;try{for(var i=Et(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var a=o.value;if(!r[a])throw tS(a)}}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!nS())throw wE.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new GE(n):new ZE(n)}),"PUBLIC").setServiceProps(eS));
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var rS=function(t){function e(n,r){var i=t.call(this,iS(n),"Firebase Storage: "+r+" ("+iS(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,e.prototype),i}return _t(e,t),e.prototype._codeEquals=function(t){return iS(t)===this.code},Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=this._baseMessage+"\n"+this.customData.serverResponse:this.message=this._baseMessage},enumerable:!1,configurable:!0}),e}(Gt);function iS(t){return"storage/"+t}function oS(){return new rS("unknown","An unknown error occurred, please check the error payload for server response.")}function aS(){return new rS("canceled","User canceled the upload/download.")}function sS(){return new rS("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function uS(t){return new rS("invalid-argument",t)}function cS(){return new rS("app-deleted","The Firebase app was deleted.")}function hS(t){return new rS("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function lS(t,e){return new rS("invalid-format","String does not match format '"+t+"': "+e)}function fS(t){throw new rS("internal-error","Internal error: "+t)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var pS={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},dS=function(t,e){this.data=t,this.contentType=e||null};function vS(t,e){switch(t){case pS.RAW:return new dS(gS(e));case pS.BASE64:case pS.BASE64URL:return new dS(yS(t,e));case pS.DATA_URL:return new dS((n=new mS(e)).base64?yS(pS.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(aT){throw lS(pS.DATA_URL,"Malformed data URL.")}return gS(e)}(n.rest),function(t){return new mS(t).contentType}(e))}var n;throw oS()}function gS(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function yS(t,e){switch(t){case pS.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw lS(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case pS.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw lS(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(e)}catch(aT){throw lS(t,"Invalid character found")}for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);return s}var mS=function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw lS(pS.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=e[1]||null;null!=n&&(this.base64=(r=n,i=";base64",r.length>=i.length&&r.substring(r.length-i.length)===i),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=t.substring(t.indexOf(",")+1);var r,i;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */};var bS,_S,wS={STATE_CHANGED:"state_changed"},IS={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function TS(t){switch(t){case"running":case"pausing":case"canceling":return IS.RUNNING;case"paused":return IS.PAUSED;case"success":return IS.SUCCESS;case"canceled":return IS.CANCELED;case"error":default:return IS.ERROR}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(_S=bS||(bS={}))[_S.NO_ERROR=0]="NO_ERROR",_S[_S.NETWORK_ERROR=1]="NETWORK_ERROR",_S[_S.ABORT=2]="ABORT";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ES=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=bS.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=bS.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=bS.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw fS("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw fS("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw fS("cannot .getStatus() before sending");try{return this.xhr_.status}catch(aT){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw fS("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var SS=function(){function t(){}return t.prototype.createConnection=function(){return new ES},t}(),kS=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e,n){var r;try{r=t.makeFromUrl(e,n)}catch(aT){return new t(e,"")}if(""===r.path)return r;throw new rS("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var o=new RegExp("^gs://"+i+"(/(.*))?$","i");function a(t){t.path_=decodeURIComponent(t.path)}for(var s=n.replace(/[.]/g,"\\."),u=[{regex:o,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+s+"/v[A-Za-z0-9_]+/b/"+i+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:a},{regex:new RegExp("^https?://"+("firebasestorage.googleapis.com"===n?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/"+i+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:a}],c=0;c<u.length;c++){var h=u[c],l=h.regex.exec(e);if(l){var f=l[h.indices.bucket],p=l[h.indices.path];p||(p=""),r=new t(f,p),h.postModify(r);break}}if(null==r)throw function(t){return new rS("invalid-url","Invalid URL '"+t+"'.")}(e);return r},t}(),CS=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NS(t){return"string"==typeof t||t instanceof String}function AS(t){return PS()&&t instanceof Blob}function PS(){return"undefined"!=typeof Blob}function RS(t,e,n,r){if(r<e)throw uS("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw uS("Invalid value for '"+t+"'. Expected "+n+" or less.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DS(t,e){var n=e.match(/^(\w+):\/\/.+/),r=e;return null==(null==n?void 0:n[1])&&(r="https://"+e),r+"/v0"+t}function xS(t){var e=encodeURIComponent,n="?";for(var r in t){if(t.hasOwnProperty(r))n=n+(e(r)+"="+e(t[r]))+"&"}return n=n.slice(0,-1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var OS=function(){function t(t,e,n,r,i,o,a,s,u,c,h){var l=this;this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=h,this.promise_=new Promise((function(t,e){l.resolve_=t,l.reject_=e,l.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,a=n.connection;if(n.wasSuccessCode)try{var s=t.callback_(a,a.getResponseText());void 0!==s?i(s):i()}catch(aT){o(aT)}else null!==a?((r=oS()).serverResponse=a.getResponseText(),t.errorCallback_?o(t.errorCallback_(a,r)):o(r)):n.canceled?o(r=t.appDelete_?cS():aS()):o(r=new rS("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new LS(!1,null,!0)):this.backoffId_=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t,e,n){var r=1,i=null,o=!1,a=0;function s(){return 2===a}var u=!1;function c(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];u||(u=!0,e.apply(null,t))}function h(e){i=setTimeout((function(){i=null,t(l,s())}),e)}function l(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!u)if(t)c.call.apply(c,kt([null,t],e));else{var i;s()||o?c.call.apply(c,kt([null,t],e)):(r<64&&(r*=2),1===a?(a=2,i=0):i=1e3*(r+Math.random()),h(i))}}var f=!1;function p(t){f||(f=!0,u||(null!==i?(t||(a=2),clearTimeout(i),h(0)):t||(a=1)))}return h(0),setTimeout((function(){o=!0,p(!0)}),n),p}((function(e,n){if(n)e(!1,new LS(!1,null,!0));else{var r=t.pool_.createConnection();t.pendingConnection_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(){null!==t.progressCallback_&&r.removeUploadProgressListener(i),t.pendingConnection_=null;var n=r.getErrorCode()===bS.NO_ERROR,o=r.getStatus();if(n&&!t.isRetryStatusCode_(o)){var a=-1!==t.successCodes_.indexOf(o);e(!0,new LS(a,r))}else{var s=r.getErrorCode()===bS.ABORT;e(!1,new LS(!1,null,s))}}))}function i(e){var n=e.loaded,r=e.lengthComputable?e.total:-1;null!==t.progressCallback_&&t.progressCallback_(n,r)}}),e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function(t){t(!1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),LS=function(t,e,n){this.wasSuccessCode=t,this.connection=e,this.canceled=!!n};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function MS(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function FS(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=MS();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(PS())return new Blob(t);throw new rS("unsupported-environment","This browser doesn't seem to support creating Blobs")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var US=function(){function t(t,e){var n=0,r="";AS(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(AS(this.data_)){var r=this.data_,i=(a=e,s=n,(o=r).webkitSlice?o.webkitSlice(a,s):o.mozSlice?o.mozSlice(a,s):o.slice?o.slice(a,s):null);return null===i?null:new t(i)}var o,a,s;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(PS()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t(FS.apply(null,r))}var i=e.map((function(t){return NS(t)?vS(pS.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var a=new Uint8Array(o),s=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)a[s++]=t[e]})),new t(a,!0)},t.prototype.uploadData=function(){return this.data_},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jS(t){var e,n;try{e=JSON.parse(t)}catch(aT){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qS(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(t,e){return e}var BS=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||VS},KS=null;function WS(){if(KS)return KS;var t=[];t.push(new BS("bucket")),t.push(new BS("generation")),t.push(new BS("metageneration")),t.push(new BS("name","fullPath",!0));var e=new BS("name");e.xform=function(t,e){return function(t){return!NS(t)||t.length<2?t:qS(t)}(e)},t.push(e);var n=new BS("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new BS("timeCreated")),t.push(new BS("updated")),t.push(new BS("md5Hash",null,!0)),t.push(new BS("cacheControl",null,!0)),t.push(new BS("contentDisposition",null,!0)),t.push(new BS("contentEncoding",null,!0)),t.push(new BS("contentLanguage",null,!0)),t.push(new BS("contentType",null,!0)),t.push(new BS("metadata","customMetadata",!0)),KS=t}function HS(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,e[a.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=t.bucket,r=t.fullPath,i=new kS(n,r);return e._makeStorageReference(i)}})}(r,t),r}function zS(t,e,n){var r=jS(e);return null===r?null:HS(t,r,n)}function GS(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QS(t,e,n){var r=jS(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var a=o[i].replace(/\/$/,""),s=t._makeStorageReference(new kS(e,a));r.prefixes.push(s)}if(n.items)for(var u=0,c=n.items;u<c.length;u++){var h=c[u];s=t._makeStorageReference(new kS(e,h.name)),r.items.push(s)}return r}(t,e,r)}var $S=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YS(t){if(!t)throw oS()}function XS(t,e){return function(n,r){var i=zS(t,r,e);return YS(null!==i),i}}function JS(t,e){return function(n,r){var i=zS(t,r,e);return YS(null!==i),function(t,e,n){var r=jS(e);if(null===r)return null;if(!NS(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map((function(e){var r=t.bucket,i=t.fullPath;return DS("/b/"+o(r)+"/o/"+o(i),n)+xS({alt:"media",token:e})}))[0]}(i,r,t.host)}}function ZS(t){return function(e,n){var r,i,o;return 401===e.getStatus()?r=e.getResponseText().includes("Firebase App Check token is invalid")?new rS("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new rS("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?(o=t.bucket,r=new rS("quota-exceeded","Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===e.getStatus()?(i=t.path,r=new rS("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function tk(t){var e=ZS(t);return function(n,r){var i,o=e(n,r);return 404===n.getStatus()&&(i=t.path,o=new rS("object-not-found","Object '"+i+"' does not exist.")),o.serverResponse=r.serverResponse,o}}function ek(t,e,n){var r=DS(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new $S(r,"GET",XS(t,n),i);return o.errorHandler=tk(e),o}function nk(t,e,n,r,i){var o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var a=DS(e.bucketOnlyServerUrl(),t.host),s=t.maxOperationRetryTime,u=new $S(a,"GET",function(t,e){return function(n,r){var i=QS(t,e,r);return YS(null!==i),i}}(t,e.bucket),s);return u.urlParams=o,u.errorHandler=ZS(e),u}function rk(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}var ik=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function ok(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(aT){YS(!1)}return YS(!!n&&-1!==(e||["active"]).indexOf(n)),n}function ak(t,e,n,r,i,o,a,s){var u=new ik(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new rS("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,h=c;i>0&&(h=Math.min(h,i));var l=u.current,f=l+h,p={"X-Goog-Upload-Command":h===c?"upload, finalize":"upload","X-Goog-Upload-Offset":""+u.current},d=r.slice(l,f);if(null===d)throw sS();var v=e.maxUploadRetryTime,g=new $S(n,"POST",(function(t,n){var i,a=ok(t,["active","final"]),s=u.current+h,c=r.size();return i="final"===a?XS(e,o)(t,n):null,new ik(s,c,"final"===a,i)}),v);return g.headers=p,g.body=d.uploadData(),g.progressCallback=s||null,g.errorHandler=ZS(t),g}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sk=function(t,e,n){if("function"==typeof t||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uk(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ck=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=WS(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise((function(t,e){r._resolve=t,r._reject=e,r._start()})),this._promise.then(null,(function(){}))}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=n[0],i=n[1];switch(e._state){case"running":t(r,i);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}}))},t.prototype._createResumable=function(){var t=this;this._resolveToken((function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a=rk(e,r,i),s={name:a.fullPath},u=DS(o,t.host),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":""+r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},h=GS(a,n),l=t.maxUploadRetryTime,f=new $S(u,"POST",(function(t){var e;ok(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(aT){YS(!1)}return YS(NS(e)),e}),l);return f.urlParams=s,f.headers=c,f.body=h,f.errorHandler=ZS(e),f}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()}),t._errorHandler)}))},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken((function(n,r){var i=function(t,e,n,r){var i=t.maxUploadRetryTime,o=new $S(n,"POST",(function(t){var e=ok(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(aT){YS(!1)}n||YS(!1);var i=Number(n);return YS(!isNaN(i)),new ik(i,r.size(),"final"===e)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=ZS(e),o}(t._ref.storage,t._ref._location,e,t._blob),o=t._ref.storage._makeRequest(i,n,r);t._request=o,o.getPromise().then((function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()}),t._errorHandler)}))},t.prototype._continueUpload=function(){var t=this,e=262144*this._chunkMultiplier,n=new ik(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,o){var a;try{a=ak(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(aT){return t._error=aT,void t._transition("error")}var s=t._ref.storage._makeRequest(a,i,o);t._request=s,s.getPromise().then((function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()}),t._errorHandler)}))},t.prototype._increaseMultiplier=function(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken((function(e,n){var r=ek(t._ref.storage,t._ref._location,t._mappings),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._transition("success")}),t._metadataErrorHandler)}))},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken((function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();a["Content-Type"]="multipart/related; boundary="+s;var u=rk(e,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+GS(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",h="\r\n--"+s+"--",l=US.getBlob(c,r,h);if(null===l)throw sS();var f={name:u.fullPath},p=DS(o,t.host),d=t.maxUploadRetryTime,v=new $S(p,"POST",XS(t,n),d);return v.urlParams=f,v.headers=a,v.body=l.uploadData(),v.errorHandler=ZS(e),v}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")}),t._errorHandler)}))},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=aS(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=TS(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new sk(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach((function(e){t._notifyObserver(e)}))},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(TS(this._state)){case IS.SUCCESS:uk(this._resolve.bind(null,this.snapshot))();break;case IS.CANCELED:case IS.ERROR:uk(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(TS(this._state)){case IS.RUNNING:case IS.PAUSED:t.next&&uk(t.next.bind(t,this.snapshot))();break;case IS.SUCCESS:t.complete&&uk(t.complete.bind(t))();break;case IS.CANCELED:case IS.ERROR:t.error&&uk(t.error.bind(t,this._error))();break;default:t.error&&uk(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),hk=function(){function t(t,e){this._service=t,this._location=e instanceof kS?e:kS.makeFromUrl(e,t.host)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new kS(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return qS(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new kS(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw hS(t)},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lk(t){var e={prefixes:[],items:[]};return fk(t,e).then((function(){return e}))}function fk(t,e,n){return It(this,void 0,void 0,(function(){var r,i,o;return Tt(this,(function(a){switch(a.label){case 0:return[4,pk(t,{pageToken:n})];case 1:return r=a.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,fk(t,e,r.nextPageToken)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function pk(t,e){return It(this,void 0,void 0,(function(){var n,r;return Tt(this,(function(i){switch(i.label){case 0:return null!=e&&"number"==typeof e.maxResults&&RS("options.maxResults",1,1e3,e.maxResults),n=e||{},r=nk(t.storage,t._location,"/",n.pageToken,n.maxResults),[4,t.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}}))}))}function dk(t,e){return It(this,void 0,void 0,(function(){var n;return Tt(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("updateMetadata"),n=function(t,e,n,r){var i=DS(e.fullServerUrl(),t.host),o=GS(n,r),a=t.maxOperationRetryTime,s=new $S(i,"PATCH",XS(t,r),a);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=o,s.errorHandler=tk(e),s}(t.storage,t._location,e,WS()),[4,t.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}}))}))}function vk(t){return It(this,void 0,void 0,(function(){var e;return Tt(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getDownloadURL"),e=function(t,e,n){var r=DS(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new $S(r,"GET",JS(t,n),i);return o.errorHandler=tk(e),o}(t.storage,t._location,WS()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise().then((function(t){if(null===t)throw new rS("no-download-url","The given file does not have any download URLs.");return t}))]}}))}))}function gk(t){return It(this,void 0,void 0,(function(){var e;return Tt(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("deleteObject"),e=function(t,e){var n=DS(e.fullServerUrl(),t.host),r=t.maxOperationRetryTime,i=new $S(n,"DELETE",(function(t,e){}),r);return i.successCodes=[200,204],i.errorHandler=tk(e),i}(t.storage,t._location),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}}))}))}function yk(t,e){var n=function(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new kS(t._location.bucket,n);return new hk(t.storage,r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mk(t){return/^[A-Za-z]+:\/\//.test(t)}function bk(t,e){if(t instanceof Ik){var n=t;if(null==n._bucket)throw new rS("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new hk(n,n._bucket);return null!=e?bk(r,e):r}if(void 0!==e){if(e.includes(".."))throw uS('`path` param cannot contain ".."');return yk(t,e)}return t}function _k(t,e){if(e&&mk(e)){if(t instanceof Ik)return new hk(t,e);throw uS("To use ref(service, url), the first argument must be a Storage instance.")}return bk(t,e)}function wk(t,e){var n=null==e?void 0:e.storageBucket;return null==n?null:kS.makeFromBucketSpec(n,t)}var Ik=function(){function t(t,e,n,r,i,o){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host="firebasestorage.googleapis.com",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?kS.makeFromBucketSpec(i,this._host):wk(this._host,this.app.options)}return Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,null!=this._url?this._bucket=kS.makeFromBucketSpec(this._url,t):this._bucket=wk(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){RS("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){RS("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return It(this,void 0,void 0,(function(){var t,e;return Tt(this,(function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}}))}))},t.prototype._getAppCheckToken=function(){return It(this,void 0,void 0,(function(){var t;return Tt(this,(function(e){switch(e.label){case 0:return(t=this._appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}}))}))},t.prototype._delete=function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(t){return t.cancel()})),this._requests.clear()),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new hk(this,t)},t.prototype._makeRequest=function(t,e,n){var r=this;if(this._deleted)return new CS(cS());var i=function(t,e,n,r,i,o){var a=xS(t.urlParams),s=t.url+a,u=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(u,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(u,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(u,o),function(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(u,r),new OS(s,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i)}(t,this._appId,e,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then((function(){return r._requests.delete(i)}),(function(){return r._requests.delete(i)})),i},t.prototype.makeRequestWithTokens=function(t){return It(this,void 0,void 0,(function(){var e,n,r;return Tt(this,(function(i){switch(i.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return e=i.sent(),n=e[0],r=e[1],[2,this._makeRequest(t,n,r)]}}))}))},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tk(t,e,n){return function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new ck(t,new US(e),n)}(t=de(t),e,n)}function Ek(t){return function(t){return It(this,void 0,void 0,(function(){var e;return Tt(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getMetadata"),e=ek(t.storage,t._location,WS()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}}))}))}(t=de(t))}function Sk(t,e){return _k(t=de(t),e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var kk=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),Ck=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new kk(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then((function(e){if(t)return t(new kk(e,n,n._ref))}),e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new kk(t,i,i._ref))}:{next:e.next?function(t){return e.next(new kk(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),Nk=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map((function(e){return new Ak(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map((function(e){return new Ak(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),Ak=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(function(t,e){return yk(t,e)}(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new Ck(Tk(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=pS.RAW),this._throwIfRoot("putString");var r=vS(e,t),i=wt({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new Ck(new ck(this._delegate,new US(r.data,!0),i),this)},t.prototype.listAll=function(){var t,e=this;return(t=this._delegate,lk(t=de(t))).then((function(t){return new Nk(t,e.storage)}))},t.prototype.list=function(t){var e=this;return function(t,e){return pk(t=de(t),e)}(this._delegate,t||void 0).then((function(t){return new Nk(t,e.storage)}))},t.prototype.getMetadata=function(){return Ek(this._delegate)},t.prototype.updateMetadata=function(t){return function(t,e){return dk(t=de(t),e)}(this._delegate,t)},t.prototype.getDownloadURL=function(){return vk(de(this._delegate))},t.prototype.delete=function(){return this._throwIfRoot("delete"),gk(de(this._delegate))},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw hS(t)},t}(),Pk=function(){function t(t,e){this.app=t,this._delegate=e}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(mk(t))throw uS("ref() expected a child path but got a URL, use refFromURL instead.");return new Ak(Sk(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!mk(t))throw uS("refFromURL() expected a full URL but got a child path, use ref() instead.");try{kS.makeFromUrl(t,this._delegate.host)}catch(aT){throw uS("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ak(Sk(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t.prototype.useEmulator=function(t,e){!function(t,e,n){!function(t,e,n){t.host="http://"+e+":"+n}(t,e,n)}(this._delegate,t,e)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rk(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new Pk(r,new Ik(r,i,o,new SS,n,Ke.SDK_VERSION))}!function(t){var e={TaskState:IS,TaskEvent:wS,StringFormat:pS,Storage:Ik,Reference:Ak};t.INTERNAL.registerComponent(new ve("storage",Rk,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage","0.6.2")}(Ke);var Dk,xk,Ok,Lk=((Dk={})["trace started"]="Trace {$traceName} was started before.",Dk["trace stopped"]="Trace {$traceName} is not running.",Dk["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",Dk["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",Dk["no window"]="Window is not available.",Dk["no app id"]="App id is not available.",Dk["no project id"]="Project id is not available.",Dk["no api key"]="Api key is not available.",Dk["invalid cc log"]="Attempted to queue invalid cc event",Dk["FB not default"]="Performance can only start when Firebase app instance is the default one.",Dk["RC response not ok"]="RC response is not ok",Dk["invalid attribute name"]="Attribute name {$attributeName} is invalid.",Dk["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",Dk["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",Dk["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",Dk),Mk=new Qt("performance","Performance",Lk),Fk=new Ne("Performance");Fk.logLevel=_e.INFO;var Uk,jk=function(){function t(t){if(this.window=t,!t)throw Mk.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return t.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},t.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},t.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},t.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},t.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},t.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},t.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!Wt()||(Fk.info("IndexedDB is not supported by current browswer"),!1):(Fk.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},t.prototype.setupObserver=function(t,e){this.PerformanceObserver&&new this.PerformanceObserver((function(t){for(var n=0,r=t.getEntries();n<r.length;n++){var i=r[n];e(i)}})).observe({entryTypes:[t]})},t.getInstance=function(){return void 0===xk&&(xk=new t(Ok)),xk},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function qk(t,e){var n=t.length-e.length;if(n<0||n>1)throw Mk.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vk,Bk,Kk,Wk=function(){function t(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=qk("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=qk("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return t.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw Mk.create("no app id");return t},t.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw Mk.create("no project id");return t},t.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw Mk.create("no api key");return t},t.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},t.getInstance=function(){return void 0===Uk&&(Uk=new t),Uk},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hk(){return Vk}(Kk=Bk||(Bk={}))[Kk.UNKNOWN=0]="UNKNOWN",Kk[Kk.VISIBLE=1]="VISIBLE",Kk[Kk.HIDDEN=2]="HIDDEN";var zk=["firebase_","google_","ga_"],Gk=new RegExp("^[a-zA-Z]\\w*$");function Qk(){switch(jk.getInstance().document.visibilityState){case"visible":return Bk.VISIBLE;case"hidden":return Bk.HIDDEN;default:return Bk.UNKNOWN}}function $k(){var t=jk.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Yk=!0;function Xk(t){var e=function(){var t=jk.getInstance().localStorage;if(!t)return;var e=t.getItem("@firebase/performance/configexpire");if(!(e&&(n=e,Number(n)>Date.now())))return;var n;var r=t.getItem("@firebase/performance/config");if(!r)return;try{return JSON.parse(r)}catch(i){return}}();return e?(Jk(e),Promise.resolve()):function(t){return(e=Wk.getInstance().installationsService.getToken(),e.then((function(t){})),e).then((function(e){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+Wk.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+Wk.getInstance().getApiKey(),r=new Request(n,{method:"POST",headers:{Authorization:"FIREBASE_INSTALLATIONS_AUTH "+e},body:JSON.stringify({app_instance_id:t,app_instance_id_token:e,app_id:Wk.getInstance().getAppId(),app_version:"0.4.17",sdk_version:"0.0.1"})});return fetch(r).then((function(t){if(t.ok)return t.json();throw Mk.create("RC response not ok")}))})).catch((function(){Fk.info("Could not fetch config, will use default configs")}));var e;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}(t).then(Jk).then((function(t){return function(t){var e=jk.getInstance().localStorage;if(!t||!e)return;e.setItem("@firebase/performance/config",JSON.stringify(t)),e.setItem("@firebase/performance/configexpire",String(Date.now()+60*Wk.getInstance().configTimeToLive*60*1e3))}(t)}),(function(){}))}function Jk(t){if(!t)return t;var e=Wk.getInstance(),n=t.entries||{};return void 0!==n.fpr_enabled?e.loggingEnabled="true"===String(n.fpr_enabled):e.loggingEnabled=Yk,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=Zk(e.tracesSamplingRate),e.logNetworkAfterSampling=Zk(e.networkRequestsSamplingRate),t}function Zk(t){return Math.random()<=t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tC,eC=1;function nC(){var t;return eC=2,tC=tC||(t=jk.getInstance().document,new Promise((function(e){if(t&&"complete"!==t.readyState){var n=function(){"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()}))).then((function(){return(t=Wk.getInstance().installationsService.getId()).then((function(t){Vk=t})),t;var t})).then((function(t){return Xk(t)})).then((function(){return rC()}),(function(){return rC()}))}function rC(){eC=3}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var iC,oC=3,aC=[],sC=!1;function uC(t){setTimeout((function(){var t,e;if(0!==oC)return aC.length?(t=aC.splice(0,1e3),e=t.map((function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}})),void function(t,e){return function(t){var e=Wk.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}(t).then((function(t){return t.ok||Fk.info("Call to Firebase backend failed."),t.json()})).then((function(t){var n=Number(t.nextRequestWaitMillis),r=1e4;isNaN(n)||(r=Math.max(n,r));var i=t.logResponseDetails;Array.isArray(i)&&i.length>0&&"RETRY_REQUEST_LATER"===i[0].responseAction&&(aC=kt(kt([],e),aC),Fk.info("Retry transport request later.")),oC=3,uC(r)}))}({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:Wk.getInstance().logSource,log_event:e},t).catch((function(){aC=kt(kt([],t),aC),oC--,Fk.info("Tries left: "+oC+"."),uC(1e4)}))):uC(1e4)}),t)}function cC(t){if(!t.eventTime||!t.message)throw Mk.create("invalid cc log");aC=kt(kt([],aC),[t])}function hC(t,e){var n;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */iC||(n=pC,iC=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];cC({message:n.apply(void 0,t),eventTime:Date.now()})}),iC(t,e)}function lC(t){var e=Wk.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&jk.getInstance().requiredApisAvailable()&&(t.isAuto&&Qk()!==Bk.VISIBLE||(3===eC?fC(t):nC().then((function(){return fC(t)}),(function(){return fC(t)}))))}function fC(t){if(Hk()){var e=Wk.getInstance();e.loggingEnabled&&e.logTraceAfterSampling&&setTimeout((function(){return hC(t,1)}),0)}}function pC(t,e){return 0===e?(r={url:(n=t).url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},i={application_info:dC(),network_request_metric:r},JSON.stringify(i)):function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);var r={application_info:dC(),trace_metric:e};return JSON.stringify(r)}(t);var n,r,i}function dC(){return{google_app_id:Wk.getInstance().getAppId(),app_instance_id:Hk(),web_app_info:{sdk_version:"0.4.17",page_url:jk.getInstance().getUrl(),service_worker_status:(t=jk.getInstance().navigator,"serviceWorker"in t?t.serviceWorker.controller?2:3:1),visibility_state:Qk(),effective_connection_type:$k()},application_process_state:0};var t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vC=["_fp","_fcp","_fid"];
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var gC=function(){function t(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=jk.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||"FB-PERF-TRACE-MEASURE-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return t.prototype.start=function(){if(1!==this.state)throw Mk.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},t.prototype.stop=function(){if(2!==this.state)throw Mk.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),lC(this)},t.prototype.record=function(t,e,n){if(t<=0)throw Mk.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw Mk.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=wt({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}lC(this)},t.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]?this.putMetric(t,e):this.putMetric(t,this.counters[t]+e)},t.prototype.putMetric=function(t,e){if(i=t,o=this.name,0===i.length||i.length>100||!(o&&o.startsWith("_wt_")&&vC.indexOf(i)>-1)&&i.startsWith("_"))throw Mk.create("invalid custom metric name",{customMetricName:t});var n,r,i,o;this.counters[t]=(n=e,(r=Math.floor(n))<n&&Fk.info("Metric value should be an Integer, setting the value as : "+r+"."),r)},t.prototype.getMetric=function(t){return this.counters[t]||0},t.prototype.putAttribute=function(t,e){var n,r=!(0===(n=t).length||n.length>40||zk.some((function(t){return n.startsWith(t)}))||!n.match(Gk)),i=function(t){return 0!==t.length&&t.length<=100}(e);if(r&&i)this.customAttributes[t]=e;else{if(!r)throw Mk.create("invalid attribute name",{attributeName:t});if(!i)throw Mk.create("invalid attribute value",{attributeValue:e})}},t.prototype.getAttribute=function(t){return this.customAttributes[t]},t.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},t.prototype.getAttributes=function(){return wt({},this.customAttributes)},t.prototype.setStartTime=function(t){this.startTimeUs=t},t.prototype.setDuration=function(t){this.durationUs=t},t.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},t.createOobTrace=function(e,n,r){var i=jk.getInstance().getUrl();if(i){var o=new t("_wt_"+i,!0),a=Math.floor(1e3*jk.getInstance().getTimeOrigin());o.setStartTime(a),e&&e[0]&&(o.setDuration(Math.floor(1e3*e[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd)));if(n){var s=n.find((function(t){return"first-paint"===t.name}));s&&s.startTime&&o.putMetric("_fp",Math.floor(1e3*s.startTime));var u=n.find((function(t){return"first-contentful-paint"===t.name}));u&&u.startTime&&o.putMetric("_fcp",Math.floor(1e3*u.startTime)),r&&o.putMetric("_fid",Math.floor(1e3*r))}lC(o)}},t.createUserTimingTrace=function(e){lC(new t(e,!1,e))},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yC(t){var e=t;if(e&&void 0!==e.responseStart){var n=jk.getInstance().getTimeOrigin(),r=Math.floor(1e3*(e.startTime+n)),i=e.responseStart?Math.floor(1e3*(e.responseStart-e.startTime)):void 0,o=Math.floor(1e3*(e.responseEnd-e.startTime));!function(t){var e=Wk.getInstance();if(e.instrumentationEnabled){var n=t.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&e.loggingEnabled&&e.logNetworkAfterSampling&&setTimeout((function(){return hC(t,0)}),0)}}({url:e.name&&e.name.split("?")[0],responsePayloadBytes:e.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mC(){Hk()&&(setTimeout((function(){return function(){var t=jk.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");if(t.onFirstInputDelay){var r=setTimeout((function(){gC.createOobTrace(e,n),r=void 0}),5e3);t.onFirstInputDelay((function(t){r&&(clearTimeout(r),gC.createOobTrace(e,n,t))}))}else gC.createOobTrace(e,n)}()}),0),setTimeout((function(){return function(){for(var t=jk.getInstance(),e=t.getEntriesByType("resource"),n=0,r=e;n<r.length;n++){yC(r[n])}t.setupObserver("resource",yC)}()}),0),setTimeout((function(){return function(){for(var t=jk.getInstance(),e=t.getEntriesByType("measure"),n=0,r=e;n<r.length;n++){bC(r[n])}t.setupObserver("measure",bC)}()}),0))}function bC(t){var e=t.name;"FB-PERF-TRACE-MEASURE"!==e.substring(0,"FB-PERF-TRACE-MEASURE".length)&&gC.createUserTimingTrace(e)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _C=function(){function t(t){this.app=t,jk.getInstance().requiredApisAvailable()&&Ht().then((function(t){t&&(sC||(uC(5500),sC=!0),nC().then(mC,mC))})).catch((function(t){Fk.info("Environment doesn't support IndexedDB: "+t)}))}return t.prototype.trace=function(t){return new gC(t)},Object.defineProperty(t.prototype,"instrumentationEnabled",{get:function(){return Wk.getInstance().instrumentationEnabled},set:function(t){Wk.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataCollectionEnabled",{get:function(){return Wk.getInstance().dataCollectionEnabled},set:function(t){Wk.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(t){var e=function(t,e){if("[DEFAULT]"!==t.name)throw Mk.create("FB not default");if("undefined"==typeof window)throw Mk.create("no window");var n;return n=window,Ok=n,Wk.getInstance().firebaseAppInstance=t,Wk.getInstance().installationsService=e,new _C(t)};t.INTERNAL.registerComponent(new ve("performance",(function(t){var n=t.getProvider("app").getImmediate(),r=t.getProvider("installations").getImmediate();return e(n,r)}),"PUBLIC")),t.registerVersion("@firebase/performance","0.4.17")}(Ke);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var wC,IC,TC,EC,SC="https://www.googletagmanager.com/gtag/js";(IC=wC||(wC={})).EVENT="event",IC.SET="set",IC.CONFIG="config",(EC=TC||(TC={})).ADD_SHIPPING_INFO="add_shipping_info",EC.ADD_PAYMENT_INFO="add_payment_info",EC.ADD_TO_CART="add_to_cart",EC.ADD_TO_WISHLIST="add_to_wishlist",EC.BEGIN_CHECKOUT="begin_checkout",EC.CHECKOUT_PROGRESS="checkout_progress",EC.EXCEPTION="exception",EC.GENERATE_LEAD="generate_lead",EC.LOGIN="login",EC.PAGE_VIEW="page_view",EC.PURCHASE="purchase",EC.REFUND="refund",EC.REMOVE_FROM_CART="remove_from_cart",EC.SCREEN_VIEW="screen_view",EC.SEARCH="search",EC.SELECT_CONTENT="select_content",EC.SELECT_ITEM="select_item",EC.SELECT_PROMOTION="select_promotion",EC.SET_CHECKOUT_OPTION="set_checkout_option",EC.SHARE="share",EC.SIGN_UP="sign_up",EC.TIMING_COMPLETE="timing_complete",EC.VIEW_CART="view_cart",EC.VIEW_ITEM="view_item",EC.VIEW_ITEM_LIST="view_item_list",EC.VIEW_PROMOTION="view_promotion",EC.VIEW_SEARCH_RESULTS="view_search_results";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var kC,CC=new Ne("@firebase/analytics");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NC(t,e,n,r,i,o){return It(this,void 0,void 0,(function(){var a,s,u,c;return Tt(this,(function(h){switch(h.label){case 0:a=r[i],h.label=1;case 1:return h.trys.push([1,7,,8]),a?[4,e[a]]:[3,3];case 2:return h.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return s=h.sent(),(u=s.find((function(t){return t.measurementId===i})))?[4,e[u.appId]]:[3,6];case 5:h.sent(),h.label=6;case 6:return[3,8];case 7:return c=h.sent(),CC.error(c),[3,8];case 8:return t(wC.CONFIG,i,o),[2]}}))}))}function AC(t,e,n,r,i){return It(this,void 0,void 0,(function(){var o,a,s,u,c,h,l,f;return Tt(this,(function(p){switch(p.label){case 0:return p.trys.push([0,4,,5]),o=[],i&&i.send_to?(a=i.send_to,Array.isArray(a)||(a=[a]),[4,Promise.all(n)]):[3,2];case 1:for(s=p.sent(),u=function(t){var n=s.find((function(e){return e.measurementId===t})),r=n&&e[n.appId];if(!r)return o=[],"break";o.push(r)},c=0,h=a;c<h.length&&(l=h[c],"break"!==u(l));c++);p.label=2;case 2:return 0===o.length&&(o=Object.values(e)),[4,Promise.all(o)];case 3:return p.sent(),t(wC.EVENT,r,i||{}),[3,5];case 4:return f=p.sent(),CC.error(f),[3,5];case 5:return[2]}}))}))}function PC(t,e,n,r,i){var o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=function(t,e,n,r){return function(i,o,a){return It(this,void 0,void 0,(function(){var s;return Tt(this,(function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),i!==wC.EVENT?[3,2]:[4,AC(t,e,n,o,a)];case 1:return u.sent(),[3,5];case 2:return i!==wC.CONFIG?[3,4]:[4,NC(t,e,n,r,o,a)];case 3:return u.sent(),[3,5];case 4:t(wC.SET,o),u.label=5;case 5:return[3,7];case 6:return s=u.sent(),CC.error(s),[3,7];case 7:return[2]}}))}))}}(o,t,e,n),{gtagCore:o,wrappedGtag:window[i]}}var RC=((kC={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",kC["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",kC["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",kC["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",kC["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",kC["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",kC["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",kC["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',kC["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',kC),DC=new Qt("analytics","Analytics",RC),xC=new(function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e=1e3),this.throttleMetadata=t,this.intervalMillis=e}return t.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},t.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},t.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},t}());function OC(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function LC(t){var e;return It(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return Tt(this,(function(c){switch(c.label){case 0:return n=t.appId,r=t.apiKey,i={method:"GET",headers:OC(r)},o="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),[4,fetch(o,i)];case 1:if(200===(a=c.sent()).status||304===a.status)return[3,6];s="",c.label=2;case 2:return c.trys.push([2,4,,5]),[4,a.json()];case 3:return u=c.sent(),(null===(e=u.error)||void 0===e?void 0:e.message)&&(s=u.error.message),[3,5];case 4:return c.sent(),[3,5];case 5:throw DC.create("config-fetch-failed",{httpStatus:a.status,responseMessage:s});case 6:return[2,a.json()]}}))}))}function MC(t,e,n,r){var i=e.throttleEndTimeMillis,o=e.backoffCount;return void 0===r&&(r=xC),It(this,void 0,void 0,(function(){var e,a,s,u,c,h,l;return Tt(this,(function(f){switch(f.label){case 0:e=t.appId,a=t.measurementId,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,FC(n,i)];case 2:return f.sent(),[3,4];case 3:if(s=f.sent(),a)return CC.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+a+' provided in the "measurementId" field in the local Firebase config. ['+s.message+"]"),[2,{appId:e,measurementId:a}];throw s;case 4:return f.trys.push([4,6,,7]),[4,LC(t)];case 5:return u=f.sent(),r.deleteThrottleMetadata(e),[2,u];case 6:if(!function(t){if(!(t instanceof Gt&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(c=f.sent())){if(r.deleteThrottleMetadata(e),a)return CC.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+a+' provided in the "measurementId" field in the local Firebase config. ['+c.message+"]"),[2,{appId:e,measurementId:a}];throw c}return h=503===Number(c.customData.httpStatus)?pe(o,r.intervalMillis,30):pe(o,r.intervalMillis),l={throttleEndTimeMillis:Date.now()+h,backoffCount:o+1},r.setThrottleMetadata(e,l),CC.debug("Calling attemptFetch again in "+h+" millis"),[2,MC(t,l,n,r)];case 7:return[2]}}))}))}function FC(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(DC.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}var UC=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jC(t,e,n,r,i,o){return It(this,void 0,void 0,(function(){var a,s,u,c,h,l,f;return Tt(this,(function(p){switch(p.label){case 0:return(a=function(t,e,n){return void 0===e&&(e=xC),It(this,void 0,void 0,(function(){var r,i,o,a,s,u,c=this;return Tt(this,(function(h){if(r=t.options,i=r.appId,o=r.apiKey,a=r.measurementId,!i)throw DC.create("no-app-id");if(!o){if(a)return[2,{measurementId:a,appId:i}];throw DC.create("no-api-key")}return s=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new UC,setTimeout((function(){return It(c,void 0,void 0,(function(){return Tt(this,(function(t){return u.abort(),[2]}))}))}),void 0!==n?n:6e4),[2,MC({appId:i,apiKey:o,measurementId:a},s,u,e)]}))}))}(t)).then((function(e){n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&CC.warn("The measurement ID in the local Firebase config ("+t.options.measurementId+") does not match the measurement ID fetched from the server ("+e.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(t){return CC.error(t)})),e.push(a),s=function(){return It(this,void 0,void 0,(function(){var t;return Tt(this,(function(e){switch(e.label){case 0:return Wt()?[3,1]:(CC.warn(DC.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return e.trys.push([1,3,,4]),[4,Ht()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),CC.warn(DC.create("indexeddb-unavailable",{errorInfo:t}).message),[2,!1];case 4:return[2,!0]}}))}))}().then((function(t){return t?r.getId():void 0})),[4,Promise.all([a,s])];case 1:return u=p.sent(),c=u[0],h=u[1],function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(SC))return r}return null}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */()||function(t,e){var n=document.createElement("script");n.src=SC+"?l="+t+"&id="+e,n.async=!0,document.head.appendChild(n)}(o,c.measurementId),i("js",new Date),(f={}).origin="firebase",f.update=!0,l=f,null!=h&&(l.firebase_id=h),i(wC.CONFIG,c.measurementId,l),[2,c.measurementId]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qC,VC,BC={},KC=[],WC={},HC="dataLayer",zC="gtag",GC=!1;function QC(t){if(GC)throw DC.create("already-initialized");t.dataLayerName&&(HC=t.dataLayerName),t.gtagName&&(zC=t.gtagName)}function $C(t,e){!function(){var t=[];if(Vt()&&t.push("This is a browser extension environment."),zt()||t.push("Cookies are not available."),t.length>0){var e=t.map((function(t,e){return"("+(e+1)+") "+t})).join(" "),n=DC.create("invalid-analytics-context",{errorInfo:e});CC.warn(n.message)}}();var n,r,i=t.options.appId;if(!i)throw DC.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw DC.create("no-api-key");CC.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=BC[i])throw DC.create("already-exists",{id:i});if(!GC){n=HC,r=[],Array.isArray(window[n])?r=window[n]:window[n]=r;var o=PC(BC,KC,WC,HC,zC),a=o.wrappedGtag,s=o.gtagCore;VC=a,qC=s,GC=!0}return BC[i]=jC(t,KC,WC,e,qC,HC),{app:t,logEvent:function(t,e,n){(
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t,e,n,r,i){return It(this,void 0,void 0,(function(){var o,a;return Tt(this,(function(s){switch(s.label){case 0:return i&&i.global?(t(wC.EVENT,n,r),[2]):[3,1];case 1:return[4,e];case 2:o=s.sent(),a=wt(wt({},r),{send_to:o}),t(wC.EVENT,n,a),s.label=3;case 3:return[2]}}))}))})(VC,BC[i],t,e,n).catch((function(t){return CC.error(t)}))},setCurrentScreen:function(t,e){(function(t,e,n,r){return It(this,void 0,void 0,(function(){var i;return Tt(this,(function(o){switch(o.label){case 0:return r&&r.global?(t(wC.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(wC.CONFIG,i,{update:!0,screen_name:n}),o.label=3;case 3:return[2]}}))}))})(VC,BC[i],t,e).catch((function(t){return CC.error(t)}))},setUserId:function(t,e){(function(t,e,n,r){return It(this,void 0,void 0,(function(){var i;return Tt(this,(function(o){switch(o.label){case 0:return r&&r.global?(t(wC.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(wC.CONFIG,i,{update:!0,user_id:n}),o.label=3;case 3:return[2]}}))}))})(VC,BC[i],t,e).catch((function(t){return CC.error(t)}))},setUserProperties:function(t,e){(function(t,e,n,r){return It(this,void 0,void 0,(function(){var i,o,a,s,u;return Tt(this,(function(c){switch(c.label){case 0:if(!r||!r.global)return[3,1];for(i={},o=0,a=Object.keys(n);o<a.length;o++)s=a[o],i["user_properties."+s]=n[s];return t(wC.SET,i),[2,Promise.resolve()];case 1:return[4,e];case 2:u=c.sent(),t(wC.CONFIG,u,{update:!0,user_properties:n}),c.label=3;case 3:return[2]}}))}))})(VC,BC[i],t,e).catch((function(t){return CC.error(t)}))},setAnalyticsCollectionEnabled:function(t){(function(t,e){return It(this,void 0,void 0,(function(){var n;return Tt(this,(function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),window["ga-disable-"+n]=!e,[2]}}))}))})(BC[i],t).catch((function(t){return CC.error(t)}))},INTERNAL:{delete:function(){return delete BC[i],Promise.resolve()}}}}function YC(){return It(this,void 0,void 0,(function(){return Tt(this,(function(t){switch(t.label){case 0:if(Vt())return[2,!1];if(!zt())return[2,!1];if(!Wt())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Ht()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(t){t.INTERNAL.registerComponent(new ve("analytics",(function(t){return $C(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())}),"PUBLIC").setServiceProps({settings:QC,EventName:TC,isSupported:YC})),t.INTERNAL.registerComponent(new ve("analytics-internal",(function(t){try{return{logEvent:t.getProvider("analytics").getImmediate().logEvent}}catch(aT){throw DC.create("interop-component-reg-failed",{reason:aT})}}),"PRIVATE")),t.registerVersion("@firebase/analytics","0.6.17")}(Ke);var XC,JC=function(){function t(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}return t.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,r=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+r+"."),r},t.prototype.fetch=function(t){return It(this,void 0,void 0,(function(){var e,n,r,i,o;return Tt(this,(function(a){switch(a.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return e=a.sent(),n=e[0],(r=e[1])&&this.isCachedDataFresh(t.cacheMaxAgeMillis,n)?[2,r]:(t.eTag=r&&r.eTag,[4,this.client.fetch(t)]);case 2:return i=a.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return a.sent(),[2,i]}}))}))},t}(),ZC=((XC={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",XC["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",XC["registration-api-key"]="Undefined API key. Check Firebase app initialization.",XC["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",XC["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",XC["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",XC["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",XC["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",XC["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",XC["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',XC["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',XC["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",XC["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",XC),tN=new Qt("remoteconfig","Remote Config",ZC);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var eN=function(){function t(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}return t.prototype.fetch=function(t){return It(this,void 0,void 0,(function(){var e,n,r,i,o,a,s,u,c,h,l,f,p,d,v,g,y,m,b;return Tt(this,(function(_){switch(_.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:e=_.sent(),n=e[0],r=e[1],i=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",o=i+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},s={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:this.appId,language_code:(void 0===w&&(w=navigator),w.languages&&w.languages[0]||w.language)},u={method:"POST",headers:a,body:JSON.stringify(s)},c=fetch(o,u),h=new Promise((function(e,n){t.signal.addEventListener((function(){var t=new Error("The operation was aborted.");t.name="AbortError",n(t)}))})),_.label=2;case 2:return _.trys.push([2,5,,6]),[4,Promise.race([c,h])];case 3:return _.sent(),[4,c];case 4:return l=_.sent(),[3,6];case 5:throw f=_.sent(),p="fetch-client-network","AbortError"===f.name&&(p="fetch-timeout"),tN.create(p,{originalErrorMessage:f.message});case 6:if(d=l.status,v=l.headers.get("ETag")||void 0,200!==l.status)return[3,11];m=void 0,_.label=7;case 7:return _.trys.push([7,9,,10]),[4,l.json()];case 8:return m=_.sent(),[3,10];case 9:throw b=_.sent(),tN.create("fetch-client-parse",{originalErrorMessage:b.message});case 10:g=m.entries,y=m.state,_.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===y?d=500:"NO_CHANGE"===y?d=304:"NO_TEMPLATE"!==y&&"EMPTY_CONFIG"!==y||(g={}),304!==d&&200!==d)throw tN.create("fetch-status",{httpStatus:d});return[2,{status:d,eTag:v,config:g}]}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var w}))}))},t}(),nN=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}(),rN=["1","true","t","yes","y","on"],iN=function(){function t(t,e){void 0===e&&(e=""),this._source=t,this._value=e}return t.prototype.asString=function(){return this._value},t.prototype.asBoolean=function(){return"static"!==this._source&&rN.indexOf(this._value.toLowerCase())>=0},t.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},t.prototype.getSource=function(){return this._source},t}(),oN=function(){function t(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return t.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=_e.DEBUG;break;case"silent":this._logger.logLevel=_e.SILENT;break;default:this._logger.logLevel=_e.ERROR}},Object.defineProperty(t.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),t.prototype.activate=function(){return It(this,void 0,void 0,(function(){var t,e,n;return Tt(this,(function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return t=r.sent(),e=t[0],n=t[1],e&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}}))}))},t.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then((function(){t._isInitializationComplete=!0}))),this._initializePromise},t.prototype.fetch=function(){return It(this,void 0,void 0,(function(){var t,e,n,r=this;return Tt(this,(function(i){switch(i.label){case 0:t=new nN,setTimeout((function(){return It(r,void 0,void 0,(function(){return Tt(this,(function(e){return t.abort(),[2]}))}))}),this.settings.fetchTimeoutMillis),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return i.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return i.sent(),[3,6];case 4:return e=i.sent(),n=function(t,e){return t instanceof Gt&&-1!==t.code.indexOf(e)}(e,"fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw i.sent(),e;case 6:return[2]}}))}))},t.prototype.fetchAndActivate=function(){return It(this,void 0,void 0,(function(){return Tt(this,(function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}}))}))},t.prototype.getAll=function(){var t=this;return function(t,e){void 0===t&&(t={});void 0===e&&(e={});return Object.keys(wt(wt({},t),e))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this._storageCache.getActiveConfig(),this.defaultConfig).reduce((function(e,n){return e[n]=t.getValue(n),e}),{})},t.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},t.prototype.getNumber=function(t){return this.getValue(t).asNumber()},t.prototype.getString=function(t){return this.getValue(t).asString()},t.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new iN("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new iN("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new iN("static"))},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aN(t,e){var n=t.target.error||void 0;return tN.create(e,{originalErrorMessage:n&&n.message})}var sN=function(){function t(t,e,n,r){void 0===r&&(r=new Promise((function(t,e){var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(t){e(aN(t,"storage-open"))},n.onsuccess=function(e){t(e.target.result)},n.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore("app_namespace_store",{keyPath:"compositeKey"})}}}))),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}return t.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},t.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},t.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},t.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},t.prototype.getActiveConfig=function(){return this.get("active_config")},t.prototype.setActiveConfig=function(t){return this.set("active_config",t)},t.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},t.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},t.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},t.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},t.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},t.prototype.get=function(t){return It(this,void 0,void 0,(function(){var e,n=this;return Tt(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction(["app_namespace_store"],"readonly").objectStore("app_namespace_store"),a=n.createCompositeKey(t);try{var s=o.get(a);s.onerror=function(t){i(aN(t,"storage-get"))},s.onsuccess=function(t){var e=t.target.result;r(e?e.value:void 0)}}catch(aT){i(tN.create("storage-get",{originalErrorMessage:aT&&aT.message}))}}))]}}))}))},t.prototype.set=function(t,e){return It(this,void 0,void 0,(function(){var n,r=this;return Tt(this,(function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise((function(i,o){var a=n.transaction(["app_namespace_store"],"readwrite").objectStore("app_namespace_store"),s=r.createCompositeKey(t);try{var u=a.put({compositeKey:s,value:e});u.onerror=function(t){o(aN(t,"storage-set"))},u.onsuccess=function(){i()}}catch(aT){o(tN.create("storage-set",{originalErrorMessage:aT&&aT.message}))}}))]}}))}))},t.prototype.delete=function(t){return It(this,void 0,void 0,(function(){var e,n=this;return Tt(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction(["app_namespace_store"],"readwrite").objectStore("app_namespace_store"),a=n.createCompositeKey(t);try{var s=o.delete(a);s.onerror=function(t){i(aN(t,"storage-delete"))},s.onsuccess=function(){r()}}catch(aT){i(tN.create("storage-delete",{originalErrorMessage:aT&&aT.message}))}}))]}}))}))},t.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},t}(),uN=function(){function t(t){this.storage=t}return t.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},t.prototype.getActiveConfig=function(){return this.activeConfig},t.prototype.loadFromStorage=function(){return It(this,void 0,void 0,(function(){var t,e,n,r,i,o;return Tt(this,(function(a){switch(a.label){case 0:return t=this.storage.getLastFetchStatus(),e=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,t];case 1:return(r=a.sent())&&(this.lastFetchStatus=r),[4,e];case 2:return(i=a.sent())&&(this.lastSuccessfulFetchTimestampMillis=i),[4,n];case 3:return(o=a.sent())&&(this.activeConfig=o),[2]}}))}))},t.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},t.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function cN(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(tN.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}var hN,lN,fN=function(){function t(t,e){this.client=t,this.storage=e}return t.prototype.fetch=function(t){return It(this,void 0,void 0,(function(){var e;return Tt(this,(function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,e)]}}))}))},t.prototype.attemptFetch=function(t,e){var n=e.throttleEndTimeMillis,r=e.backoffCount;return It(this,void 0,void 0,(function(){var e,i,o;return Tt(this,(function(a){switch(a.label){case 0:return[4,cN(t.signal,n)];case 1:a.sent(),a.label=2;case 2:return a.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return e=a.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return a.sent(),[2,e];case 5:if(!function(t){if(!(t instanceof Gt&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(i=a.sent()))throw i;return o={throttleEndTimeMillis:Date.now()+pe(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(o)];case 6:return a.sent(),[2,this.attemptFetch(t,o)];case 7:return[2]}}))}))},t}(),pN="@firebase/remote-config";(hN=Ke).INTERNAL.registerComponent(new ve("remoteConfig",(function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw tN.create("registration-window");var o=r.options,a=o.projectId,s=o.apiKey,u=o.appId;if(!a)throw tN.create("registration-project-id");if(!s)throw tN.create("registration-api-key");if(!u)throw tN.create("registration-app-id");n=n||"firebase";var c=new sN(u,r.name,n),h=new uN(c),l=new Ne(pN);l.logLevel=_e.ERROR;var f=new eN(i,hN.SDK_VERSION,n,a,s,u),p=new fN(f,c),d=new JC(p,c,h,l),v=new oN(r,d,h,c,l);return v.ensureInitialized(),v}),"PUBLIC").setMultipleInstances(!0)),hN.registerVersion(pN,"0.1.42");var dN=((lN={})["already-activated"]="You are trying to activate AppCheck for FirebaseApp {$appName}, while it is already activated. AppCheck can only be activated once.",lN["use-before-activation"]="AppCheck is being used before activate() is called for FirebaseApp {$appName}. Please make sure you call activate() before instantiating other Firebase services.",lN["fetch-network-error"]="Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",lN["fetch-parse-error"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",lN["fetch-status-error"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",lN["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",lN["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",lN["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",lN["recaptcha-error"]="ReCAPTCHA error.",lN),vN=new Qt("appCheck","AppCheck",dN),gN=new Map,yN={activated:!1,tokenObservers:[]},mN={enabled:!1};function bN(t){return gN.get(t)||yN}function _N(t,e){gN.set(t,e)}function wN(){return mN}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var IN="https://content-firebaseappcheck.googleapis.com/v1beta",TN=3e4,EN=96e4,SN=function(){function t(t,e,n,r,i){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=r,r>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}return t.prototype.start=function(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch((function(){}))},t.prototype.stop=function(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)},t.prototype.isRunning=function(){return!!this.pending},t.prototype.process=function(t){return It(this,void 0,void 0,(function(){var e;return Tt(this,(function(n){switch(n.label){case 0:this.stop(),n.label=1;case 1:return n.trys.push([1,6,,7]),this.pending=new Mt,[4,(r=this.getNextRun(t),new Promise((function(t){setTimeout(t,r)})))];case 2:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 3:return n.sent(),this.pending=new Mt,[4,this.operation()];case 4:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 5:return n.sent(),this.process(!0).catch((function(){})),[3,7];case 6:return e=n.sent(),this.retryPolicy(e)?this.process(!1).catch((function(){})):this.stop(),[3,7];case 7:return[2]}var r;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}))}))},t.prototype.getNextRun=function(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();var e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e},t}();function kN(){return self.grecaptcha}function CN(t){if(!bN(t).activated)throw vN.create("use-before-activation",{appName:t.name})}function NN(t){return Dt.encodeString(JSON.stringify(t),!1)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AN(t,e){var n=t.url,r=t.body;return It(this,void 0,void 0,(function(){var t,i,o,a,s,u,c,h,l,f;return Tt(this,(function(p){switch(p.label){case 0:t={"Content-Type":"application/json"},(i=e.getImmediate({optional:!0}))&&(t["X-Firebase-Client"]=i.getPlatformInfoString()),o={method:"POST",body:JSON.stringify(r),headers:t},p.label=1;case 1:return p.trys.push([1,3,,4]),[4,fetch(n,o)];case 2:return a=p.sent(),[3,4];case 3:throw s=p.sent(),vN.create("fetch-network-error",{originalErrorMessage:s.message});case 4:if(200!==a.status)throw vN.create("fetch-status-error",{httpStatus:a.status});p.label=5;case 5:return p.trys.push([5,7,,8]),[4,a.json()];case 6:return u=p.sent(),[3,8];case 7:throw c=p.sent(),vN.create("fetch-parse-error",{originalErrorMessage:c.message});case 8:if(!(h=u.ttl.match(/^([\d.]+)(s)$/))||!h[2]||isNaN(Number(h[1])))throw vN.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration format: "+u.ttl});return l=1e3*Number(h[1]),f=Date.now(),[2,{token:u.attestationToken,expireTimeMillis:f+l,issuedAtTimeMillis:f}]}}))}))}function PN(t,e){var n=t.options,r=n.projectId,i=n.appId,o=n.apiKey;return{url:IN+"/projects/"+r+"/apps/"+i+":exchangeRecaptchaToken?key="+o,body:{recaptcha_token:e}}}function RN(t,e){var n=t.options,r=n.projectId,i=n.appId,o=n.apiKey;return{url:IN+"/projects/"+r+"/apps/"+i+":exchangeDebugToken?key="+o,body:{debug_token:e}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var DN="firebase-app-check-store",xN=null;function ON(){return xN||(xN=new Promise((function(t,e){try{var n=indexedDB.open("firebase-app-check-database",1);n.onsuccess=function(e){t(e.target.result)},n.onerror=function(t){var n;e(vN.create("storage-open",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(DN,{keyPath:"compositeKey"})}}}catch(aT){e(vN.create("storage-open",{originalErrorMessage:aT.message}))}})))}function LN(t){return FN(UN(t))}function MN(t,e){return It(this,void 0,void 0,(function(){var n,r,i,o;return Tt(this,(function(a){switch(a.label){case 0:return[4,ON()];case 1:return n=a.sent(),r=n.transaction(DN,"readwrite"),i=r.objectStore(DN),o=i.put({compositeKey:t,value:e}),[2,new Promise((function(t,e){o.onsuccess=function(e){t()},r.onerror=function(t){var n;e(vN.create("storage-set",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))}}))]}}))}))}function FN(t){return It(this,void 0,void 0,(function(){var e,n,r,i;return Tt(this,(function(o){switch(o.label){case 0:return[4,ON()];case 1:return e=o.sent(),n=e.transaction(DN,"readonly"),r=n.objectStore(DN),i=r.get(t),[2,new Promise((function(t,e){i.onsuccess=function(e){var n=e.target.result;t(n?n.value:void 0)},n.onerror=function(t){var n;e(vN.create("storage-get",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))}}))]}}))}))}function UN(t){return t.options.appId+"-"+t.name}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jN=new Ne("@firebase/app-check");
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qN(t,e){return Wt()?function(t,e){return MN(UN(t),e)}(t,e).catch((function(t){jN.warn("Failed to write token to indexeddb. Error: "+t)})):Promise.resolve()}function VN(){return It(this,void 0,void 0,(function(){var t,e;return Tt(this,(function(n){switch(n.label){case 0:t=void 0,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,FN("debug-token")];case 2:return t=n.sent(),[3,4];case 3:return n.sent(),[3,4];case 4:return t?[2,t]:(e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})),(r=e,MN("debug-token",r)).catch((function(t){return jN.warn("Failed to persist debug token to indexeddb. Error: "+t)})),console.log("AppCheck debug token: "+e+". You will need to whitelist it in the Firebase console for it to work"),[2,e])}var r}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BN(){return It(this,void 0,void 0,(function(){var t;return Tt(this,(function(e){if((t=wN()).enabled&&t.token)return[2,t.token.promise];throw Error("\n            Can't get debug token in production mode.\n        ")}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var KN={error:"UNKNOWN_ERROR"};function WN(t,e,n){return void 0===n&&(n=!1),It(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,h,l,f;return Tt(this,(function(p){switch(p.label){case 0:return CN(t),r=bN(t),i=r.token,o=void 0,i?[3,2]:[4,r.cachedTokenPromise];case 1:(a=p.sent())&&QN(a)&&(i=a,_N(t,wt(wt({},r),{token:i})),GN(t,{token:i.token})),p.label=2;case 2:return!n&&i&&QN(i)?[2,{token:i.token}]:wN().enabled?(u=AN,c=RN,h=[t],[4,BN()]):[3,6];case 3:return[4,u.apply(void 0,[c.apply(void 0,h.concat([p.sent()])),e])];case 4:return s=p.sent(),[4,qN(t,s)];case 5:return p.sent(),_N(t,wt(wt({},r),{token:s})),[2,{token:s.token}];case 6:return p.trys.push([6,8,,9]),[4,r.provider.getToken()];case 7:return i=p.sent(),[3,9];case 8:return l=p.sent(),jN.error(l),o=l,[3,9];case 9:return i?[3,10]:(f=function(t){return{token:NN(KN),error:t}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(o),[3,12]);case 10:return f={token:i.token},_N(t,wt(wt({},r),{token:i})),[4,qN(t,i)];case 11:p.sent(),p.label=12;case 12:return GN(t,f),[2,f]}}))}))}function HN(t,e,n,r,i){var o=bN(t),a={next:r,error:i,type:n},s=wt(wt({},o),{tokenObservers:kt(kt([],o.tokenObservers),[a])});if(!s.tokenRefresher){var u=function(t,e){var n=this;return new SN((function(){return It(n,void 0,void 0,(function(){var n;return Tt(this,(function(r){switch(r.label){case 0:return bN(t).token?[3,2]:[4,WN(t,e)];case 1:return n=r.sent(),[3,4];case 2:return[4,WN(t,e,!0)];case 3:n=r.sent(),r.label=4;case 4:if(n.error)throw n.error;return[2]}}))}))}),(function(){return!0}),(function(){var e=bN(t);if(e.token){var n=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5,r=e.token.expireTimeMillis-3e5;return n=Math.min(n,r),Math.max(0,n-Date.now())}return 0}),TN,EN)}(t,e);s.tokenRefresher=u}if(!s.tokenRefresher.isRunning()&&o.isTokenAutoRefreshEnabled&&s.tokenRefresher.start(),o.token&&QN(o.token)){var c=o.token;Promise.resolve().then((function(){return r({token:c.token})})).catch((function(){}))}else null==o.token&&o.cachedTokenPromise.then((function(t){t&&QN(t)&&r({token:t.token})})).catch((function(){}));_N(t,s)}function zN(t,e){var n=bN(t),r=n.tokenObservers.filter((function(t){return t.next!==e}));0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),_N(t,wt(wt({},n),{tokenObservers:r}))}function GN(t,e){for(var n=0,r=bN(t).tokenObservers;n<r.length;n++){var i=r[n];try{"EXTERNAL"===i.type&&null!=e.error?i.error(e.error):i.next(e)}catch(o){}}}function QN(t){return t.expireTimeMillis-Date.now()>0}function $N(t,e){var n=bN(t),r=new Mt;_N(t,wt(wt({},n),{reCAPTCHAState:{initialized:r}}));var i="fire_app_check_"+t.name,o=document.createElement("div");o.id=i,o.style.display="none",document.body.appendChild(o);var a,s,u=kN();return u?u.ready((function(){XN(t,e,u,i),r.resolve(u)})):(a=function(){var n=kN();if(!n)throw new Error("no recaptcha");n.ready((function(){XN(t,e,n,i),r.resolve(n)}))},(s=document.createElement("script")).src="https://www.google.com/recaptcha/api.js",s.onload=a,document.head.appendChild(s)),r.promise}function YN(t){return It(this,void 0,void 0,(function(){var e;return Tt(this,(function(n){switch(n.label){case 0:return CN(t),[4,bN(t).reCAPTCHAState.initialized.promise];case 1:return e=n.sent(),[2,new Promise((function(n,r){var i=bN(t).reCAPTCHAState;e.ready((function(){n(e.execute(i.widgetId,{action:"fire_app_check"}))}))}))]}}))}))}function XN(t,e,n,r){var i=n.render(r,{sitekey:e,size:"invisible"}),o=bN(t);_N(t,wt(wt({},o),{reCAPTCHAState:wt(wt({},o.reCAPTCHAState),{widgetId:i})}))}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var JN=function(){function t(t){this._siteKey=t}return t.prototype.getToken=function(){return It(this,void 0,void 0,(function(){var t;return Tt(this,(function(e){switch(e.label){case 0:if(!this._app||!this._platformLoggerProvider)throw vN.create("use-before-activation",{appName:""});e.label=1;case 1:return e.trys.push([1,3,,4]),[4,YN(this._app)];case 2:return t=e.sent(),[3,4];case 3:throw e.sent(),vN.create("recaptcha-error");case 4:return[2,AN(PN(this._app,t),this._platformLoggerProvider)]}}))}))},t.prototype.initialize=function(t,e){this._app=t,this._platformLoggerProvider=e,$N(t,this._siteKey).catch((function(){}))},t}(),ZN=function(){function t(t){this._customProviderOptions=t}return t.prototype.getToken=function(){return It(this,void 0,void 0,(function(){var t,e,n;return Tt(this,(function(r){switch(r.label){case 0:if(!this._app)throw vN.create("use-before-activation",{appName:""});return[4,this._customProviderOptions.getToken()];case 1:return t=r.sent(),i=t.token,o=Zt(i).claims,e="object"==typeof o&&o.hasOwnProperty("iat")?o.iat:null,n=null!==e&&e<Date.now()&&e>0?1e3*e:Date.now(),[2,wt(wt({},t),{issuedAtTimeMillis:n})]}var i,o}))}))},t.prototype.initialize=function(t){this._app=t},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function tA(t,e,n,r){var i=bN(t);if(i.activated)throw vN.create("already-activated",{appName:t.name});var o=wt(wt({},i),{activated:!0});o.cachedTokenPromise=function(t){return It(this,void 0,void 0,(function(){var e,n;return Tt(this,(function(r){switch(r.label){case 0:if(!Wt())return[3,5];e=void 0,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,LN(t)];case 2:return e=r.sent(),[3,4];case 3:return n=r.sent(),jN.warn("Failed to read token from indexeddb. Error: "+n),[3,4];case 4:return[2,e];case 5:return[2,void 0]}}))}))}(t).then((function(e){return e&&QN(e)&&_N(t,wt(wt({},bN(t)),{token:e})),e})),o.provider="string"==typeof e?new JN(e):e instanceof JN||e instanceof ZN?e:new ZN({getToken:e.getToken}),o.isTokenAutoRefreshEnabled=void 0===r?t.automaticDataCollectionEnabled:r,_N(t,o),o.provider.initialize(t,n)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function eA(t,e){return{app:t,activate:function(n,r){return tA(t,n,e,r)},setTokenAutoRefreshEnabled:function(e){return function(t,e){var n=bN(t);n.tokenRefresher&&(!0===e?n.tokenRefresher.start():n.tokenRefresher.stop()),_N(t,wt(wt({},n),{isTokenAutoRefreshEnabled:e}))}(t,e)},getToken:function(n){return function(t,e,n){return It(this,void 0,void 0,(function(){var r;return Tt(this,(function(i){switch(i.label){case 0:return[4,WN(t,e,n)];case 1:if((r=i.sent()).error)throw r.error;return[2,{token:r.token}]}}))}))}(t,e,n)},onTokenChanged:function(n,r,i){return function(t,e,n,r,i){var o=function(){},a=function(){};return o=null!=n.next?n.next.bind(n):n,null!=n.error?a=n.error.bind(n):r&&(a=r),HN(t,e,"EXTERNAL",o,a),function(){return zN(t,o)}}(t,e,n,r)},INTERNAL:{delete:function(){for(var e=0,n=bN(t).tokenObservers;e<n.length;e++){var r=n[e];zN(t,r.next)}return Promise.resolve()}}}}!function(t){t.INTERNAL.registerComponent(new ve("appCheck",(function(t){return eA(t.getProvider("app").getImmediate(),t.getProvider("platform-logger"))}),"PUBLIC").setServiceProps({ReCaptchaV3Provider:JN,CustomProvider:ZN}).setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(t,e,n){t.getProvider("app-check-internal").initialize()}))),t.INTERNAL.registerComponent(new ve("app-check-internal",(function(t){return function(t,e){return{getToken:function(n){return WN(t,e,n)},addTokenListener:function(n){return HN(t,e,"INTERNAL",n)},removeTokenListener:function(e){return zN(t,e)}}}(t.getProvider("app").getImmediate(),t.getProvider("platform-logger"))}),"PUBLIC").setInstantiationMode("EXPLICIT")),t.registerVersion("@firebase/app-check","0.3.0")}(Ke),function(){var t=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}();if("string"==typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN||!0===t.FIREBASE_APPCHECK_DEBUG_TOKEN){var e=wN();e.enabled=!0;var n=new Mt;e.token=n,"string"==typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN?n.resolve(t.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(VN())}}();
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Ke.registerVersion("firebase","8.9.0","app"),Ke.SDK_VERSION="8.9.0";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),Ke.registerVersion("firebase","8.9.0");export{B as A,e as B,mt as C,u as D,m as E,t as F,k as G,i as H,c as I,h as J,p as K,d as L,f as M,Ke as N,w as O,X as P,M as Q,U as R,gt as S,C as T,A as U,j as V,z as W,F as X,P as a,N as b,D as c,_ as d,I as e,b as f,x as g,L as h,vt as i,ht as j,E as k,S as l,lt as m,O as n,ft as o,ut as p,ct as q,it as r,a as s,T as t,st as u,pt as v,ot as w,at as x,W as y,K as z};
